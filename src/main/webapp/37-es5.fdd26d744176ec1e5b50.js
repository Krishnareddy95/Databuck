!function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,i){if(!t)return;if("string"==typeof t)return e(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(t,i)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,a=void 0,"symbol"==typeof(a=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),n)}var o,a}function o(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{"lYC+":function(e,n,a){"use strict";a.r(n),a.d(n,"DatabuckLogsModule",function(){return Gt});var r=a("ofXK"),s=a("3Pt+"),c=a("6t4m"),l=a("VEwP"),d=a("ThbA"),g=a("PCNd"),u=a("tyNb"),p=a("Iab2"),f=a("Z2oo"),h=a.n(f),m=a("Tm3k"),b=a.n(m),v=a("7rT8"),C=a.n(v),P=a("DaQG"),x=a.n(P),y=a("i680"),O=a("fXoL"),w=a("kH6v"),L=a("JqCM"),_=a("7zfz"),M=a("K3ix"),k=a("INLy"),D=a("E+E9"),S=a("jIHw"),N=a("rEr+"),j=a("guv5"),F=a("arFO"),I=a("Ji6n");function z(t,e){1&t&&(O.jc(0,"div",20),O.ec(1,"span",21),O.ic())}function V(t,e){if(1&t){var i=O.kc();O.jc(0,"th"),O.bd(1),O.ec(2,"br"),O.ec(3,"p-sortIcon",25),O.jc(4,"app-column-filter",26),O.qc("filterData",function(t){return O.Rc(i),O.uc(3).getFilterData(t)})("resetFilterValues",function(t){return O.Rc(i),O.uc(3).resetFilter(t)}),O.ic(),O.jc(5,"span",27),O.jc(6,"i",28),O.qc("click",function(){O.Rc(i);var t=O.uc().$implicit;return O.uc(2).onFilterClick(t.originalValue)}),O.ic(),O.ic(),O.ic()}if(2&t){var n=O.uc().$implicit,o=O.uc(2);O.Nb(1),O.dd(" ",n.displayValue,""),O.Nb(2),O.Cc("field",n.originalValue),O.Cc("pSortableColumn",n.originalValue),O.Nb(1),O.Bc("colFilterData",o.getFilterState(n.originalValue))("display",o.displayFiltersFor[n.originalValue])("customId",n.originalValue)("fieldName",n.originalValue),O.Nb(1),O.Bc("ngClass",o.filterColumnNameWithHighlightName(n.originalValue)?"selected-filter-column":""),O.Nb(1),O.Bc("ngClass",o.filterColumnNameWithHighlightName(n.originalValue)?"pi pi-filter-fill":"pi pi-filter")}}function R(t,e){if(1&t&&(O.hc(0),O.Zc(1,V,7,9,"th",24),O.gc()),2&t){var i=e.$implicit;O.Nb(1),O.Bc("ngIf",i.isSelected)}}function B(t,e){if(1&t&&(O.jc(0,"tr",22),O.Zc(1,R,2,1,"ng-container",23),O.ic()),2&t){var i=O.uc();O.Nb(1),O.Bc("ngForOf",i.customizeCols)}}function E(t,e){if(1&t&&(O.jc(0,"td",31),O.jc(1,"span"),O.bd(2),O.ic(),O.ic()),2&t){var i=O.uc().$implicit,n=O.uc().$implicit;O.Bc("title",n[i.originalValue]),O.Nb(2),O.cd(n[i.originalValue])}}function A(t,e){if(1&t&&(O.hc(0),O.Zc(1,E,3,2,"td",30),O.gc()),2&t){var i=e.$implicit;O.Nb(1),O.Bc("ngIf",i.isSelected)}}function W(t,e){if(1&t&&(O.jc(0,"tr",29),O.Zc(1,A,2,1,"ng-container",23),O.ic()),2&t){var i=O.uc();O.Nb(1),O.Bc("ngForOf",i.customizeCols)}}function q(t,e){1&t&&(O.jc(0,"div",32),O.bd(1," No records found "),O.ic())}function T(t,e){if(1&t){var i=O.kc();O.jc(0,"div",33),O.jc(1,"p-paginator",34,35),O.qc("onPageChange",function(t){return O.Rc(i),O.uc().onPageChange(t)})("firstChange",function(t){return O.Rc(i),O.uc().first=t}),O.ic(),O.ic()}if(2&t){var n=O.uc();O.Nb(1),O.Bc("rows",10)("totalRecords",n.userLists.length)("showCurrentPageReport",!0)("first",n.first)}}function Z(t,e){if(1&t&&(O.jc(0,"div",40),O.jc(1,"div"),O.bd(2),O.ic(),O.ic()),2&t){var i=O.uc(3);O.Nb(2),O.ed("Page ",i.selectedPage.page," of ",i.totalNumOfPages,"")}}function U(t,e){if(1&t&&O.Zc(0,Z,3,2,"div",39),2&t){var i=O.uc(2);O.Bc("ngIf",i.selectedPage)}}function H(t,e){if(1&t){var i=O.kc();O.jc(0,"div",36),O.jc(1,"p-dropdown",37),O.qc("ngModelChange",function(t){return O.Rc(i),O.uc().selectedPage=t})("onChange",function(t){return O.Rc(i),O.uc().onPageNumChange(t)}),O.Zc(2,U,1,1,"ng-template",38),O.ic(),O.ic()}if(2&t){var n=O.uc();O.Nb(1),O.Bc("options",n.numOfPages)("filter",!0)("ngModel",n.selectedPage)}}function J(t,e){if(1&t){var i=O.kc();O.hc(0),O.jc(1,"div",54),O.jc(2,"table"),O.jc(3,"tr",55),O.jc(4,"td"),O.jc(5,"p-checkbox",56),O.qc("ngModelChange",function(t){return e.$implicit.pdfCols=t})("onChange",function(){return O.Rc(i),O.uc(2).pdfColsValue()}),O.ic(),O.ic(),O.jc(6,"td"),O.jc(7,"label"),O.bd(8),O.ic(),O.ic(),O.ic(),O.ic(),O.ic(),O.gc()}if(2&t){var n=e.$implicit,o=O.uc(2);O.Nb(5),O.Bc("ngModel",n.pdfCols)("disabled",o.pdfCheckboxDisabled&&!n.pdfCols),O.Nb(3),O.cd(n.displayValue)}}function $(t,e){1&t&&(O.jc(0,"div",57),O.bd(1,"You can select up to 9 columns."),O.ic())}function Y(t,e){if(1&t){var i=O.kc();O.jc(0,"div",41),O.jc(1,"span",42),O.bd(2,"Please select columns that need to be downloaded in PDF"),O.ic(),O.ic(),O.jc(3,"div",43),O.jc(4,"div",44),O.Zc(5,J,9,3,"ng-container",23),O.ic(),O.ic(),O.jc(6,"div",45),O.jc(7,"div",46),O.jc(8,"div",47),O.Zc(9,$,2,0,"div",48),O.ic(),O.jc(10,"div",49),O.jc(11,"button",50),O.qc("click",function(){O.Rc(i);var t=O.uc();return t.exportPdf(),t.modalRef.hide()}),O.ic(),O.ic(),O.jc(12,"div",51),O.jc(13,"div"),O.jc(14,"label",52),O.qc("click",function(){return O.Rc(i),O.uc().closeExportPdf()}),O.bd(15,"Close"),O.ic(),O.jc(16,"img",53),O.qc("click",function(){return O.Rc(i),O.uc().closeExportPdf()}),O.ic(),O.ic(),O.ic(),O.ic(),O.ic()}if(2&t){var n=O.uc();O.Nb(5),O.Bc("ngForOf",n.customizeCols),O.Nb(4),O.Bc("ngIf",n.pdfCheckboxDisabled),O.Nb(2),O.Bc("disabled",n.disableDownloadBtn)}}var G=function(){return{width:"100%"}};h.a.vfs=b.a.pdfMake.vfs;var X,K,Q=((X=function(){function e(t,n,o,a,r,s,c){i(this,e),this.userSettingsService=t,this.spinner=n,this.filterService=o,this.datePipe=a,this.modalService=r,this.router=s,this.accesslog=c,this.projectNames=[],this.userLists=[],this.mainUsersList=[],this.pageWiseUsers=[],this.display=!1,this.deleteModal=!1,this.deleteRoleObj={},this.first=0,this.numOfPages=[{page:0,pageIndex:0}],this.selectedPage={page:0,pageIndex:0},this.pageSize=9,this.totalNumOfPages=0,this.checkboxDisabled=!1,this.maxCount=4,this.displayFiltersFor={user_name:!1,databuck_feature:!1,activity_log_time:!1,access_url:!1},this.pdfData=[],this.pdfCheckCount=0,this.pdfCheckboxDisabled=!1,this.disableDownloadBtn=!0,this.customizeCols=[{displayValue:"User",originalValue:"user_name",isSelected:!0,necessaryCol:!0,alwaysSelected:!0},{displayValue:"Activity",originalValue:"databuck_feature",isSelected:!0,necessaryCol:!0,alwaysSelected:!0},{displayValue:"Date Time",originalValue:"activity_log_time",isSelected:!0,necessaryCol:!0,alwaysSelected:!0},{displayValue:"Application URL",originalValue:"access_url",isSelected:!0,necessaryCol:!0,alwaysSelected:!0}],this.selectedProjId=JSON.parse(sessionStorage.getItem("activeProjectId")),this.columnFilter={},this.scrollHt="500px",this.filterData={},this.selectedRowData={},this.norecordfound=!1}return o(e,[{key:"ngOnInit",value:function(){var t;this.fromDate=new Date(sessionStorage.getItem("fromDate")),this.toDate=new Date(sessionStorage.getItem("toDate")),this.getRoleList(),sessionStorage.getItem("modulePerRole")&&(this.roleModule=JSON.parse(sessionStorage.getItem("modulePerRole"))),this.roleModule.length>0&&(null===(t=this.roleModule)||void 0===t||t.map(function(t){t.accessControl=t.accessControl.split("-")}))}},{key:"roleOnModule",value:function(t){return this.roleModule.find(function(e){return e.moduleName===t})}},{key:"capture",value:function(){var t=this;this.pageWiseUsers.length&&(this.spinner.show(),this.scrollHt="1500px",setTimeout(function(){C()(document.querySelector("#view_user_list"),{height:1200}).then(function(e){try{e.toBlob(function(e){var i=new FileReader;i.readAsDataURL(e),i.onloadend=function(){h.a.createPdf({footer:{columns:[{text:"Created by FirstEigen",alignment:"right",style:"footerSection"}]},content:[{text:"Access Logs",alignment:"center",margin:[0,5,0,5]},{image:i.result,width:500,alignment:"left"}],styles:{sectionHeader:{bold:!0,decoration:"underline",fontSize:14,margin:[0,5,0,5]},textStyle:{bold:!1,fontSize:9,margin:[0,5,0,5]},footerSection:{fontSize:7,margin:[5,7,7,5]}}}).download("AccessLogs.pdf"),t.scrollHt="500px",t.spinner.hide()}})}catch(i){t.spinner.hide()}})},2e3))}},{key:"openExportPdf",value:function(t){this.modalRef=this.modalService.show(t,{class:"gray modal-lg",backdrop:"static",keyboard:!1})}},{key:"closeExportPdf",value:function(){var t=this;this.modalRef.hide(),setTimeout(function(){t.pdfCheckCount=0,t.pdfCheckboxDisabled=!1,t.disableDownloadBtn=!0,t.customizeCols.forEach(function(t){return t.pdfCols=!1})},1e3)}},{key:"exportPdf",value:function(){var t=this;this.pdfData.length&&(this.spinner.show(),setTimeout(function(){var e=new y.default("l","pt"),i=t.customizeCols.filter(function(t){return t.pdfCols}),n=[];i.forEach(function(t){return n.push(t.displayValue)});var o,a=[];i.forEach(function(t){return a.push(t.originalValue)}),o=t.pdfData.map(function(t){return Object.assign(a.map(function(e){return t[e]}))});var r=e.internal.pageSize,s=r.height?r.height:r.getHeight();x()(e,{columns:n,body:o,didDrawPage:function(t){1==t.pageNumber&&(e.text("Access Logs",e.internal.pageSize.width/2,25,null,"center"),e.setFontSize(10)),e.setFontSize(9),e.text("Created by FirstEigen",e.internal.pageSize.width-40,s-30,null,"right")},startY:80,styles:{fontSize:8,cellWidth:"auto",lineColor:[0,0,0],lineWidth:.2,minCellWidth:80,cellPadding:{top:2,right:4,bottom:2,left:4}},columnStyles:{}}),e.save("Access Logs.pdf"),t.disableDownloadBtn=!0,t.pdfCheckboxDisabled=!1,i.forEach(function(t){return t.pdfCols=!1}),t.spinner.hide()},2e3))}},{key:"pdfColsValue",value:function(){var t=this;this.pdfCheckCount=0,this.customizeCols.filter(function(t){return!0===t.pdfCols}).forEach(function(e){!0===e.pdfCols&&t.pdfCheckCount++}),this.disableDownloadBtn=0==this.pdfCheckCount,this.pdfCheckboxDisabled=9==this.pdfCheckCount}},{key:"downloadCSV",value:function(){var t=this,e=new Date(this.fromDate),i=new Date(this.toDate);this.datePipe.transform(e,"yyyy-MM-dd"),this.datePipe.transform(i,"yyyy-MM-dd"),this.userSettingsService.downloadUserCSV("accessLogCSV").subscribe(function(e){var i=t.datePipe.transform(new Date,"yyyy-MM-dd");Object(p.saveAs)(e,"Access_Logs_"+i+".csv")})}},{key:"onFilterClick",value:function(t){var e=this;Object.keys(this.displayFiltersFor).map(function(i){e.displayFiltersFor[i]=i===t})}},{key:"checkValue",value:function(){var t=this;this.checkCount=0,this.customizeCols.filter(function(t){return!1===t.necessaryCol}).forEach(function(e){!0===e.isSelected&&t.checkCount++}),this.checkboxDisabled=this.checkCount>=this.maxCount}},{key:"showMoreCols",value:function(){return this.customizeCols.filter(function(t){return!t.necessaryCol&&t.isSelected}).length<this.customizeCols.length}},{key:"openOtherField",value:function(t,e){this.selectedRowData={},this.selectedRowData=e,this.modalRef=this.modalService.show(t,{class:"gray modal-lg",backdrop:"static",keyboard:!1})}},{key:"clearLogs",value:function(){var t=this;this.accesslog.clearLog("clearAccesslog").subscribe(function(e){"success"===e.status&&t.getRoleList()})}},{key:"getRoleList",value:function(){var e=this;this.spinner.show(),this.accesslog.accessLog("accessLog").subscribe(function(i){if("success"===i.status){e.spinner.hide(),e.spinner.hide()&&(e.norecordfound=!0),i.result=i.result.filter(function(t){return null!==t.access_url}),e.mainUsersList=t(i.result),e.userLists=t(e.mainUsersList),e.pdfData=t(e.mainUsersList);var n=e.first+e.pageSize,o=e.userLists.filter(function(t,e){return e<=n});e.pageWiseUsers=t(o),e.calculateNumOfPages(),e.checkCount=0,e.customizeCols.filter(function(t){return!1===t.necessaryCol}).forEach(function(t){!0===t.isSelected&&e.checkCount++}),e.checkboxDisabled=e.checkCount>=e.maxCount}else e.mainUsersList=[],e.userLists=[],e.pageWiseUsers=[]})}},{key:"calculateNumOfPages",value:function(){if(this.totalNumOfPages=this.mainUsersList.length?this.mainUsersList.length<this.pageSize?1:Math.ceil(this.mainUsersList.length/(this.pageSize+1)):0,this.numOfPages=[],this.selectedPage={},0===this.totalNumOfPages)this.numOfPages.push({pageIndex:0,page:0}),this.selectedPage={pageIndex:0,page:0};else if(1===this.totalNumOfPages)this.numOfPages.push({pageIndex:0,page:1}),this.selectedPage={pageIndex:0,page:1};else{this.selectedPage={pageIndex:0,page:1};for(var t=0;t<this.totalNumOfPages;t++)this.numOfPages.push({pageIndex:t,page:t+1})}}},{key:"onPageChange",value:function(e){var i=this;this.first=e.first;var n=this.getSortedData(),o=this.first+this.pageSize,a=n.filter(function(t,e){if(e<=o&&e>=i.first)return t});this.selectedPage={pageIndex:e.page,page:e.page+1},this.pageWiseUsers=t(a)}},{key:"onPageNumChange",value:function(e){var i=this;this.selectedPage={page:e.value.page,pageIndex:e.value.pageIndex},this.first=1===e.value.page?0:10*(e.value.page-1);var n=this.getSortedData(),o=this.first+this.pageSize,a=n.filter(function(t,e){if(e<=o&&e>=i.first)return t});this.pageWiseUsers=t(a)}},{key:"getSortedData",value:function(){var e=this,i=t(this.userLists);return this.sortOrderEvent?1===this.sortOrderEvent.order?(i.sort(function(t,i){return t[e.sortOrderEvent.field]>i[e.sortOrderEvent.field]?1:i[e.sortOrderEvent.field]>t[e.sortOrderEvent.field]?-1:0}),i):(i.sort(function(t,i){return t[e.sortOrderEvent.field]>i[e.sortOrderEvent.field]?-1:i[e.sortOrderEvent.field]>t[e.sortOrderEvent.field]?1:0}),i):i}},{key:"deleteRole",value:function(t){this.deleteModal=!0,this.deleteRoleObj=t}},{key:"deleteConfirm",value:function(){var t=this;this.deleteModal=!1,this.userSettingsService.deleteRole({idRole:this.deleteRoleObj.idRole}).subscribe(function(e){"success"===e.status&&(t.getRoleList(),t.deleteRoleObj={})})}},{key:"customSort",value:function(e){var i=this,n=parseInt((this.first/(this.pageSize+1)).toString(),10);this.selectedPage.page=n+1,this.selectedPage.pageIndex=n,this.sortOrderEvent=e;var o=t(this.userLists);o.sort(1===this.sortOrderEvent.order?function(t,i){return t[e.field]>i[e.field]?1:i[e.field]>t[e.field]?-1:0}:function(t,i){return t[e.field]>i[e.field]?-1:i[e.field]>t[e.field]?1:0});var a=this.first+this.pageSize,r=o.filter(function(t,e){if(e<=a&&e>=i.first)return t});this.pageWiseUsers=t(r)}},{key:"getFilterData",value:function(e){var i=this;this.columnFilter[e[0]]=e[1],this.filterData=JSON.parse(JSON.stringify(this.columnFilter));var n=Object.keys(this.columnFilter);this.displayFiltersFor[e[0]]=!1,this.first=0,this.userLists=t(this.mainUsersList),n.forEach(function(t){i.userLists=i.userLists.filter(function(e){return i.filterService.filters.contains(e[t],i.columnFilter[t])})}),this.setPageNumber()}},{key:"resetFilter",value:function(e){var i=this;this.columnFilter[e]=null,delete this.columnFilter[e],this.filterData=JSON.parse(JSON.stringify(this.columnFilter));var n=Object.keys(this.columnFilter);this.displayFiltersFor[e]=!1,this.first=0,this.userLists=t(this.mainUsersList),n.forEach(function(t){i.userLists=i.userLists.filter(function(e){return i.filterService.filters.contains(e[t],i.columnFilter[t])})}),this.setPageNumber()}},{key:"setPageNumber",value:function(){if(this.totalNumOfPages=this.userLists.length?this.userLists.length<this.pageSize?1:Math.ceil(this.userLists.length/(this.pageSize+1)):0,this.numOfPages=[],this.selectedPage={},0===this.totalNumOfPages)this.numOfPages.push({pageIndex:0,page:0}),this.selectedPage={pageIndex:0,page:0};else if(1===this.totalNumOfPages)this.numOfPages.push({pageIndex:0,page:1}),this.selectedPage={pageIndex:0,page:1};else{this.selectedPage={pageIndex:0,page:1};for(var e=0;e<this.totalNumOfPages;e++)this.numOfPages.push({pageIndex:e,page:e+1})}var i=this.first+this.pageSize,n=this.userLists.filter(function(t,e){return e<=i});this.pageWiseUsers=t(n)}},{key:"getFilterState",value:function(t){if(this.filterData!=={}&&null!=this.filterData&&""!==this.filterData){if(this.filterData[t]){var e=this.filterData[t];return delete this.filterData[t],{fieldName:t,filterWith:e}}return{fieldName:"",filterWith:""}}return{fieldName:"",filterWith:""}}},{key:"filterColumnNameWithHighlightName",value:function(t){return!(Object.keys(this.columnFilter).findIndex(function(e){return e===t})<0)}}]),e}()).\u0275fac=function(t){return new(t||X)(O.dc(w.a),O.dc(L.c),O.dc(_.d),O.dc(r.d),O.dc(M.a),O.dc(u.i),O.dc(k.a))},X.\u0275cmp=O.Xb({type:X,selectors:[["app-access-logs"]],decls:25,vars:24,consts:[[1,"content-wrapper","top"],[1,"container-fluid","create-conn-main"],[1,"row"],[1,"col-sm-6","col-md-6"],[1,"form-title"],["pButton","","type","button","label","Clear Logs",1,"button","w-button","shadow","btn-mr-rt",3,"ngClass","click"],["src","assets/images/csv_icon.png","title","Download CSV","loading","lazy","alt","Download CSV",1,"download_btn_css","image-7",3,"click"],["src","assets/images/pdf_icon.jpg","title","Download PDF","loading","lazy","alt","Download PDF",1,"download_btn_css","image-7",3,"click"],[1,"row","p-field"],["id","view_user_list",1,"col-sm-12","mr-top-20","pd-0"],["view_user_list",""],["styleClass","p-datatable-gridlines p-datatable-striped","responsiveLayout","scroll","sortMode","single",3,"value","responsive","rowHover","sortField","sortOrder","pageLinks","filterDelay","resetPageOnSort","rows","first","customSort","firstChange","sortFunction"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["class","col-sm-12 no-records default-font-14-weight",4,"ngIf"],[1,"col-sm-12","pagination-div"],["class","pad-0",4,"ngIf"],["class","pad-0 pad-tp-10 text-right",4,"ngIf"],["exportPdfTemplate",""],[1,"table-header"],[1,"float-right"],[1,"header"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"field","pSortableColumn"],[3,"colFilterData","display","customId","fieldName","filterData","resetFilterValues"],[1,"columnFilter",3,"ngClass"],[1,"pi-filter-color",3,"ngClass","click"],[1,"row-ht"],["class","text-center word_break_word_all td-ellipsis",3,"title",4,"ngIf"],[1,"text-center","word_break_word_all","td-ellipsis",3,"title"],[1,"col-sm-12","no-records","default-font-14-weight"],[1,"pad-0"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"rows","totalRecords","showCurrentPageReport","first","onPageChange","firstChange"],["dq_paginator",""],[1,"pad-0","pad-tp-10","text-right"],["optionLabel","page","placeholder","Go to page",3,"options","filter","ngModel","ngModelChange","onChange"],["pTemplate","selectedItem"],["class","drpdwn-item",4,"ngIf"],[1,"drpdwn-item"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","pdf-modal"],[1,"row","padding-btm"],[1,"modal-footer"],[1,"row","full-width"],[1,"col-lg-4"],["class","color-code",4,"ngIf"],[1,"col-lg-4","text-center"],["pButton","","type","button","label","Download",1,"button","w-button","shadow","btn-mr-rt","submit-btn",3,"disabled","click"],[1,"col-lg-4","arrow-text-right"],[1,"cursor-pointer",3,"click"],["src","assets/images/close.png",1,"margin-img","cursor-pointer",3,"click"],[1,"col-sm-4"],[1,"validations"],["binary","true","name","groupname1","value","customizeCols[cols.displayValue]",3,"ngModel","disabled","ngModelChange","onChange"],[1,"color-code"]],template:function(t,e){if(1&t){var i=O.kc();O.jc(0,"div",0),O.ec(1,"app-main-header"),O.jc(2,"div",1),O.jc(3,"div",2),O.jc(4,"div",3),O.jc(5,"p",4),O.jc(6,"button",5),O.qc("click",function(){return e.clearLogs()}),O.ic(),O.ic(),O.ic(),O.jc(7,"div",3),O.jc(8,"a"),O.jc(9,"img",6),O.qc("click",function(){return e.downloadCSV()}),O.ic(),O.ic(),O.jc(10,"a"),O.jc(11,"img",7),O.qc("click",function(){O.Rc(i);var t=O.Oc(24);return e.openExportPdf(t)}),O.ic(),O.ic(),O.ic(),O.ic(),O.jc(12,"div",8),O.jc(13,"div",9,10),O.jc(15,"p-table",11),O.qc("firstChange",function(t){return e.first=t})("sortFunction",function(t){return e.customSort(t)}),O.Zc(16,z,2,0,"ng-template",12),O.Zc(17,B,2,1,"ng-template",13),O.Zc(18,W,2,1,"ng-template",14),O.ic(),O.ic(),O.Zc(19,q,2,0,"div",15),O.jc(20,"div",16),O.Zc(21,T,3,4,"div",17),O.Zc(22,H,3,3,"div",18),O.ic(),O.ic(),O.ic(),O.Zc(23,Y,17,3,"ng-template",null,19,O.ad),O.ic()}if(2&t){var n=null;O.Nb(6),O.Bc("ngClass",null!=(n=e.roleOnModule("User Settings"))&&null!=n.accessControl&&n.accessControl.includes("D")?" cursor-pointer":"disable"),O.Nb(2),O.Rb("w-inline-block cursor-pointer float-right ",null!=e.pageWiseUsers&&e.pageWiseUsers.length?"":"disabled-opa",""),O.Nb(2),O.Rb("w-inline-block cursor-pointer float-right ",null!=e.pageWiseUsers&&e.pageWiseUsers.length?"":"disabled-opa",""),O.Nb(5),O.Vc(O.Ec(23,G)),O.Bc("value",e.pageWiseUsers)("responsive",!0)("rowHover",!0)("sortField","user_name")("sortOrder",-1)("pageLinks",5)("filterDelay",0)("resetPageOnSort",!0)("rows",10)("first",e.first)("customSort",!0),O.Nb(4),O.Bc("ngIf",!e.pageWiseUsers.length&&e.norecordfound),O.Nb(2),O.Bc("ngIf",e.pageWiseUsers.length),O.Nb(1),O.Bc("ngIf",e.pageWiseUsers.length)}},directives:[D.a,S.b,r.l,N.f,_.i,r.n,r.m,N.d,N.e,j.a,c.a,F.a,s.o,s.r,I.a],styles:["[_nghost-%COMP%]     .p-confirm-dialog-accept{border-radius:20px!important}.accept-btn-css[_ngcontent-%COMP%]{border-radius:20px!important}[_nghost-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{padding-right:10px!important}.no-records[_ngcontent-%COMP%]{padding:5px 15px;text-align:center;border-left:1px solid #e9ecef;border-right:1px solid #e9ecef;border-bottom:1px solid #e9ecef}.disabled-opa[_ngcontent-%COMP%]{opacity:.4;pointer-events:none!important}.err-msg[_ngcontent-%COMP%]{color:#e72b56}.red-btn[_ngcontent-%COMP%]{background:#e72b56!important}.more-display[_ngcontent-%COMP%]:hover{cursor:pointer}.field-dis-val[_ngcontent-%COMP%]{min-width:170px;font-weight:500;padding:3px}.padding-btm3[_ngcontent-%COMP%]{padding-bottom:12px}.padding-btm1[_ngcontent-%COMP%]{padding-bottom:20px}.pi-exclamation-circle[_ngcontent-%COMP%]{font-size:21px}.modal-title[_ngcontent-%COMP%]{font-weight:600;font-size:16px}.modal-title-delete[_ngcontent-%COMP%]{font-weight:600;font-size:21px}[_nghost-%COMP%]     .p-inputtext:enabled:focus{box-shadow:none!important}.pad-0[_ngcontent-%COMP%]{padding:0}.copy-ip[_ngcontent-%COMP%]{margin-top:10px;font-size:14px;box-shadow:none!important}.pad-tp-10[_ngcontent-%COMP%]{padding-top:10px!important}.pagination-div[_ngcontent-%COMP%]{display:flex;justify-content:end;padding:0 10px}.header-width[_ngcontent-%COMP%]{width:90px}.conn-name-td[_ngcontent-%COMP%]{width:180px}.conn-name[_ngcontent-%COMP%]{padding:5px 10px;width:93%!important}.alation-div[_ngcontent-%COMP%], .conn-name[_ngcontent-%COMP%]{border-radius:20px;color:#fff;font-weight:600;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;display:inline-block}.alation-icon-green[_ngcontent-%COMP%]{color:green}.alation-icon-white[_ngcontent-%COMP%]{color:#fff;visibility:hidden}.conn-failed[_ngcontent-%COMP%]{background-color:#e72b56;opacity:.7}.conn-pass[_ngcontent-%COMP%]{background-color:#56b608}.fa-files-o[_ngcontent-%COMP%], .fa-pencil[_ngcontent-%COMP%]{color:#337ab7}.fa-trash[_ngcontent-%COMP%]{color:#e72b56}.fa-deactivate[_ngcontent-%COMP%]{color:#c32121}.fa-activate[_ngcontent-%COMP%]{color:#181894}.row-ht[_ngcontent-%COMP%]{height:30px}.pd-top-30[_ngcontent-%COMP%]{padding-top:30px}.mr-top-20[_ngcontent-%COMP%]{margin-top:20px}.td-ellipsis[_ngcontent-%COMP%]{word-break:break-all;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.pd-0[_ngcontent-%COMP%]{padding:0}.width-225[_ngcontent-%COMP%]{width:225px}.columnFilterClass[_ngcontent-%COMP%]{z-index:1008;transform-origin:right;top:64.4236px;position:absolute;flex-direction:column;background:#fff;color:#495057;border:0;border-radius:3px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12);min-width:12.5rem}.add-icon[_ngcontent-%COMP%]{height:40px;width:40px}.filterDisplay[_ngcontent-%COMP%]{display:inline-block;z-index:9}.margin-l[_ngcontent-%COMP%]{margin-left:5px;width:30px}.width-100[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .p-datatable .p-datatable-header{padding:.2rem;height:40px;font-size:14px;border-top-right-radius:10px!important;border-top-left-radius:10px!important}.button[_ngcontent-%COMP%]{font-weight:500;background:linear-gradient(180deg,#ff7526,#fb9a64)!important;font-size:13px}.btn-label[_ngcontent-%COMP%], [_nghost-%COMP%]     .submit-btn .p-button-label{width:156px;font-size:14px!important;font-weight:600!important;font-style:normal;font-family:Open Sans;height:40px;color:#fff}[_nghost-%COMP%]     .p-calendar .p-inputtext{box-shadow:none!important}.create-conn-main[_ngcontent-%COMP%]{margin-top:27px;background-color:#fff;border-radius:20px;padding:15px;box-shadow:0 2px 8px 0 rgba(99,99,99,.2)}.form-title[_ngcontent-%COMP%]{font-family:Open_Sans_Semi_Bold;font-size:17px;margin-top:-10px;margin-bottom:5px;padding:10px 0 10px 10px}.br-top[_ngcontent-%COMP%]{border-top:1px solid #eef1f5;padding-top:10px}.form-label[_ngcontent-%COMP%]{font-size:15px;font-weight:600;font-family:Open_Sans_Semi_Bold}.p-field[_ngcontent-%COMP%]{margin:0 10px}.form-field[_ngcontent-%COMP%]{width:100%!important;border-radius:10px!important}[_nghost-%COMP%]     .p-dropdown{width:100%!important;border-radius:10px!important;height:35px!important}[_nghost-%COMP%]     .p-calendar{width:100%!important;border-radius:10px!important;height:35px!important;margin:0!important;box-shadow:none!important}"]}),X),tt=a("bUwk"),et=((K=function(){function t(e){i(this,t),this.http=e}return o(t,[{key:"auditLog",value:function(t,e){return this.http.postWithoutToasty(e,t)}},{key:"clearLogs",value:function(t,e){return this.http.post(e,t)}},{key:"downloadCsvAuditLogs",value:function(t,e){return this.http.postforCSV(e,t)}}]),t}()).\u0275fac=function(t){return new(t||K)(O.nc(tt.a))},K.\u0275prov=O.Zb({token:K,factory:K.\u0275fac,providedIn:"root"}),K),it=a("eO1q"),nt=a("7kUa");function ot(t,e){if(1&t){var i=O.kc();O.jc(0,"div",23),O.jc(1,"span",24),O.jc(2,"input",25),O.qc("ngModelChange",function(t){return O.Rc(i),O.uc().globalFilterValue=t})("keyup",function(t){return O.Rc(i),O.uc().globalFilterFun(t)}),O.ic(),O.bd(3,"\xa0 "),O.ec(4,"i",26),O.ic(),O.ic()}if(2&t){var n=O.uc();O.Nb(2),O.Bc("ngModel",n.globalFilterValue)}}function at(t,e){if(1&t){var i=O.kc();O.jc(0,"th"),O.bd(1),O.ec(2,"br"),O.ec(3,"p-sortIcon",30),O.jc(4,"app-column-filter",31),O.qc("filterData",function(t){return O.Rc(i),O.uc(3).getFilterData(t)})("resetFilterValues",function(t){return O.Rc(i),O.uc(3).resetFilter(t)}),O.ic(),O.jc(5,"span",32),O.jc(6,"i",33),O.qc("click",function(){O.Rc(i);var t=O.uc().$implicit;return O.uc(2).onFilterClick(t.originalValue)}),O.ic(),O.ic(),O.ic()}if(2&t){var n=O.uc().$implicit,o=O.uc(2);O.Nb(1),O.dd(" ",n.displayValue,""),O.Nb(2),O.Cc("field",n.originalValue),O.Cc("pSortableColumn",n.originalValue),O.Nb(1),O.Bc("colFilterData",o.getFilterState(n.originalValue))("display",o.displayFiltersFor[n.originalValue])("customId",n.originalValue+"_latest")("fieldName",n.originalValue),O.Nb(1),O.Bc("ngClass",o.filterColumnNameWithHighlightName(n.originalValue)?"selected-filter-column":""),O.Nb(1),O.Bc("ngClass",o.filterColumnNameWithHighlightName(n.originalValue)?"pi pi-filter-fill":"pi pi-filter")}}function rt(t,e){if(1&t&&(O.hc(0),O.Zc(1,at,7,9,"th",29),O.gc()),2&t){var i=e.$implicit;O.Nb(1),O.Bc("ngIf",i.isSelected)}}function st(t,e){if(1&t&&(O.jc(0,"tr",27),O.Zc(1,rt,2,1,"ng-container",28),O.ic()),2&t){var i=O.uc();O.Nb(1),O.Bc("ngForOf",i.customizeCols)}}function ct(t,e){if(1&t&&(O.jc(0,"td",36),O.jc(1,"span"),O.bd(2),O.ic(),O.ic()),2&t){var i=O.uc().$implicit,n=O.uc().$implicit;O.Bc("title",n[i.originalValue]),O.Nb(2),O.cd(n[i.originalValue])}}function lt(t,e){if(1&t&&(O.hc(0),O.Zc(1,ct,3,2,"td",35),O.gc()),2&t){var i=e.$implicit;O.Nb(1),O.Bc("ngIf",i.isSelected)}}function dt(t,e){if(1&t&&(O.jc(0,"tr",34),O.Zc(1,lt,2,1,"ng-container",28),O.ic()),2&t){var i=O.uc();O.Nb(1),O.Bc("ngForOf",i.customizeCols)}}function gt(t,e){1&t&&(O.jc(0,"div",37),O.bd(1," No records found "),O.ic())}function ut(t,e){if(1&t){var i=O.kc();O.jc(0,"div",38),O.jc(1,"p-paginator",39,40),O.qc("onPageChange",function(t){return O.Rc(i),O.uc().onPageChange(t)})("firstChange",function(t){return O.Rc(i),O.uc().first=t}),O.ic(),O.ic()}if(2&t){var n=O.uc();O.Nb(1),O.Bc("rows",10)("totalRecords",n.auditLogList.length)("showCurrentPageReport",!0)("first",n.first)}}function pt(t,e){if(1&t&&(O.jc(0,"div",45),O.jc(1,"div"),O.bd(2),O.ic(),O.ic()),2&t){var i=O.uc(3);O.Nb(2),O.ed("Page ",i.selectedPage.page," of ",i.totalNumOfPages,"")}}function ft(t,e){if(1&t&&O.Zc(0,pt,3,2,"div",44),2&t){var i=O.uc(2);O.Bc("ngIf",i.selectedPage)}}function ht(t,e){if(1&t){var i=O.kc();O.jc(0,"div",41),O.jc(1,"p-dropdown",42),O.qc("ngModelChange",function(t){return O.Rc(i),O.uc().selectedPage=t})("onChange",function(t){return O.Rc(i),O.uc().onPageNumChange(t)}),O.Zc(2,ft,1,1,"ng-template",43),O.ic(),O.ic()}if(2&t){var n=O.uc();O.Nb(1),O.Bc("options",n.numOfPages)("filter",!0)("ngModel",n.selectedPage)}}function mt(t,e){if(1&t){var i=O.kc();O.hc(0),O.jc(1,"div",59),O.jc(2,"table"),O.jc(3,"tr",60),O.jc(4,"td"),O.jc(5,"p-checkbox",61),O.qc("ngModelChange",function(t){return e.$implicit.pdfCols=t})("onChange",function(){return O.Rc(i),O.uc(2).pdfColsValue()}),O.ic(),O.ic(),O.jc(6,"td"),O.jc(7,"label"),O.bd(8),O.ic(),O.ic(),O.ic(),O.ic(),O.ic(),O.gc()}if(2&t){var n=e.$implicit,o=O.uc(2);O.Nb(5),O.Bc("ngModel",n.pdfCols)("disabled",o.pdfCheckboxDisabled&&!n.pdfCols),O.Nb(3),O.cd(n.displayValue)}}function bt(t,e){1&t&&(O.jc(0,"div",62),O.bd(1,"You can select up to 9 columns."),O.ic())}function vt(t,e){if(1&t){var i=O.kc();O.jc(0,"div",46),O.jc(1,"span",47),O.bd(2,"Please select columns that need to be downloaded in PDF"),O.ic(),O.ic(),O.jc(3,"div",48),O.jc(4,"div",49),O.Zc(5,mt,9,3,"ng-container",28),O.ic(),O.ic(),O.jc(6,"div",50),O.jc(7,"div",51),O.jc(8,"div",52),O.Zc(9,bt,2,0,"div",53),O.ic(),O.jc(10,"div",54),O.jc(11,"button",55),O.qc("click",function(){O.Rc(i);var t=O.uc();return t.exportPdf(),t.modalRef.hide()}),O.ic(),O.ic(),O.jc(12,"div",56),O.jc(13,"div"),O.jc(14,"label",57),O.qc("click",function(){return O.Rc(i),O.uc().closeExportPdf()}),O.bd(15,"Close"),O.ic(),O.jc(16,"img",58),O.qc("click",function(){return O.Rc(i),O.uc().closeExportPdf()}),O.ic(),O.ic(),O.ic(),O.ic(),O.ic()}if(2&t){var n=O.uc();O.Nb(5),O.Bc("ngForOf",n.customizeCols),O.Nb(4),O.Bc("ngIf",n.pdfCheckboxDisabled),O.Nb(2),O.Bc("disabled",n.disableDownloadBtn)}}var Ct,Pt=function(){return{width:"100%"}},xt=((Ct=function(){function e(t,n,o,a,r,s){i(this,e),this.spinner=t,this.filterService=n,this.modalService=o,this.auditLogsService=a,this.datePipe=r,this.cdr=s,this.numOfPages=[{page:0,pageIndex:0}],this.selectedPage={page:0,pageIndex:0},this.auditLogList=[],this.mainLatestLogList=[],this.pageWiseLatestLogs=[],this.first=0,this.pageSize=9,this.totalNumOfPages=0,this.checkboxDisabled=!1,this.maxCount=4,this.pdfData=[],this.pdfCheckCount=0,this.pdfCheckboxDisabled=!1,this.disableDownloadBtn=!0,this.columnFilter={},this.scrollHt="500px",this.filterData={},this.selectedRowData={},this.isNoRecordFound=!1,this.displayFiltersFor={activityName:!1,entityId:!1,entityName:!1,databuckFeature:!1,activityLogTime:!1,userName:!1,sessionId:!1},this.customizeCols=[{displayValue:"Activity Name",originalValue:"databuckFeature",isSelected:!0,necessaryCol:!0,alwaysSelected:!0},{displayValue:"Session Id",originalValue:"sessionId",isSelected:!0,necessaryCol:!0,alwaysSelected:!0},{displayValue:"Activity Log Time",originalValue:"activityLogTime",isSelected:!0,necessaryCol:!0,alwaysSelected:!0},{displayValue:"User Name",originalValue:"userName",isSelected:!0,necessaryCol:!0,alwaysSelected:!0}]}return o(e,[{key:"ngOnInit",value:function(){var t;this.fromDate=new Date,this.fromDate.setDate((new Date).getDate()-1),this.toDate=new Date,this.toDate.setDate((new Date).getDate()+1),this.maxDate=new Date,this.maxDate.setDate((new Date).getDate()+3),this.getAuditLogsList(),sessionStorage.getItem("modulePerRole")&&(this.roleModule=JSON.parse(sessionStorage.getItem("modulePerRole"))),this.roleModule.length>0&&(null===(t=this.roleModule)||void 0===t||t.map(function(t){t.accessControl=t.accessControl.split("-")}))}},{key:"roleOnModule",value:function(t){return this.roleModule.find(function(e){return e.moduleName===t})}},{key:"openExportPdf",value:function(t){this.modalRef=this.modalService.show(t,{class:"gray modal-lg",backdrop:"static",keyboard:!1})}},{key:"closeExportPdf",value:function(){var t=this;this.modalRef.hide(),setTimeout(function(){t.pdfCheckCount=0,t.pdfCheckboxDisabled=!1,t.disableDownloadBtn=!0,t.customizeCols.forEach(function(t){return t.pdfCols=!1})},1e3)}},{key:"exportPdf",value:function(){var t=this;this.pdfData.length&&(this.spinner.show(),setTimeout(function(){var e=new y.default("l","pt"),i=t.customizeCols.filter(function(t){return t.pdfCols}),n=[];i.forEach(function(t){return n.push(t.displayValue)});var o,a=[];i.forEach(function(t){return a.push(t.originalValue)}),o=t.pdfData.map(function(t){return Object.assign(a.map(function(e){return t[e]}))});var r=e.internal.pageSize,s=r.height?r.height:r.getHeight();x()(e,{columns:n,body:o,didDrawPage:function(t){1==t.pageNumber&&(e.text("Databuck Login Activity",e.internal.pageSize.width/2,25,null,"center"),e.setFontSize(10)),e.setFontSize(9),e.text("Created by FirstEigen",e.internal.pageSize.width-40,s-30,null,"right")},startY:80,styles:{fontSize:8,cellWidth:"auto",lineColor:[0,0,0],lineWidth:.2,minCellWidth:80,cellPadding:{top:2,right:4,bottom:2,left:4}},columnStyles:{}}),e.save("Databuck Login Activity.pdf"),t.disableDownloadBtn=!0,t.pdfCheckboxDisabled=!1,i.forEach(function(t){return t.pdfCols=!1}),t.spinner.hide()},2e3))}},{key:"pdfColsValue",value:function(){var t=this;this.pdfCheckCount=0,this.customizeCols.filter(function(t){return!0===t.pdfCols}).forEach(function(e){!0===e.pdfCols&&t.pdfCheckCount++}),this.disableDownloadBtn=0==this.pdfCheckCount,this.pdfCheckboxDisabled=9==this.pdfCheckCount}},{key:"onFilterClick",value:function(t){var e=this;Object.keys(this.displayFiltersFor).map(function(i){e.displayFiltersFor[i]=i===t})}},{key:"getAuditLogsList",value:function(){var e=this;this.spinner.show();var i=new Date(this.fromDate),n=new Date(this.toDate),o={fromDate:this.datePipe.transform(i,"yyyy-MM-dd"),toDate:this.datePipe.transform(n,"yyyy-MM-dd")};this.auditLogsService.auditLog(o,"getLatestLoginActivityDetails").subscribe(function(i){if("success"===i.status){e.spinner.hide(),e.spinner.hide()&&(e.isNoRecordFound=!0),e.mainLatestLogList=t(i.result.getLatestLoginActivityDetails),e.auditLogList=t(e.mainLatestLogList),e.pdfData=t(e.mainLatestLogList);var n=e.first+e.pageSize,o=e.auditLogList.filter(function(t,e){return e<=n});e.pageWiseLatestLogs=t(o),e.calculateNumOfPages(),e.checkCount=0,e.customizeCols.filter(function(t){return!1===t.necessaryCol}).forEach(function(t){!0===t.isSelected&&e.checkCount++}),e.checkboxDisabled=e.checkCount>=e.maxCount}else e.mainLatestLogList=[],e.auditLogList=[],e.pageWiseLatestLogs=[],e.isNoRecordFound=!0})}},{key:"calculateNumOfPages",value:function(){if(this.totalNumOfPages=this.mainLatestLogList.length?this.mainLatestLogList.length<this.pageSize?1:Math.ceil(this.mainLatestLogList.length/(this.pageSize+1)):0,this.numOfPages=[],this.selectedPage={},0===this.totalNumOfPages)this.numOfPages.push({pageIndex:0,page:0}),this.selectedPage={pageIndex:0,page:0};else if(1===this.totalNumOfPages)this.numOfPages.push({pageIndex:0,page:1}),this.selectedPage={pageIndex:0,page:1};else{this.selectedPage={pageIndex:0,page:1};for(var t=0;t<this.totalNumOfPages;t++)this.numOfPages.push({pageIndex:t,page:t+1})}}},{key:"onPageChange",value:function(e){var i=this;this.first=e.first;var n=this.getSortedData(),o=this.first+this.pageSize,a=n.filter(function(t,e){if(e<=o&&e>=i.first)return t});this.selectedPage={pageIndex:e.page,page:e.page+1},this.pageWiseLatestLogs=t(a)}},{key:"onPageNumChange",value:function(e){var i=this;this.selectedPage={page:e.value.page,pageIndex:e.value.pageIndex},this.first=1===e.value.page?0:10*(e.value.page-1);var n=this.getSortedData(),o=this.first+this.pageSize,a=n.filter(function(t,e){if(e<=o&&e>=i.first)return t});this.pageWiseLatestLogs=t(a)}},{key:"getSortedData",value:function(){var e=this,i=t(this.auditLogList);return this.sortOrderEvent?1===this.sortOrderEvent.order?(i.sort(function(t,i){return t[e.sortOrderEvent.field]>i[e.sortOrderEvent.field]?1:i[e.sortOrderEvent.field]>t[e.sortOrderEvent.field]?-1:0}),i):(i.sort(function(t,i){return t[e.sortOrderEvent.field]>i[e.sortOrderEvent.field]?-1:i[e.sortOrderEvent.field]>t[e.sortOrderEvent.field]?1:0}),i):i}},{key:"customSort",value:function(e){var i=this,n=parseInt((this.first/(this.pageSize+1)).toString(),10);this.selectedPage.page=n+1,this.selectedPage.pageIndex=n,this.sortOrderEvent=e;var o=t(this.auditLogList);o.sort(1===this.sortOrderEvent.order?function(t,i){return t[e.field]>i[e.field]?1:i[e.field]>t[e.field]?-1:0}:function(t,i){return t[e.field]>i[e.field]?-1:i[e.field]>t[e.field]?1:0});var a=this.first+this.pageSize,r=o.filter(function(t,e){if(e<=a&&e>=i.first)return t});this.pageWiseLatestLogs=t(r)}},{key:"globalFilterFun",value:function(e){var i=t(this.globalFilterLogic()),n=this.first+this.pageSize,o=i.filter(function(t,e){return e<=n});this.cdr.detectChanges(),this.pageWiseLatestLogs=t(o),this.setPageNumber()}},{key:"globalFilterLogic",value:function(){var e=this;if(this.mainLatestLogList.length){var i=Object.keys(this.mainLatestLogList[0]);if(this.globalFilterValue){if(this.filterValue=[],this.mainLatestLogList.forEach(function(t){var n=!1;i.forEach(function(i){t[i]&&t[i].toString().toLowerCase().includes(e.globalFilterValue.toLowerCase())&&!n&&(e.filterValue.push(t),n=!0)})}),this.columnFilter!={}){this.filterData=JSON.parse(JSON.stringify(this.columnFilter));var n=Object.keys(this.columnFilter);this.first=0,n.forEach(function(t){e.filterValue=e.filterValue.filter(function(i){return e.filterService.filters.contains(i[t],e.columnFilter[t])})})}return this.auditLogList=t(this.filterValue),this.calculateNumOfPages(),this.filterValue}if(this.calculateNumOfPages(),this.filterValue=t(this.mainLatestLogList),this.columnFilter!={}){this.filterData=JSON.parse(JSON.stringify(this.columnFilter));var o=Object.keys(this.columnFilter);this.first=0,o.forEach(function(t){e.filterValue=e.filterValue.filter(function(i){return e.filterService.filters.contains(i[t],e.columnFilter[t])})})}return this.auditLogList=t(this.filterValue),this.calculateNumOfPages(),this.auditLogList}return[]}},{key:"getFilterData",value:function(e){var i=this;this.columnFilter[e[0]]=e[1],this.filterData=JSON.parse(JSON.stringify(this.columnFilter));var n=Object.keys(this.columnFilter);this.displayFiltersFor[e[0]]=!1,this.first=0,this.auditLogList=t(this.mainLatestLogList),n.forEach(function(t){i.auditLogList=i.auditLogList.filter(function(e){return i.filterService.filters.contains(e[t],i.columnFilter[t])})}),this.setPageNumber()}},{key:"resetFilter",value:function(e){var i=this;this.columnFilter[e]=null,delete this.columnFilter[e],this.filterData=JSON.parse(JSON.stringify(this.columnFilter));var n=Object.keys(this.columnFilter);this.displayFiltersFor[e]=!1,this.first=0,this.auditLogList=t(this.mainLatestLogList),n.forEach(function(t){i.auditLogList=i.auditLogList.filter(function(e){return i.filterService.filters.contains(e[t],i.columnFilter[t])})}),this.setPageNumber()}},{key:"setPageNumber",value:function(){if(this.totalNumOfPages=this.auditLogList.length?this.auditLogList.length<this.pageSize?1:Math.ceil(this.auditLogList.length/(this.pageSize+1)):0,this.numOfPages=[],this.selectedPage={},0===this.totalNumOfPages)this.numOfPages.push({pageIndex:0,page:0}),this.selectedPage={pageIndex:0,page:0};else if(1===this.totalNumOfPages)this.numOfPages.push({pageIndex:0,page:1}),this.selectedPage={pageIndex:0,page:1};else{this.selectedPage={pageIndex:0,page:1};for(var e=0;e<this.totalNumOfPages;e++)this.numOfPages.push({pageIndex:e,page:e+1})}var i=this.first+this.pageSize,n=this.auditLogList.filter(function(t,e){return e<=i});this.pageWiseLatestLogs=t(n)}},{key:"getFilterState",value:function(t){if(this.filterData&&null!=this.filterData&&""!==this.filterData){if(this.filterData[t]){var e=this.filterData[t];return delete this.filterData[t],{fieldName:t,filterWith:e}}return{fieldName:"",filterWith:""}}return{fieldName:"",filterWith:""}}},{key:"filterColumnNameWithHighlightName",value:function(t){return!(Object.keys(this.columnFilter).findIndex(function(e){return e===t})<0)}},{key:"clearLog",value:function(){var t=this,e=new Date(this.fromDate),i=new Date(this.toDate),n={fromDate:this.datePipe.transform(e,"yyyy-MM-dd"),toDate:this.datePipe.transform(i,"yyyy-MM-dd")};this.auditLogsService.clearLogs(n,"clearLogs").subscribe(function(e){"success"==e.status&&t.getAuditLogsList()})}},{key:"downloadCSV",value:function(){var t=new Date(this.fromDate),e=new Date(this.toDate),i={fromDate:this.datePipe.transform(t,"yyyy-MM-dd"),toDate:this.datePipe.transform(e,"yyyy-MM-dd")};this.auditLogsService.downloadCsvAuditLogs(i,"downloadCsvforLoginActivity").subscribe(function(t){Object(p.saveAs)(t,"Databuck_Login_Activity.csv")})}}]),e}()).\u0275fac=function(t){return new(t||Ct)(O.dc(L.c),O.dc(_.d),O.dc(M.a),O.dc(et),O.dc(r.d),O.dc(O.h))},Ct.\u0275cmp=O.Xb({type:Ct,selectors:[["app-latest-login-activity"]],decls:33,vars:38,consts:[[1,"content-wrapper","top"],[1,"container-fluid","create-conn-main"],[1,"row","padding-left-10"],[1,"col-sm-3","col-md-3"],["for","from_date",1,"form-label"],["yearRange","2000:2030","inputId","dateformat","dateFormat","yy-mm-dd","appendTo","body",3,"styleClass","maxDate","ngModel","showIcon","monthNavigator","yearNavigator","readonlyInput","ngModelChange"],["yearRange","2000:2030","inputId","dateformat","dateFormat","yy-mm-dd","appendTo","body",3,"styleClass","minDate","maxDate","ngModel","showIcon","monthNavigator","yearNavigator","readonlyInput","ngModelChange"],[1,"col-sm-3","col-md-3","padding-top-30"],["pButton","","type","button","label","Show",1,"button","w-button","logoutButton","submit-btn",3,"click"],["src","assets/images/csv_icon.png","title","Download CSV","loading","lazy","alt","Download CSV",1,"download_btn_css","image-7",3,"click"],["src","assets/images/pdf_icon.jpg","title","Download PDF","loading","lazy","alt","Download PDF",1,"download_btn_css","image-7",3,"click"],[1,"row","p-field"],["id","view_audit_log_list",1,"col-sm-12","mr-top-20","pd-0"],["view_audit_log_list",""],["styleClass","p-datatable-gridlines p-datatable-striped","responsiveLayout","scroll","sortMode","single",3,"value","responsive","rowHover","sortField","sortOrder","pageLinks","filterDelay","resetPageOnSort","rows","first","customSort","firstChange","sortFunction"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["class","col-sm-12 no-records default-font-14-weight",4,"ngIf"],[1,"col-sm-12","pagination-div"],["class","pad-0",4,"ngIf"],["class","pad-0 pad-tp-10 text-right",4,"ngIf"],["exportPdfTemplate",""],[1,"table-header"],[1,"gsearch"],["type","text","pInputText","","size","50","placeholder","Search",1,"gfilter",3,"ngModel","ngModelChange","keyup"],[1,"pi","pi-search","margin-gfilter"],[1,"header"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"field","pSortableColumn"],[3,"colFilterData","display","customId","fieldName","filterData","resetFilterValues"],[1,"columnFilter",3,"ngClass"],[1,"pi-filter-color",3,"ngClass","click"],[1,"row-ht"],["class","text-center word_break_word_all td-ellipsis",3,"title",4,"ngIf"],[1,"text-center","word_break_word_all","td-ellipsis",3,"title"],[1,"col-sm-12","no-records","default-font-14-weight"],[1,"pad-0"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"rows","totalRecords","showCurrentPageReport","first","onPageChange","firstChange"],["dq_paginator",""],[1,"pad-0","pad-tp-10","text-right"],["optionLabel","page","placeholder","Go to page",3,"options","filter","ngModel","ngModelChange","onChange"],["pTemplate","selectedItem"],["class","drpdwn-item",4,"ngIf"],[1,"drpdwn-item"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","pdf-modal"],[1,"row","padding-btm"],[1,"modal-footer"],[1,"row","full-width"],[1,"col-lg-4"],["class","color-code",4,"ngIf"],[1,"col-lg-4","text-center"],["pButton","","type","button","label","Download",1,"button","w-button","shadow","btn-mr-rt","submit-btn",3,"disabled","click"],[1,"col-lg-4","arrow-text-right"],[1,"cursor-pointer",3,"click"],["src","assets/images/close.png",1,"margin-img","cursor-pointer",3,"click"],[1,"col-sm-4"],[1,"validations"],["binary","true","name","groupname1","value","customizeCols[cols.displayValue]",3,"ngModel","disabled","ngModelChange","onChange"],[1,"color-code"]],template:function(t,e){if(1&t){var i=O.kc();O.jc(0,"div",0),O.jc(1,"div",1),O.jc(2,"div",2),O.jc(3,"div",3),O.jc(4,"label",4),O.bd(5,"From Date"),O.ic(),O.ec(6,"br"),O.jc(7,"p-calendar",5),O.qc("ngModelChange",function(t){return e.fromDate=t}),O.ic(),O.ic(),O.jc(8,"div",3),O.jc(9,"label",4),O.bd(10,"To Date"),O.ic(),O.ec(11,"br"),O.jc(12,"p-calendar",6),O.qc("ngModelChange",function(t){return e.toDate=t}),O.ic(),O.ic(),O.jc(13,"div",7),O.jc(14,"button",8),O.qc("click",function(){return e.getAuditLogsList()}),O.ic(),O.ic(),O.jc(15,"div",7),O.jc(16,"a"),O.jc(17,"img",9),O.qc("click",function(){return e.downloadCSV()}),O.ic(),O.ic(),O.jc(18,"a"),O.jc(19,"img",10),O.qc("click",function(){O.Rc(i);var t=O.Oc(32);return e.openExportPdf(t)}),O.ic(),O.ic(),O.ic(),O.ic(),O.jc(20,"div",11),O.jc(21,"div",12,13),O.jc(23,"p-table",14),O.qc("firstChange",function(t){return e.first=t})("sortFunction",function(t){return e.customSort(t)}),O.Zc(24,ot,5,1,"ng-template",15),O.Zc(25,st,2,1,"ng-template",16),O.Zc(26,dt,2,1,"ng-template",17),O.ic(),O.ic(),O.Zc(27,gt,2,0,"div",18),O.jc(28,"div",19),O.Zc(29,ut,3,4,"div",20),O.Zc(30,ht,3,3,"div",21),O.ic(),O.ic(),O.ic(),O.Zc(31,vt,17,3,"ng-template",null,22,O.ad),O.ic()}2&t&&(O.Nb(7),O.Bc("styleClass","form-field")("maxDate",e.toDate)("ngModel",e.fromDate)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("readonlyInput",!0),O.Nb(5),O.Bc("styleClass","form-field")("minDate",e.fromDate)("maxDate",e.maxDate)("ngModel",e.toDate)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("readonlyInput",!0),O.Nb(4),O.Rb("w-inline-block cursor-pointer float-right ",null!=e.pageWiseLatestLogs&&e.pageWiseLatestLogs.length?"":"disabled-opa",""),O.Nb(2),O.Rb("w-inline-block cursor-pointer float-right ",null!=e.pageWiseLatestLogs&&e.pageWiseLatestLogs.length?"":"disabled-opa",""),O.Nb(5),O.Vc(O.Ec(37,Pt)),O.Bc("value",e.pageWiseLatestLogs)("responsive",!0)("rowHover",!0)("sortField","user_name")("sortOrder",-1)("pageLinks",5)("filterDelay",0)("resetPageOnSort",!0)("rows",10)("first",e.first)("customSort",!0),O.Nb(4),O.Bc("ngIf",!e.pageWiseLatestLogs.length&&e.isNoRecordFound),O.Nb(2),O.Bc("ngIf",e.pageWiseLatestLogs.length),O.Nb(1),O.Bc("ngIf",e.pageWiseLatestLogs.length))},directives:[it.a,s.o,s.r,S.b,N.f,_.i,r.n,s.d,nt.a,r.m,N.d,N.e,j.a,r.l,c.a,F.a,I.a],styles:['[_nghost-%COMP%]     .p-confirm-dialog-accept{border-radius:20px!important}.accept-btn-css[_ngcontent-%COMP%]{border-radius:20px!important}[_nghost-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{padding-right:10px!important}.no-records[_ngcontent-%COMP%]{padding:5px 15px;text-align:center;border-left:1px solid #e9ecef;border-right:1px solid #e9ecef;border-bottom:1px solid #e9ecef}.disabled-opa[_ngcontent-%COMP%]{opacity:.4;pointer-events:none!important}.err-msg[_ngcontent-%COMP%]{color:#e72b56}.red-btn[_ngcontent-%COMP%]{background:#e72b56!important}.more-display[_ngcontent-%COMP%]:hover{cursor:pointer}.field-dis-val[_ngcontent-%COMP%]{min-width:170px;font-weight:500;padding:3px}.padding-btm3[_ngcontent-%COMP%]{padding-bottom:12px}.padding-btm1[_ngcontent-%COMP%]{padding-bottom:20px}.pi-exclamation-circle[_ngcontent-%COMP%]{font-size:21px}.modal-title[_ngcontent-%COMP%]{font-weight:600;font-size:16px}.modal-title-delete[_ngcontent-%COMP%]{font-weight:600;font-size:21px}[_nghost-%COMP%]     .p-inputtext:enabled:focus{box-shadow:none!important}.pad-0[_ngcontent-%COMP%]{padding:0}.copy-ip[_ngcontent-%COMP%]{margin-top:10px;font-size:14px;box-shadow:none!important}.pad-tp-10[_ngcontent-%COMP%]{padding-top:10px!important}.pagination-div[_ngcontent-%COMP%]{display:flex;justify-content:end;padding:0 10px}.header-width[_ngcontent-%COMP%]{width:90px}.conn-name-td[_ngcontent-%COMP%]{width:180px}.conn-name[_ngcontent-%COMP%]{padding:5px 10px;width:93%!important}.alation-div[_ngcontent-%COMP%], .conn-name[_ngcontent-%COMP%]{border-radius:20px;color:#fff;font-weight:600;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;display:inline-block}.alation-icon-green[_ngcontent-%COMP%]{color:green}.alation-icon-white[_ngcontent-%COMP%]{color:#fff;visibility:hidden}.conn-failed[_ngcontent-%COMP%]{background-color:#e72b56;opacity:.7}.conn-pass[_ngcontent-%COMP%]{background-color:#56b608}.fa-files-o[_ngcontent-%COMP%], .fa-pencil[_ngcontent-%COMP%]{color:#337ab7}.fa-trash[_ngcontent-%COMP%]{color:#e72b56}.fa-deactivate[_ngcontent-%COMP%]{color:#c32121}.fa-activate[_ngcontent-%COMP%]{color:#181894}.row-ht[_ngcontent-%COMP%]{height:30px}.pd-top-30[_ngcontent-%COMP%]{padding-top:30px}.mr-top-20[_ngcontent-%COMP%]{margin-top:20px}.td-ellipsis[_ngcontent-%COMP%]{word-break:break-all;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.pd-0[_ngcontent-%COMP%]{padding:0}.width-225[_ngcontent-%COMP%]{width:225px}.columnFilterClass[_ngcontent-%COMP%]{z-index:1008;transform-origin:right;top:64.4236px;position:absolute;flex-direction:column;background:#fff;color:#495057;border:0;border-radius:3px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12);min-width:12.5rem}.add-icon[_ngcontent-%COMP%]{height:40px;width:40px}.filterDisplay[_ngcontent-%COMP%]{display:inline-block;z-index:9}.margin-l[_ngcontent-%COMP%]{margin-left:5px;width:30px}.width-100[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .p-datatable .p-datatable-header{padding:.2rem;height:40px;font-size:14px;border-top-right-radius:10px!important;border-top-left-radius:10px!important}.button[_ngcontent-%COMP%]{font-weight:500;background:linear-gradient(180deg,#ff7526,#fb9a64)!important;font-size:13px}.btn-label[_ngcontent-%COMP%], [_nghost-%COMP%]     .submit-btn .p-button-label{width:156px;font-size:14px!important;font-weight:600!important;font-style:normal;font-family:Open Sans;height:40px;color:#fff}[_nghost-%COMP%]     .p-calendar .p-inputtext{box-shadow:none!important}.create-conn-main[_ngcontent-%COMP%]{margin-top:27px;background-color:#fff;border-radius:20px;padding:15px;box-shadow:0 2px 8px 0 rgba(99,99,99,.2)}.form-title[_ngcontent-%COMP%]{font-family:Open_Sans_Semi_Bold;font-size:17px;margin-top:-10px;margin-bottom:5px;padding:10px 0 10px 10px}.br-top[_ngcontent-%COMP%]{border-top:1px solid #eef1f5;padding-top:10px}.form-label[_ngcontent-%COMP%]{font-size:15px;font-weight:600;font-family:Open_Sans_Semi_Bold}.p-field[_ngcontent-%COMP%]{margin:0 10px}.form-field[_ngcontent-%COMP%]{width:100%!important;border-radius:10px!important}[_nghost-%COMP%]     .p-calendar{width:100%!important;border-radius:10px!important;height:35px!important;margin:0!important;box-shadow:none!important}[_nghost-%COMP%]     p-calendar .p-button.p-button-icon-only{width:2.357rem;padding:1.15rem 0!important;display:inline-flex!important}.adjust[_ngcontent-%COMP%]{top:10px}.nav-pills[_ngcontent-%COMP%]{background:#fff;border-bottom:1px solid #dedede;border-radius:8px 8px 0 0}.nav-pills[_ngcontent-%COMP%], .nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{height:50px;position:relative}.nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-right:-1%;margin-top:.1%;top:10px}.nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{position:relative;padding:15px 20px;line-height:19px;color:#717171;font-size:14px;font-weight:700;z-index:1}.nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:transparent;border-color:transparent}.nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{content:"";width:100%;height:50px;position:absolute;bottom:1%;left:-1px;font-size:12px;background:transparent;border:1px solid transparent;z-index:-1}.nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]:before{background:linear-gradient(180deg,transparent,transparent);bottom-border-color:#dedede;font-size:16px;font-family:Open Sans!important;text-align:center;border-radius:8px 8px 0 0}.nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%], .nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]:focus, .nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]:hover{border:1px solid transparent;background:transparent;color:#951447;font-weight:700;z-index:2;-webkit-text-decoration:underline 3px;text-decoration:underline 3px;text-underline-offset:8px}a[_ngcontent-%COMP%]:hover{text-decoration:none}.tab-content[_ngcontent-%COMP%]   .tab-pane[_ngcontent-%COMP%]{box-shadow:0 0 15px #e6e5e5;border-radius:7px 20px 20px 20px;padding:5px 20px 20px;background:#fff;line-height:22px}.tab-content[_ngcontent-%COMP%]   .tab-pane[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0}.fromstyle[_ngcontent-%COMP%]{padding-left:0;padding-right:30px}.margin-top-10[_ngcontent-%COMP%]{margin-top:10px}.notify-font[_ngcontent-%COMP%]{font-size:15px;color:inherit}#container1[_ngcontent-%COMP%]{width:90%;overflow-x:scroll}']}),Ct);function yt(t,e){if(1&t){var i=O.kc();O.jc(0,"div",39),O.jc(1,"span",40),O.jc(2,"input",41),O.qc("ngModelChange",function(t){return O.Rc(i),O.uc().globalFilterValue=t})("keyup",function(t){return O.Rc(i),O.uc().globalFilterFun(t)}),O.ic(),O.bd(3,"\xa0 "),O.ec(4,"i",42),O.ic(),O.ic()}if(2&t){var n=O.uc();O.Nb(2),O.Bc("ngModel",n.globalFilterValue)}}function Ot(t,e){if(1&t){var i=O.kc();O.jc(0,"th"),O.bd(1),O.ec(2,"br"),O.ec(3,"p-sortIcon",46),O.jc(4,"app-column-filter",47),O.qc("filterData",function(t){return O.Rc(i),O.uc(3).getFilterData(t)})("resetFilterValues",function(t){return O.Rc(i),O.uc(3).resetFilter(t)}),O.ic(),O.jc(5,"span",48),O.jc(6,"i",49),O.qc("click",function(){O.Rc(i);var t=O.uc().$implicit;return O.uc(2).onFilterClick(t.originalValue)}),O.ic(),O.ic(),O.ic()}if(2&t){var n=O.uc().$implicit,o=O.uc(2);O.Nb(1),O.dd(" ",n.displayValue,""),O.Nb(2),O.Cc("field",n.originalValue),O.Cc("pSortableColumn",n.originalValue),O.Nb(1),O.Bc("colFilterData",o.getFilterState(n.originalValue))("display",o.displayFiltersFor[n.originalValue])("customId",n.originalValue)("fieldName",n.originalValue),O.Nb(1),O.Bc("ngClass",o.filterColumnNameWithHighlightName(n.originalValue)?"selected-filter-column":""),O.Nb(1),O.Bc("ngClass",o.filterColumnNameWithHighlightName(n.originalValue)?"pi pi-filter-fill":"pi pi-filter")}}function wt(t,e){if(1&t&&(O.hc(0),O.Zc(1,Ot,7,9,"th",45),O.gc()),2&t){var i=e.$implicit;O.Nb(1),O.Bc("ngIf",i.isSelected)}}function Lt(t,e){if(1&t&&(O.jc(0,"tr",43),O.Zc(1,wt,2,1,"ng-container",44),O.ic()),2&t){var i=O.uc();O.Nb(1),O.Bc("ngForOf",i.customizeCols)}}function _t(t,e){if(1&t&&(O.jc(0,"td",52),O.jc(1,"span"),O.bd(2),O.ic(),O.ic()),2&t){var i=O.uc().$implicit,n=O.uc().$implicit;O.Bc("title",n[i.originalValue]),O.Nb(2),O.cd(n[i.originalValue])}}function Mt(t,e){if(1&t&&(O.hc(0),O.Zc(1,_t,3,2,"td",51),O.gc()),2&t){var i=e.$implicit;O.Nb(1),O.Bc("ngIf",i.isSelected)}}function kt(t,e){if(1&t&&(O.jc(0,"tr",50),O.Zc(1,Mt,2,1,"ng-container",44),O.ic()),2&t){var i=O.uc();O.Nb(1),O.Bc("ngForOf",i.customizeCols)}}function Dt(t,e){1&t&&(O.jc(0,"div",53),O.bd(1," No records found "),O.ic())}function St(t,e){if(1&t){var i=O.kc();O.jc(0,"div",54),O.jc(1,"p-paginator",55,56),O.qc("onPageChange",function(t){return O.Rc(i),O.uc().onPageChange(t)})("firstChange",function(t){return O.Rc(i),O.uc().first=t}),O.ic(),O.ic()}if(2&t){var n=O.uc();O.Nb(1),O.Bc("rows",10)("totalRecords",n.auditLogList.length)("showCurrentPageReport",!0)("first",n.first)}}function Nt(t,e){if(1&t&&(O.jc(0,"div",61),O.jc(1,"div"),O.bd(2),O.ic(),O.ic()),2&t){var i=O.uc(3);O.Nb(2),O.ed("Page ",i.selectedPage.page," of ",i.totalNumOfPages,"")}}function jt(t,e){if(1&t&&O.Zc(0,Nt,3,2,"div",60),2&t){var i=O.uc(2);O.Bc("ngIf",i.selectedPage)}}function Ft(t,e){if(1&t){var i=O.kc();O.jc(0,"div",57),O.jc(1,"p-dropdown",58),O.qc("ngModelChange",function(t){return O.Rc(i),O.uc().selectedPage=t})("onChange",function(t){return O.Rc(i),O.uc().onPageNumChange(t)}),O.Zc(2,jt,1,1,"ng-template",59),O.ic(),O.ic()}if(2&t){var n=O.uc();O.Nb(1),O.Bc("options",n.numOfPages)("filter",!0)("ngModel",n.selectedPage)}}function It(t,e){if(1&t){var i=O.kc();O.hc(0),O.jc(1,"div",75),O.jc(2,"table"),O.jc(3,"tr",76),O.jc(4,"td"),O.jc(5,"p-checkbox",77),O.qc("ngModelChange",function(t){return e.$implicit.pdfCols=t})("onChange",function(){return O.Rc(i),O.uc(2).pdfColsValue()}),O.ic(),O.ic(),O.jc(6,"td"),O.jc(7,"label"),O.bd(8),O.ic(),O.ic(),O.ic(),O.ic(),O.ic(),O.gc()}if(2&t){var n=e.$implicit,o=O.uc(2);O.Nb(5),O.Bc("ngModel",n.pdfCols)("disabled",o.pdfCheckboxDisabled&&!n.pdfCols),O.Nb(3),O.cd(n.displayValue)}}function zt(t,e){1&t&&(O.jc(0,"div",78),O.bd(1,"You can select up to 9 columns."),O.ic())}function Vt(t,e){if(1&t){var i=O.kc();O.jc(0,"div",62),O.jc(1,"span",63),O.bd(2,"Please select columns that need to be downloaded in PDF"),O.ic(),O.ic(),O.jc(3,"div",64),O.jc(4,"div",65),O.Zc(5,It,9,3,"ng-container",44),O.ic(),O.ic(),O.jc(6,"div",66),O.jc(7,"div",67),O.jc(8,"div",68),O.Zc(9,zt,2,0,"div",69),O.ic(),O.jc(10,"div",70),O.jc(11,"button",71),O.qc("click",function(){O.Rc(i);var t=O.uc();return t.exportPdf(),t.modalRef.hide()}),O.ic(),O.ic(),O.jc(12,"div",72),O.jc(13,"div"),O.jc(14,"label",73),O.qc("click",function(){return O.Rc(i),O.uc().closeExportPdf()}),O.bd(15,"Close"),O.ic(),O.jc(16,"img",74),O.qc("click",function(){return O.Rc(i),O.uc().closeExportPdf()}),O.ic(),O.ic(),O.ic(),O.ic(),O.ic()}if(2&t){var n=O.uc();O.Nb(5),O.Bc("ngForOf",n.customizeCols),O.Nb(4),O.Bc("ngIf",n.pdfCheckboxDisabled),O.Nb(2),O.Bc("disabled",n.disableDownloadBtn)}}var Rt,Bt=function(){return{width:"100%"}},Et=((Rt=function(){function e(t,n,o,a,r,s){i(this,e),this.spinner=t,this.filterService=n,this.modalService=o,this.auditLogsService=a,this.datePipe=r,this.cdr=s,this.numOfPages=[{page:0,pageIndex:0}],this.selectedPage={page:0,pageIndex:0},this.auditLogList=[],this.mainAuditLogList=[],this.pageWiseAuditLogs=[],this.first=0,this.pageSize=9,this.totalNumOfPages=0,this.checkboxDisabled=!1,this.maxCount=4,this.pdfData=[],this.pdfCheckCount=0,this.pdfCheckboxDisabled=!1,this.disableDownloadBtn=!0,this.columnFilter={},this.scrollHt="500px",this.filterData={},this.selectedRowData={},this.isNoRecordFound=!1,this.displayFiltersFor={activityName:!1,entityId:!1,entityName:!1,databuckFeature:!1,activityLogTime:!1,userName:!1},this.customizeCols=[{displayValue:"Activity Name",originalValue:"activityName",isSelected:!0,necessaryCol:!0,alwaysSelected:!0},{displayValue:"Databuck Feature",originalValue:"databuckFeature",isSelected:!0,necessaryCol:!0,alwaysSelected:!0},{displayValue:"Entity Id",originalValue:"entityId",isSelected:!0,necessaryCol:!0,alwaysSelected:!0},{displayValue:"Entity Name",originalValue:"entityName",isSelected:!0,necessaryCol:!0,alwaysSelected:!0},{displayValue:"Activity Log Time",originalValue:"activityLogTime",isSelected:!0,necessaryCol:!0,alwaysSelected:!0},{displayValue:"User Name",originalValue:"userName",isSelected:!0,necessaryCol:!0,alwaysSelected:!0}]}return o(e,[{key:"ngOnInit",value:function(){var t;this.fromDate=new Date,this.fromDate.setDate((new Date).getDate()-1),this.toDate=new Date,this.toDate.setDate((new Date).getDate()+1),this.maxDate=new Date,this.maxDate.setDate((new Date).getDate()+3),this.getAuditLogsList(),sessionStorage.getItem("modulePerRole")&&(this.roleModule=JSON.parse(sessionStorage.getItem("modulePerRole"))),this.roleModule.length>0&&(null===(t=this.roleModule)||void 0===t||t.map(function(t){t.accessControl=t.accessControl.split("-")}))}},{key:"roleOnModule",value:function(t){return this.roleModule.find(function(e){return e.moduleName===t})}},{key:"openExportPdf",value:function(t){this.modalRef=this.modalService.show(t,{class:"gray modal-lg",backdrop:"static",keyboard:!1})}},{key:"closeExportPdf",value:function(){var t=this;this.modalRef.hide(),setTimeout(function(){t.pdfCheckCount=0,t.pdfCheckboxDisabled=!1,t.disableDownloadBtn=!0,t.customizeCols.forEach(function(t){return t.pdfCols=!1})},1e3)}},{key:"exportPdf",value:function(){var t=this;this.pdfData.length&&(this.spinner.show(),setTimeout(function(){var e=new y.default("l","pt"),i=t.customizeCols.filter(function(t){return t.pdfCols}),n=[];i.forEach(function(t){return n.push(t.displayValue)});var o,a=[];i.forEach(function(t){return a.push(t.originalValue)}),o=t.pdfData.map(function(t){return Object.assign(a.map(function(e){return t[e]}))});var r=e.internal.pageSize,s=r.height?r.height:r.getHeight();x()(e,{columns:n,body:o,didDrawPage:function(t){1==t.pageNumber&&(e.text("Databuck Audit Logs",e.internal.pageSize.width/2,25,null,"center"),e.setFontSize(10)),e.setFontSize(9),e.text("Created by FirstEigen",e.internal.pageSize.width-40,s-30,null,"right")},startY:80,styles:{fontSize:8,cellWidth:"auto",lineColor:[0,0,0],lineWidth:.2,minCellWidth:80,cellPadding:{top:2,right:4,bottom:2,left:4}},columnStyles:{}}),e.save("Databuck Audit Logs.pdf"),t.disableDownloadBtn=!0,t.pdfCheckboxDisabled=!1,i.forEach(function(t){return t.pdfCols=!1}),t.spinner.hide()},2e3))}},{key:"pdfColsValue",value:function(){var t=this;this.pdfCheckCount=0,this.customizeCols.filter(function(t){return!0===t.pdfCols}).forEach(function(e){!0===e.pdfCols&&t.pdfCheckCount++}),this.disableDownloadBtn=0==this.pdfCheckCount,this.pdfCheckboxDisabled=9==this.pdfCheckCount}},{key:"onFilterClick",value:function(t){var e=this;Object.keys(this.displayFiltersFor).map(function(i){e.displayFiltersFor[i]=i===t})}},{key:"getAuditLogsList",value:function(){var e=this;this.spinner.show();var i=new Date(this.fromDate),n=new Date(this.toDate),o={fromDate:this.datePipe.transform(i,"yyyy-MM-dd"),toDate:this.datePipe.transform(n,"yyyy-MM-dd")};this.auditLogsService.auditLog(o,"getLatestAuditTrailDetails").subscribe(function(i){if("success"===i.status){e.spinner.hide(),e.spinner.hide()&&(e.isNoRecordFound=!0),i.result.latestAuditTrailDetails=i.result.latestAuditTrailDetails.filter(function(t){return"N"!==t.activityName}),e.mainAuditLogList=t(i.result.latestAuditTrailDetails),e.auditLogList=t(e.mainAuditLogList),e.pdfData=t(e.mainAuditLogList);var n=e.first+e.pageSize,o=e.auditLogList.filter(function(t,e){return e<=n});e.pageWiseAuditLogs=t(o),e.calculateNumOfPages(),e.checkCount=0,e.customizeCols.filter(function(t){return!1===t.necessaryCol}).forEach(function(t){!0===t.isSelected&&e.checkCount++}),e.checkboxDisabled=e.checkCount>=e.maxCount}else e.mainAuditLogList=[],e.auditLogList=[],e.pageWiseAuditLogs=[],e.isNoRecordFound=!0})}},{key:"calculateNumOfPages",value:function(){if(this.totalNumOfPages=this.mainAuditLogList.length?this.mainAuditLogList.length<this.pageSize?1:Math.ceil(this.mainAuditLogList.length/(this.pageSize+1)):0,this.numOfPages=[],this.selectedPage={},0===this.totalNumOfPages)this.numOfPages.push({pageIndex:0,page:0}),this.selectedPage={pageIndex:0,page:0};else if(1===this.totalNumOfPages)this.numOfPages.push({pageIndex:0,page:1}),this.selectedPage={pageIndex:0,page:1};else{this.selectedPage={pageIndex:0,page:1};for(var t=0;t<this.totalNumOfPages;t++)this.numOfPages.push({pageIndex:t,page:t+1})}}},{key:"onPageChange",value:function(e){var i=this;this.first=e.first;var n=this.getSortedData(),o=this.first+this.pageSize,a=n.filter(function(t,e){if(e<=o&&e>=i.first)return t});this.selectedPage={pageIndex:e.page,page:e.page+1},this.pageWiseAuditLogs=t(a)}},{key:"onPageNumChange",value:function(e){var i=this;this.selectedPage={page:e.value.page,pageIndex:e.value.pageIndex},this.first=1===e.value.page?0:10*(e.value.page-1);var n=this.getSortedData(),o=this.first+this.pageSize,a=n.filter(function(t,e){if(e<=o&&e>=i.first)return t});this.pageWiseAuditLogs=t(a)}},{key:"getSortedData",value:function(){var e=this,i=t(this.auditLogList);return this.sortOrderEvent?1===this.sortOrderEvent.order?(i.sort(function(t,i){return t[e.sortOrderEvent.field]>i[e.sortOrderEvent.field]?1:i[e.sortOrderEvent.field]>t[e.sortOrderEvent.field]?-1:0}),i):(i.sort(function(t,i){return t[e.sortOrderEvent.field]>i[e.sortOrderEvent.field]?-1:i[e.sortOrderEvent.field]>t[e.sortOrderEvent.field]?1:0}),i):i}},{key:"customSort",value:function(e){var i=this,n=parseInt((this.first/(this.pageSize+1)).toString(),10);this.selectedPage.page=n+1,this.selectedPage.pageIndex=n,this.sortOrderEvent=e;var o=t(this.auditLogList);o.sort(1===this.sortOrderEvent.order?function(t,i){return t[e.field]>i[e.field]?1:i[e.field]>t[e.field]?-1:0}:function(t,i){return t[e.field]>i[e.field]?-1:i[e.field]>t[e.field]?1:0});var a=this.first+this.pageSize,r=o.filter(function(t,e){if(e<=a&&e>=i.first)return t});this.pageWiseAuditLogs=t(r)}},{key:"globalFilterFun",value:function(e){var i=t(this.globalFilterLogic()),n=this.first+this.pageSize,o=i.filter(function(t,e){return e<=n});this.cdr.detectChanges(),this.pageWiseAuditLogs=t(o),this.setPageNumber()}},{key:"globalFilterLogic",value:function(){var e=this;if(this.mainAuditLogList.length){var i=Object.keys(this.mainAuditLogList[0]);if(this.globalFilterValue){if(this.filterValue=[],this.mainAuditLogList.forEach(function(t){var n=!1;i.forEach(function(i){t[i]&&t[i].toString().toLowerCase().includes(e.globalFilterValue.toLowerCase())&&!n&&(e.filterValue.push(t),n=!0)})}),this.columnFilter!={}){this.filterData=JSON.parse(JSON.stringify(this.columnFilter));var n=Object.keys(this.columnFilter);this.first=0,n.forEach(function(t){e.filterValue=e.filterValue.filter(function(i){return e.filterService.filters.contains(i[t],e.columnFilter[t])})})}return this.auditLogList=t(this.filterValue),this.calculateNumOfPages(),this.filterValue}if(this.calculateNumOfPages(),this.filterValue=t(this.mainAuditLogList),this.columnFilter!={}){this.filterData=JSON.parse(JSON.stringify(this.columnFilter));var o=Object.keys(this.columnFilter);this.first=0,o.forEach(function(t){e.filterValue=e.filterValue.filter(function(i){return e.filterService.filters.contains(i[t],e.columnFilter[t])})})}return this.auditLogList=t(this.filterValue),this.calculateNumOfPages(),this.auditLogList}return[]}},{key:"getFilterData",value:function(e){var i=this;this.columnFilter[e[0]]=e[1],this.filterData=JSON.parse(JSON.stringify(this.columnFilter));var n=Object.keys(this.columnFilter);this.displayFiltersFor[e[0]]=!1,this.first=0,this.auditLogList=t(this.mainAuditLogList),n.forEach(function(t){i.auditLogList=i.auditLogList.filter(function(e){return i.filterService.filters.contains(e[t],i.columnFilter[t])})}),this.setPageNumber()}},{key:"resetFilter",value:function(e){var i=this;this.columnFilter[e]=null,delete this.columnFilter[e],this.filterData=JSON.parse(JSON.stringify(this.columnFilter));var n=Object.keys(this.columnFilter);this.displayFiltersFor[e]=!1,this.first=0,this.auditLogList=t(this.mainAuditLogList),n.forEach(function(t){i.auditLogList=i.auditLogList.filter(function(e){return i.filterService.filters.contains(e[t],i.columnFilter[t])})}),this.setPageNumber()}},{key:"setPageNumber",value:function(){if(this.totalNumOfPages=this.auditLogList.length?this.auditLogList.length<this.pageSize?1:Math.ceil(this.auditLogList.length/(this.pageSize+1)):0,this.numOfPages=[],this.selectedPage={},0===this.totalNumOfPages)this.numOfPages.push({pageIndex:0,page:0}),this.selectedPage={pageIndex:0,page:0};else if(1===this.totalNumOfPages)this.numOfPages.push({pageIndex:0,page:1}),this.selectedPage={pageIndex:0,page:1};else{this.selectedPage={pageIndex:0,page:1};for(var e=0;e<this.totalNumOfPages;e++)this.numOfPages.push({pageIndex:e,page:e+1})}var i=this.first+this.pageSize,n=this.auditLogList.filter(function(t,e){return e<=i});this.pageWiseAuditLogs=t(n)}},{key:"getFilterState",value:function(t){if(this.filterData&&null!=this.filterData&&""!==this.filterData){if(this.filterData[t]){var e=this.filterData[t];return delete this.filterData[t],{fieldName:t,filterWith:e}}return{fieldName:"",filterWith:""}}return{fieldName:"",filterWith:""}}},{key:"filterColumnNameWithHighlightName",value:function(t){return!(Object.keys(this.columnFilter).findIndex(function(e){return e===t})<0)}},{key:"clearLog",value:function(){var t=this,e=new Date(this.fromDate),i=new Date(this.toDate),n={fromDate:this.datePipe.transform(e,"yyyy-MM-dd"),toDate:this.datePipe.transform(i,"yyyy-MM-dd")};this.auditLogsService.clearLogs(n,"clearLogs").subscribe(function(e){"success"==e.status&&t.getAuditLogsList()})}},{key:"downloadCSV",value:function(){var t=new Date(this.fromDate),e=new Date(this.toDate),i={fromDate:this.datePipe.transform(t,"yyyy-MM-dd"),toDate:this.datePipe.transform(e,"yyyy-MM-dd")};this.auditLogsService.downloadCsvAuditLogs(i,"downloadCsvforAuditLog").subscribe(function(t){Object(p.saveAs)(t,"Databuck_Audit_Logs.csv")})}}]),e}()).\u0275fac=function(t){return new(t||Rt)(O.dc(L.c),O.dc(_.d),O.dc(M.a),O.dc(et),O.dc(r.d),O.dc(O.h))},Rt.\u0275cmp=O.Xb({type:Rt,selectors:[["app-audit-logs"]],decls:55,vars:41,consts:[[1,"content-wrapper","top"],[1,"form-row"],[1,"col"],[1,"form-group","p-field"],["id","essentialScreenNull",1,""],[1,"row"],[1,"col-sm-12","adjust"],[1,"nav","nav-pills","justify-content-left"],["id","category_01-tab","data-toggle","tab","href","#category_01",3,"ngClass"],["id","category_02-tab","data-toggle","tab","href","#category_02"],["id","countreason",1,"tab-content","clearfix"],["id","category_01",1,"tab-pane",3,"ngClass"],[1,"container-fluid","create-conn-main"],[1,"col-sm-12"],[1,"form-title"],["pButton","","type","button","label","Clear Log",1,"button","w-button","shadow","btn-mr-rt","submit-btn",3,"ngClass","click"],[1,"row","padding-left-10"],[1,"col-sm-3","col-md-3"],["for","from_date",1,"form-label"],["yearRange","2000:2030","inputId","dateformat","dateFormat","yy-mm-dd","appendTo","body",3,"styleClass","maxDate","ngModel","showIcon","monthNavigator","yearNavigator","readonlyInput","ngModelChange"],["yearRange","2000:2030","inputId","dateformat","dateFormat","yy-mm-dd","appendTo","body",3,"styleClass","minDate","maxDate","ngModel","showIcon","monthNavigator","yearNavigator","readonlyInput","ngModelChange"],[1,"col-sm-3","col-md-3","padding-top-30"],["pButton","","type","button","label","Show",1,"button","w-button","logoutButton","submit-btn",3,"click"],[1,"col-sm-3","col-md-3","padding-top-30","pr-28"],["src","assets/images/csv_icon.png","title","Download CSV","loading","lazy","alt","Download CSV",1,"download_btn_css","image-7",3,"click"],["src","assets/images/pdf_icon.jpg","title","Download PDF","loading","lazy","alt","Download PDF",1,"download_btn_css","image-7",3,"click"],[1,"row","p-field"],["id","view_audit_log_list",1,"col-sm-12","mr-top-20","pd-0"],["view_audit_log_list",""],["styleClass","p-datatable-gridlines p-datatable-striped","responsiveLayout","scroll","sortMode","single",3,"value","responsive","rowHover","sortField","sortOrder","pageLinks","filterDelay","resetPageOnSort","rows","first","customSort","firstChange","sortFunction"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["class","col-sm-12 no-records default-font-14-weight",4,"ngIf"],[1,"col-sm-12","pagination-div"],["class","pad-0",4,"ngIf"],["class","pad-0 pad-tp-10 text-right",4,"ngIf"],["exportPdfTemplate",""],["id","category_02",1,"tab-pane"],[1,"table-header"],[1,"gsearch"],["type","text","pInputText","","size","50","placeholder","Search",1,"gfilter",3,"ngModel","ngModelChange","keyup"],[1,"pi","pi-search","margin-gfilter"],[1,"header"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"field","pSortableColumn"],[3,"colFilterData","display","customId","fieldName","filterData","resetFilterValues"],[1,"columnFilter",3,"ngClass"],[1,"pi-filter-color",3,"ngClass","click"],[1,"row-ht"],["class","text-center word_break_word_all td-ellipsis",3,"title",4,"ngIf"],[1,"text-center","word_break_word_all","td-ellipsis",3,"title"],[1,"col-sm-12","no-records","default-font-14-weight"],[1,"pad-0"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"rows","totalRecords","showCurrentPageReport","first","onPageChange","firstChange"],["dq_paginator",""],[1,"pad-0","pad-tp-10","text-right"],["optionLabel","page","placeholder","Go to page",3,"options","filter","ngModel","ngModelChange","onChange"],["pTemplate","selectedItem"],["class","drpdwn-item",4,"ngIf"],[1,"drpdwn-item"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","pdf-modal"],[1,"row","padding-btm"],[1,"modal-footer"],[1,"row","full-width"],[1,"col-lg-4"],["class","color-code",4,"ngIf"],[1,"col-lg-4","text-center"],["pButton","","type","button","label","Download",1,"button","w-button","shadow","btn-mr-rt","submit-btn",3,"disabled","click"],[1,"col-lg-4","arrow-text-right"],[1,"cursor-pointer",3,"click"],["src","assets/images/close.png",1,"margin-img","cursor-pointer",3,"click"],[1,"col-sm-4"],[1,"validations"],["binary","true","name","groupname1","value","customizeCols[cols.displayValue]",3,"ngModel","disabled","ngModelChange","onChange"],[1,"color-code"]],template:function(t,e){if(1&t){var i=O.kc();O.jc(0,"div",0),O.ec(1,"app-main-header"),O.jc(2,"div",1),O.jc(3,"div",2),O.jc(4,"div",3),O.jc(5,"div",4),O.jc(6,"div",5),O.jc(7,"div",6),O.jc(8,"ul",7),O.jc(9,"li"),O.jc(10,"a",8),O.bd(11,"Activity"),O.ic(),O.ic(),O.jc(12,"li"),O.jc(13,"a",9),O.bd(14,"Login"),O.ic(),O.ic(),O.ic(),O.jc(15,"div",10),O.jc(16,"div",11),O.jc(17,"div",12),O.jc(18,"div",5),O.jc(19,"div",13),O.jc(20,"p",14),O.jc(21,"button",15),O.qc("click",function(){return e.clearLog()}),O.ic(),O.ic(),O.ic(),O.ic(),O.jc(22,"div",16),O.jc(23,"div",17),O.jc(24,"label",18),O.bd(25,"From Date"),O.ic(),O.ec(26,"br"),O.jc(27,"p-calendar",19),O.qc("ngModelChange",function(t){return e.fromDate=t}),O.ic(),O.ic(),O.jc(28,"div",17),O.jc(29,"label",18),O.bd(30,"To Date"),O.ic(),O.ec(31,"br"),O.jc(32,"p-calendar",20),O.qc("ngModelChange",function(t){return e.toDate=t}),O.ic(),O.ic(),O.jc(33,"div",21),O.jc(34,"button",22),O.qc("click",function(){return e.getAuditLogsList()}),O.ic(),O.ic(),O.jc(35,"div",23),O.jc(36,"a"),O.jc(37,"img",24),O.qc("click",function(){return e.downloadCSV()}),O.ic(),O.ic(),O.jc(38,"a"),O.jc(39,"img",25),O.qc("click",function(){O.Rc(i);var t=O.Oc(52);return e.openExportPdf(t)}),O.ic(),O.ic(),O.ic(),O.ic(),O.jc(40,"div",26),O.jc(41,"div",27,28),O.jc(43,"p-table",29),O.qc("firstChange",function(t){return e.first=t})("sortFunction",function(t){return e.customSort(t)}),O.Zc(44,yt,5,1,"ng-template",30),O.Zc(45,Lt,2,1,"ng-template",31),O.Zc(46,kt,2,1,"ng-template",32),O.ic(),O.ic(),O.Zc(47,Dt,2,0,"div",33),O.jc(48,"div",34),O.Zc(49,St,3,4,"div",35),O.Zc(50,Ft,3,3,"div",36),O.ic(),O.ic(),O.ic(),O.Zc(51,Vt,17,3,"ng-template",null,37,O.ad),O.ic(),O.jc(53,"div",38),O.ec(54,"app-latest-login-activity"),O.ic(),O.ic(),O.ic(),O.ic(),O.ic(),O.ic(),O.ic(),O.ic(),O.ic()}if(2&t){var n=null;O.Nb(10),O.Bc("ngClass","active"),O.Nb(6),O.Bc("ngClass","active"),O.Nb(5),O.Bc("ngClass",null!=(n=e.roleOnModule("User Settings"))&&null!=n.accessControl&&n.accessControl.includes("D")?" cursor-pointer":"disable"),O.Nb(6),O.Bc("styleClass","form-field")("maxDate",e.toDate)("ngModel",e.fromDate)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("readonlyInput",!0),O.Nb(5),O.Bc("styleClass","form-field")("minDate",e.fromDate)("maxDate",e.maxDate)("ngModel",e.toDate)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("readonlyInput",!0),O.Nb(4),O.Rb("w-inline-block cursor-pointer float-right ",null!=e.pageWiseAuditLogs&&e.pageWiseAuditLogs.length?"":"disabled-opa",""),O.Nb(2),O.Rb("w-inline-block cursor-pointer float-right ",null!=e.pageWiseAuditLogs&&e.pageWiseAuditLogs.length?"":"disabled-opa",""),O.Nb(5),O.Vc(O.Ec(40,Bt)),O.Bc("value",e.pageWiseAuditLogs)("responsive",!0)("rowHover",!0)("sortField","user_name")("sortOrder",-1)("pageLinks",5)("filterDelay",0)("resetPageOnSort",!0)("rows",10)("first",e.first)("customSort",!0),O.Nb(4),O.Bc("ngIf",!e.pageWiseAuditLogs.length&&e.isNoRecordFound),O.Nb(2),O.Bc("ngIf",e.pageWiseAuditLogs.length),O.Nb(1),O.Bc("ngIf",e.pageWiseAuditLogs.length)}},directives:[D.a,r.l,S.b,it.a,s.o,s.r,N.f,_.i,r.n,xt,s.d,nt.a,r.m,N.d,N.e,j.a,c.a,F.a,I.a],styles:['[_nghost-%COMP%]     .p-confirm-dialog-accept{border-radius:20px!important}.accept-btn-css[_ngcontent-%COMP%]{border-radius:20px!important}[_nghost-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{padding-right:10px!important}.no-records[_ngcontent-%COMP%]{padding:5px 15px;text-align:center;border-left:1px solid #e9ecef;border-right:1px solid #e9ecef;border-bottom:1px solid #e9ecef}.disabled-opa[_ngcontent-%COMP%]{opacity:.4;pointer-events:none!important}.err-msg[_ngcontent-%COMP%]{color:#e72b56}.red-btn[_ngcontent-%COMP%]{background:#e72b56!important}.more-display[_ngcontent-%COMP%]:hover{cursor:pointer}.field-dis-val[_ngcontent-%COMP%]{min-width:170px;font-weight:500;padding:3px}.padding-btm3[_ngcontent-%COMP%]{padding-bottom:12px}.padding-btm1[_ngcontent-%COMP%]{padding-bottom:20px}.pi-exclamation-circle[_ngcontent-%COMP%]{font-size:21px}.modal-title[_ngcontent-%COMP%]{font-weight:600;font-size:16px}.modal-title-delete[_ngcontent-%COMP%]{font-weight:600;font-size:21px}[_nghost-%COMP%]     .p-inputtext:enabled:focus{box-shadow:none!important}.pad-0[_ngcontent-%COMP%]{padding:0}.copy-ip[_ngcontent-%COMP%]{margin-top:10px;font-size:14px;box-shadow:none!important}.pad-tp-10[_ngcontent-%COMP%]{padding-top:10px!important}.pagination-div[_ngcontent-%COMP%]{display:flex;justify-content:end;padding:0 10px}.header-width[_ngcontent-%COMP%]{width:90px}.conn-name-td[_ngcontent-%COMP%]{width:180px}.conn-name[_ngcontent-%COMP%]{padding:5px 10px;width:93%!important}.alation-div[_ngcontent-%COMP%], .conn-name[_ngcontent-%COMP%]{border-radius:20px;color:#fff;font-weight:600;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;display:inline-block}.alation-icon-green[_ngcontent-%COMP%]{color:green}.alation-icon-white[_ngcontent-%COMP%]{color:#fff;visibility:hidden}.conn-failed[_ngcontent-%COMP%]{background-color:#e72b56;opacity:.7}.conn-pass[_ngcontent-%COMP%]{background-color:#56b608}.fa-files-o[_ngcontent-%COMP%], .fa-pencil[_ngcontent-%COMP%]{color:#337ab7}.fa-trash[_ngcontent-%COMP%]{color:#e72b56}.fa-deactivate[_ngcontent-%COMP%]{color:#c32121}.fa-activate[_ngcontent-%COMP%]{color:#181894}.row-ht[_ngcontent-%COMP%]{height:30px}.pd-top-30[_ngcontent-%COMP%]{padding-top:30px}.mr-top-20[_ngcontent-%COMP%]{margin-top:20px}.td-ellipsis[_ngcontent-%COMP%]{word-break:break-all;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.pd-0[_ngcontent-%COMP%]{padding:0}.width-225[_ngcontent-%COMP%]{width:225px}.columnFilterClass[_ngcontent-%COMP%]{z-index:1008;transform-origin:right;top:64.4236px;position:absolute;flex-direction:column;background:#fff;color:#495057;border:0;border-radius:3px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12);min-width:12.5rem}.add-icon[_ngcontent-%COMP%]{height:40px;width:40px}.filterDisplay[_ngcontent-%COMP%]{display:inline-block;z-index:9}.margin-l[_ngcontent-%COMP%]{margin-left:5px;width:30px}.width-100[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .p-datatable .p-datatable-header{padding:.2rem;height:40px;font-size:14px;border-top-right-radius:10px!important;border-top-left-radius:10px!important}.button[_ngcontent-%COMP%]{font-weight:500;background:linear-gradient(180deg,#ff7526,#fb9a64)!important;font-size:13px}.btn-label[_ngcontent-%COMP%], [_nghost-%COMP%]     .submit-btn .p-button-label{width:156px;font-size:14px!important;font-weight:600!important;font-style:normal;font-family:Open Sans;height:40px;color:#fff}[_nghost-%COMP%]     .p-calendar .p-inputtext{box-shadow:none!important}.create-conn-main[_ngcontent-%COMP%]{margin-top:27px;background-color:#fff;border-radius:20px;padding:15px;box-shadow:0 2px 8px 0 rgba(99,99,99,.2)}.form-title[_ngcontent-%COMP%]{font-family:Open_Sans_Semi_Bold;font-size:17px;margin-top:-10px;margin-bottom:5px;padding:10px 0 10px 10px}.br-top[_ngcontent-%COMP%]{border-top:1px solid #eef1f5;padding-top:10px}.form-label[_ngcontent-%COMP%]{font-size:15px;font-weight:600;font-family:Open_Sans_Semi_Bold}.p-field[_ngcontent-%COMP%]{margin:0 10px}.form-field[_ngcontent-%COMP%]{width:100%!important;border-radius:10px!important}[_nghost-%COMP%]     .p-calendar{width:100%!important;border-radius:10px!important;height:35px!important;margin:0!important;box-shadow:none!important}[_nghost-%COMP%]     p-calendar .p-button.p-button-icon-only{width:2.357rem;padding:1.15rem 0!important;display:inline-flex!important}.adjust[_ngcontent-%COMP%]{top:10px}.nav-pills[_ngcontent-%COMP%]{background:#fff;border-bottom:1px solid #dedede;border-radius:8px 8px 0 0}.nav-pills[_ngcontent-%COMP%], .nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{height:50px;position:relative}.nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-right:-1%;margin-top:.1%;top:10px}.nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{position:relative;padding:15px 20px;line-height:19px;color:#717171;font-size:14px;font-weight:700;z-index:1}.nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:transparent;border-color:transparent}.nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{content:"";width:100%;height:50px;position:absolute;bottom:1%;left:-1px;font-size:12px;background:transparent;border:1px solid transparent;z-index:-1}.nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]:before{background:linear-gradient(180deg,transparent,transparent);bottom-border-color:#dedede;font-size:16px;font-family:Open Sans!important;text-align:center;border-radius:8px 8px 0 0}.nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%], .nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]:focus, .nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]:hover{border:1px solid transparent;background:transparent;color:#951447;font-weight:700;z-index:2;-webkit-text-decoration:underline 3px;text-decoration:underline 3px;text-underline-offset:8px}a[_ngcontent-%COMP%]:hover{text-decoration:none}.tab-content[_ngcontent-%COMP%]   .tab-pane[_ngcontent-%COMP%]{box-shadow:0 0 15px #e6e5e5;padding:5px 20px 20px;background:#fff;line-height:22px}.tab-content[_ngcontent-%COMP%]   .tab-pane[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0}.fromstyle[_ngcontent-%COMP%]{padding-left:0;padding-right:30px}.margin-top-10[_ngcontent-%COMP%]{margin-top:10px}.notify-font[_ngcontent-%COMP%]{font-size:15px;color:inherit}#container1[_ngcontent-%COMP%]{width:90%;overflow-x:scroll}.pr-28[_ngcontent-%COMP%]{padding-right:24px}']}),Rt),At=a("ey9i"),Wt=a("J4N/");function qt(t,e){if(1&t){var i=O.kc();O.jc(0,"div",11),O.jc(1,"label",4),O.bd(2),O.ic(),O.ec(3,"br"),O.jc(4,"p-dropdown",12),O.qc("onChange",function(t){return O.Rc(i),O.uc().changeLogListChild(t.value)}),O.ic(),O.ic()}if(2&t){var n=O.uc();O.Nb(2),O.dd(" ",n.otherLogsForm.controls.filePath.value," Logs "),O.Nb(2),O.Bc("styleClass","form-field")("filter",!0)("options",n.newList)("placeholder",n.logPlaceholder)("virtualScroll",!0)("itemSize",30)}}function Tt(t,e){if(1&t){var i=O.kc();O.jc(0,"a",13),O.qc("click",function(){return O.Rc(i),O.uc().refresh()}),O.jc(1,"span",14),O.ec(2,"i",15),O.ic(),O.ic()}}function Zt(t,e){if(1&t){var i=O.kc();O.jc(0,"a",16),O.qc("click",function(){O.Rc(i);var t=O.uc();return t.copyMessage(t.log)}),O.jc(1,"span",17),O.ec(2,"i",18),O.jc(3,"span",19),O.bd(4,"Successfully Copied"),O.ic(),O.ic(),O.ic()}}var Ut,Ht,Jt,$t=[{path:"",component:Et,data:{breadcrumb:"Audit Trail"}},{path:"access-logs",component:Q,data:{breadcrumb:"Access Logs"}},{path:"other-logs",component:(Ut=function(){function t(e,n,o,a){i(this,t),this.accesslog=e,this.fb=n,this.messages=o,this.domainProjService=a,this.log="",this.filePathList=[],this.newList=[],this.newListEnable=!1,this.databuckHome="",this.tomcatHome="",this.logPlaceholder="",this.listOfNumbers=[{number:500},{number:1e3},{number:2e3}]}return o(t,[{key:"ngOnInit",value:function(){var t=this;this.domainProjService.passDomainProjVal(!0),this.otherLogsForm=this.fb.group({filePath:["",s.w.compose([s.w.required])],newfilePath:[""],noOfLines:[500],newChildfilePath:[""]}),this.accesslog.getEnvironmentVariables().subscribe(function(e){"success"==e.status&&(t.databuckHome=e.result.databuckHome,t.tomcatHome=e.result.tomcatHome,t.accesslog.getLogsList({logFolderPath:t.databuckHome+"/logs"}).subscribe(function(e){t.filePathList=e.result,t.filePathList.push({name:"databucklogs.log",isDirectory:!1}),t.filePathList.push({name:"databuckerror.log",isDirectory:!1})}))})}},{key:"changeLogList",value:function(t){var e=this;if(this.event1=t,""==t)this.messages.displayToaster("Please select Databuck Logs","warn","Warning!");else if(this.log="","databucklogs.log"==t||"databuckerror.log"==t)this.accesslog.readLogFileDataByPath({logFilePath:this.tomcatHome+"/logs/"+t,noOfLines:this.otherLogsForm.value.noOfLines}).subscribe(function(t){e.newListEnable=!1,e.log=t.result});else{this.otherLogsForm.controls.newfilePath.setValue("");var i=this.filePathList.filter(function(e){return e.name==t});this.logFolderPath=this.databuckHome+"/logs/"+i[0].name,i[0].isDirectory?this.accesslog.getLogsList({logFolderPath:this.logFolderPath}).subscribe(function(t){e.newList=t.result,e.newListEnable=!0,e.logPlaceholder="Select "+e.otherLogsForm.controls.filePath.value+" Logs"}):(this.otherLogsForm.controls.newfilePath.setValue(""),this.accesslog.readLogFileDataByPath({logFilePath:this.logFolderPath,noOfLines:this.otherLogsForm.value.noOfLines}).subscribe(function(t){e.newListEnable=!1,e.log=t.result}))}}},{key:"changeLogListChild",value:function(t){var e=this;this.event2=t;var i=this.newList.filter(function(e){return e.name==t}),n=this.logFolderPath+"/"+i[0].name;i[0].isDirectory?this.accesslog.getLogsList({logFolderPath:n}).subscribe(function(t){e.newChildList=t.result,e.newChildListEnable=!0}):this.accesslog.readLogFileDataByPath({logFilePath:n,noOfLines:this.otherLogsForm.value.noOfLines}).subscribe(function(t){e.newChildListEnable=!1,e.log=t.result})}},{key:"changeLineNumber",value:function(){this.newListEnable?this.changeLogListChild(this.otherLogsForm.value.newfilePath):this.changeLogList(this.otherLogsForm.value.filePath)}},{key:"copyMessage",value:function(t){navigator.clipboard.writeText(t).then().catch(function(t){return console.log(t)})}},{key:"refresh",value:function(){"databucklogs.log"==this.event1||"databuckerror.log"==this.event1?this.changeLogList(this.event1):(this.changeLogList(this.event1),this.changeLogListChild(this.event2),this.otherLogsForm.controls.newfilePath.setValue(this.event2))}}]),t}(),Ut.\u0275fac=function(t){return new(t||Ut)(O.dc(k.a),O.dc(s.e),O.dc(At.b),O.dc(Wt.a))},Ut.\u0275cmp=O.Xb({type:Ut,selectors:[["app-other-logs"]],decls:20,vars:15,consts:[[1,"content-wrapper","top"],[1,"container-fluid","create-conn-main","margin-top-27",3,"formGroup"],[1,"row","p-field"],[1,"col-sm-12","col-md-6"],["for","rule_category",1,"form-label"],["formControlName","noOfLines","placeholder","Select Number of Lines","optionValue","number","optionLabel","number",1,"newheight",3,"styleClass","filter","options","virtualScroll","itemSize","onChange"],["formControlName","filePath","placeholder","Select DataBuck Logs","optionValue","name","optionLabel","name",3,"styleClass","filter","options","virtualScroll","itemSize","onChange"],["class","col-sm-12 col-md-6 mr-top",4,"ngIf"],[1,"div_css"],["class","advance_tab cursor-pointer form-label position","value","Refresh","title","Refresh",3,"click",4,"ngIf"],["class","advance_tab cursor-pointer form-label position","value","Copy","title","Copy",3,"click",4,"ngIf"],[1,"col-sm-12","col-md-6","mr-top"],["formControlName","newfilePath","optionValue","name","optionLabel","name",3,"styleClass","filter","options","placeholder","virtualScroll","itemSize","onChange"],["value","Refresh","title","Refresh",1,"advance_tab","cursor-pointer","form-label","position",3,"click"],[1,"back_btn_refresh"],[1,"fa","fa-refresh"],["value","Copy","title","Copy",1,"advance_tab","cursor-pointer","form-label","position",3,"click"],[1,"back_btn"],[1,"fa","fa-files-o"],["id","snackbar"]],template:function(t,e){1&t&&(O.jc(0,"div",0),O.ec(1,"app-main-header"),O.jc(2,"div",1),O.jc(3,"div",2),O.jc(4,"div",3),O.jc(5,"label",4),O.bd(6,"No of Lines"),O.ic(),O.ec(7,"br"),O.jc(8,"p-dropdown",5),O.qc("onChange",function(){return e.changeLineNumber()}),O.ic(),O.ic(),O.jc(9,"div",3),O.jc(10,"label",4),O.bd(11,"DataBuck Logs"),O.ic(),O.ec(12,"br"),O.jc(13,"p-dropdown",6),O.qc("onChange",function(t){return e.changeLogList(t.value)}),O.ic(),O.ic(),O.Zc(14,qt,5,7,"div",7),O.ic(),O.jc(15,"div",8),O.Zc(16,Tt,3,0,"a",9),O.Zc(17,Zt,5,0,"a",10),O.ec(18,"br"),O.bd(19),O.ic(),O.ic(),O.ic()),2&t&&(O.Nb(2),O.Bc("formGroup",e.otherLogsForm),O.Nb(6),O.Bc("styleClass","form-field")("filter",!0)("options",e.listOfNumbers)("virtualScroll",!0)("itemSize",30),O.Nb(5),O.Bc("styleClass","form-field")("filter",!0)("options",e.filePathList)("virtualScroll",!0)("itemSize",30),O.Nb(1),O.Bc("ngIf",e.newListEnable),O.Nb(2),O.Bc("ngIf",e.log.length>0),O.Nb(1),O.Bc("ngIf",e.log.length>0),O.Nb(2),O.dd(" ",e.log," "))},directives:[D.a,s.p,s.i,F.a,s.o,s.g,r.n],styles:[".create-conn-main[_ngcontent-%COMP%]{margin-top:27px;background-color:#fff;border-radius:20px;padding:15px;box-shadow:0 2px 8px 0 rgba(99,99,99,.2);font-family:Open Sans!important}.div_css[_ngcontent-%COMP%]{height:500px;width:100%;background:#faebd7;border:5px solid wheat;margin-top:15px;min-height:100px;overflow-y:scroll;padding:10px;white-space:pre-line}.back_btn[_ngcontent-%COMP%]{padding:3px}.back_btn[_ngcontent-%COMP%], .back_btn_refresh[_ngcontent-%COMP%]{background:none!important;border-radius:5px}.back_btn_refresh[_ngcontent-%COMP%]{padding:30px;color:#630061!important}.fa-files-o[_ngcontent-%COMP%]{color:#630061}.position[_ngcontent-%COMP%]{position:absolute;right:70px}.mr-top[_ngcontent-%COMP%]{padding-top:15px}#snackbar[_ngcontent-%COMP%]{visibility:hidden;color:#fff;background-color:#333;min-width:250px;margin-left:-125px;border-radius:2px;padding:16px;text-align:center;left:50%;bottom:30px;z-index:1;position:fixed}#snackbar.show[_ngcontent-%COMP%]{visibility:visible;animation:fadein .5s,fadeout .5s 2.5s}@keyframes fadein{0%{bottom:0;opacity:0}to{bottom:30px;opacity:1}}@keyframes fadeout{0%{bottom:30px;opacity:1}to{bottom:0;opacity:0}}"]}),Ut),data:{breadcrumb:"Logs"}}],Yt=((Jt=o(function t(){i(this,t)})).\u0275fac=function(t){return new(t||Jt)},Jt.\u0275mod=O.bc({type:Jt}),Jt.\u0275inj=O.ac({imports:[[u.l.forChild($t)],u.l]}),Jt),Gt=((Ht=o(function t(){i(this,t)})).\u0275fac=function(t){return new(t||Ht)},Ht.\u0275mod=O.bc({type:Ht}),Ht.\u0275inj=O.ac({imports:[[r.b,Yt,l.a,s.j,g.a,d.a,c.b]]}),Ht)}}])}();