(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{"lYC+":function(t,e,i){"use strict";i.r(e),i.d(e,"DatabuckLogsModule",function(){return Wt});var n=i("ofXK"),o=i("3Pt+"),s=i("6t4m"),a=i("VEwP"),c=i("ThbA"),l=i("PCNd"),r=i("tyNb"),d=i("Iab2"),g=i("Z2oo"),p=i.n(g),h=i("Tm3k"),u=i.n(h),f=i("7rT8"),m=i.n(f),b=i("DaQG"),C=i.n(b),P=i("i680"),x=i("fXoL"),O=i("kH6v"),w=i("JqCM"),v=i("7zfz"),y=i("K3ix"),L=i("INLy"),_=i("E+E9"),M=i("jIHw"),D=i("rEr+"),k=i("guv5"),S=i("arFO"),N=i("Ji6n");function j(t,e){1&t&&(x.jc(0,"div",20),x.ec(1,"span",21),x.ic())}function F(t,e){if(1&t){const t=x.kc();x.jc(0,"th"),x.bd(1),x.ec(2,"br"),x.ec(3,"p-sortIcon",25),x.jc(4,"app-column-filter",26),x.qc("filterData",function(e){return x.Rc(t),x.uc(3).getFilterData(e)})("resetFilterValues",function(e){return x.Rc(t),x.uc(3).resetFilter(e)}),x.ic(),x.jc(5,"span",27),x.jc(6,"i",28),x.qc("click",function(){x.Rc(t);const e=x.uc().$implicit;return x.uc(2).onFilterClick(e.originalValue)}),x.ic(),x.ic(),x.ic()}if(2&t){const t=x.uc().$implicit,e=x.uc(2);x.Nb(1),x.dd(" ",t.displayValue,""),x.Nb(2),x.Cc("field",t.originalValue),x.Cc("pSortableColumn",t.originalValue),x.Nb(1),x.Bc("colFilterData",e.getFilterState(t.originalValue))("display",e.displayFiltersFor[t.originalValue])("customId",t.originalValue)("fieldName",t.originalValue),x.Nb(1),x.Bc("ngClass",e.filterColumnNameWithHighlightName(t.originalValue)?"selected-filter-column":""),x.Nb(1),x.Bc("ngClass",e.filterColumnNameWithHighlightName(t.originalValue)?"pi pi-filter-fill":"pi pi-filter")}}function I(t,e){if(1&t&&(x.hc(0),x.Zc(1,F,7,9,"th",24),x.gc()),2&t){const t=e.$implicit;x.Nb(1),x.Bc("ngIf",t.isSelected)}}function z(t,e){if(1&t&&(x.jc(0,"tr",22),x.Zc(1,I,2,1,"ng-container",23),x.ic()),2&t){const t=x.uc();x.Nb(1),x.Bc("ngForOf",t.customizeCols)}}function V(t,e){if(1&t&&(x.jc(0,"td",31),x.jc(1,"span"),x.bd(2),x.ic(),x.ic()),2&t){const t=x.uc().$implicit,e=x.uc().$implicit;x.Bc("title",e[t.originalValue]),x.Nb(2),x.cd(e[t.originalValue])}}function R(t,e){if(1&t&&(x.hc(0),x.Zc(1,V,3,2,"td",30),x.gc()),2&t){const t=e.$implicit;x.Nb(1),x.Bc("ngIf",t.isSelected)}}function B(t,e){if(1&t&&(x.jc(0,"tr",29),x.Zc(1,R,2,1,"ng-container",23),x.ic()),2&t){const t=x.uc();x.Nb(1),x.Bc("ngForOf",t.customizeCols)}}function E(t,e){1&t&&(x.jc(0,"div",32),x.bd(1," No records found "),x.ic())}function W(t,e){if(1&t){const t=x.kc();x.jc(0,"div",33),x.jc(1,"p-paginator",34,35),x.qc("onPageChange",function(e){return x.Rc(t),x.uc().onPageChange(e)})("firstChange",function(e){return x.Rc(t),x.uc().first=e}),x.ic(),x.ic()}if(2&t){const t=x.uc();x.Nb(1),x.Bc("rows",10)("totalRecords",t.userLists.length)("showCurrentPageReport",!0)("first",t.first)}}function A(t,e){if(1&t&&(x.jc(0,"div",40),x.jc(1,"div"),x.bd(2),x.ic(),x.ic()),2&t){const t=x.uc(3);x.Nb(2),x.ed("Page ",t.selectedPage.page," of ",t.totalNumOfPages,"")}}function q(t,e){if(1&t&&x.Zc(0,A,3,2,"div",39),2&t){const t=x.uc(2);x.Bc("ngIf",t.selectedPage)}}function T(t,e){if(1&t){const t=x.kc();x.jc(0,"div",36),x.jc(1,"p-dropdown",37),x.qc("ngModelChange",function(e){return x.Rc(t),x.uc().selectedPage=e})("onChange",function(e){return x.Rc(t),x.uc().onPageNumChange(e)}),x.Zc(2,q,1,1,"ng-template",38),x.ic(),x.ic()}if(2&t){const t=x.uc();x.Nb(1),x.Bc("options",t.numOfPages)("filter",!0)("ngModel",t.selectedPage)}}function Z(t,e){if(1&t){const t=x.kc();x.hc(0),x.jc(1,"div",54),x.jc(2,"table"),x.jc(3,"tr",55),x.jc(4,"td"),x.jc(5,"p-checkbox",56),x.qc("ngModelChange",function(t){return e.$implicit.pdfCols=t})("onChange",function(){return x.Rc(t),x.uc(2).pdfColsValue()}),x.ic(),x.ic(),x.jc(6,"td"),x.jc(7,"label"),x.bd(8),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.gc()}if(2&t){const t=e.$implicit,i=x.uc(2);x.Nb(5),x.Bc("ngModel",t.pdfCols)("disabled",i.pdfCheckboxDisabled&&!t.pdfCols),x.Nb(3),x.cd(t.displayValue)}}function U(t,e){1&t&&(x.jc(0,"div",57),x.bd(1,"You can select up to 9 columns."),x.ic())}function H(t,e){if(1&t){const t=x.kc();x.jc(0,"div",41),x.jc(1,"span",42),x.bd(2,"Please select columns that need to be downloaded in PDF"),x.ic(),x.ic(),x.jc(3,"div",43),x.jc(4,"div",44),x.Zc(5,Z,9,3,"ng-container",23),x.ic(),x.ic(),x.jc(6,"div",45),x.jc(7,"div",46),x.jc(8,"div",47),x.Zc(9,U,2,0,"div",48),x.ic(),x.jc(10,"div",49),x.jc(11,"button",50),x.qc("click",function(){x.Rc(t);const e=x.uc();return e.exportPdf(),e.modalRef.hide()}),x.ic(),x.ic(),x.jc(12,"div",51),x.jc(13,"div"),x.jc(14,"label",52),x.qc("click",function(){return x.Rc(t),x.uc().closeExportPdf()}),x.bd(15,"Close"),x.ic(),x.jc(16,"img",53),x.qc("click",function(){return x.Rc(t),x.uc().closeExportPdf()}),x.ic(),x.ic(),x.ic(),x.ic(),x.ic()}if(2&t){const t=x.uc();x.Nb(5),x.Bc("ngForOf",t.customizeCols),x.Nb(4),x.Bc("ngIf",t.pdfCheckboxDisabled),x.Nb(2),x.Bc("disabled",t.disableDownloadBtn)}}const J=function(){return{width:"100%"}};p.a.vfs=u.a.pdfMake.vfs;let $=(()=>{class t{constructor(t,e,i,n,o,s,a){this.userSettingsService=t,this.spinner=e,this.filterService=i,this.datePipe=n,this.modalService=o,this.router=s,this.accesslog=a,this.projectNames=[],this.userLists=[],this.mainUsersList=[],this.pageWiseUsers=[],this.display=!1,this.deleteModal=!1,this.deleteRoleObj={},this.first=0,this.numOfPages=[{page:0,pageIndex:0}],this.selectedPage={page:0,pageIndex:0},this.pageSize=9,this.totalNumOfPages=0,this.checkboxDisabled=!1,this.maxCount=4,this.displayFiltersFor={user_name:!1,databuck_feature:!1,activity_log_time:!1,access_url:!1},this.pdfData=[],this.pdfCheckCount=0,this.pdfCheckboxDisabled=!1,this.disableDownloadBtn=!0,this.customizeCols=[{displayValue:"User",originalValue:"user_name",isSelected:!0,necessaryCol:!0,alwaysSelected:!0},{displayValue:"Activity",originalValue:"databuck_feature",isSelected:!0,necessaryCol:!0,alwaysSelected:!0},{displayValue:"Date Time",originalValue:"activity_log_time",isSelected:!0,necessaryCol:!0,alwaysSelected:!0},{displayValue:"Application URL",originalValue:"access_url",isSelected:!0,necessaryCol:!0,alwaysSelected:!0}],this.selectedProjId=JSON.parse(sessionStorage.getItem("activeProjectId")),this.columnFilter={},this.scrollHt="500px",this.filterData={},this.selectedRowData={},this.norecordfound=!1}ngOnInit(){var t;this.fromDate=new Date(sessionStorage.getItem("fromDate")),this.toDate=new Date(sessionStorage.getItem("toDate")),this.getRoleList(),sessionStorage.getItem("modulePerRole")&&(this.roleModule=JSON.parse(sessionStorage.getItem("modulePerRole"))),this.roleModule.length>0&&(null===(t=this.roleModule)||void 0===t||t.map(t=>{t.accessControl=t.accessControl.split("-")}))}roleOnModule(t){return this.roleModule.find(e=>e.moduleName===t)}capture(){if(this.pageWiseUsers.length){this.spinner.show(),this.scrollHt="1500px";const t="AccessLogs.pdf";setTimeout(()=>{m()(document.querySelector("#view_user_list"),{height:1200}).then(e=>{try{e.toBlob(e=>{const i=new FileReader;i.readAsDataURL(e),i.onloadend=()=>{p.a.createPdf({footer:{columns:[{text:"Created by FirstEigen",alignment:"right",style:"footerSection"}]},content:[{text:"Access Logs",alignment:"center",margin:[0,5,0,5]},{image:i.result,width:500,alignment:"left"}],styles:{sectionHeader:{bold:!0,decoration:"underline",fontSize:14,margin:[0,5,0,5]},textStyle:{bold:!1,fontSize:9,margin:[0,5,0,5]},footerSection:{fontSize:7,margin:[5,7,7,5]}}}).download(t),this.scrollHt="500px",this.spinner.hide()}})}catch(i){this.spinner.hide()}})},2e3)}}openExportPdf(t){this.modalRef=this.modalService.show(t,{class:"gray modal-lg",backdrop:"static",keyboard:!1})}closeExportPdf(){this.modalRef.hide(),setTimeout(()=>{this.pdfCheckCount=0,this.pdfCheckboxDisabled=!1,this.disableDownloadBtn=!0,this.customizeCols.forEach(t=>t.pdfCols=!1)},1e3)}exportPdf(){this.pdfData.length&&(this.spinner.show(),setTimeout(()=>{const t=new P.default("l","pt"),e=this.customizeCols.filter(t=>t.pdfCols),i=[];e.forEach(t=>i.push(t.displayValue));const n=[];e.forEach(t=>n.push(t.originalValue));let o=[];o=this.pdfData.map(t=>Object.assign(n.map(e=>t[e])));const s=t.internal.pageSize,a=s.height?s.height:s.getHeight();C()(t,{columns:i,body:o,didDrawPage:e=>{1==e.pageNumber&&(t.text("Access Logs",t.internal.pageSize.width/2,25,null,"center"),t.setFontSize(10)),t.setFontSize(9),t.text("Created by FirstEigen",t.internal.pageSize.width-40,a-30,null,"right")},startY:80,styles:{fontSize:8,cellWidth:"auto",lineColor:[0,0,0],lineWidth:.2,minCellWidth:80,cellPadding:{top:2,right:4,bottom:2,left:4}},columnStyles:{}}),t.save("Access Logs.pdf"),this.disableDownloadBtn=!0,this.pdfCheckboxDisabled=!1,e.forEach(t=>t.pdfCols=!1),this.spinner.hide()},2e3))}pdfColsValue(){this.pdfCheckCount=0,this.customizeCols.filter(t=>!0===t.pdfCols).forEach(t=>{!0===t.pdfCols&&this.pdfCheckCount++}),this.disableDownloadBtn=0==this.pdfCheckCount,this.pdfCheckboxDisabled=9==this.pdfCheckCount}downloadCSV(){const t=new Date(this.fromDate),e=new Date(this.toDate);this.datePipe.transform(t,"yyyy-MM-dd"),this.datePipe.transform(e,"yyyy-MM-dd"),this.userSettingsService.downloadUserCSV("accessLogCSV").subscribe(t=>{const e=this.datePipe.transform(new Date,"yyyy-MM-dd");Object(d.saveAs)(t,"Access_Logs_"+e+".csv")})}onFilterClick(t){Object.keys(this.displayFiltersFor).map(e=>{this.displayFiltersFor[e]=e===t})}checkValue(){this.checkCount=0,this.customizeCols.filter(t=>!1===t.necessaryCol).forEach(t=>{!0===t.isSelected&&this.checkCount++}),this.checkboxDisabled=this.checkCount>=this.maxCount}showMoreCols(){return this.customizeCols.filter(t=>!t.necessaryCol&&t.isSelected).length<this.customizeCols.length}openOtherField(t,e){this.selectedRowData={},this.selectedRowData=e,this.modalRef=this.modalService.show(t,{class:"gray modal-lg",backdrop:"static",keyboard:!1})}clearLogs(){this.accesslog.clearLog("clearAccesslog").subscribe(t=>{"success"===t.status&&this.getRoleList()})}getRoleList(){this.spinner.show(),this.accesslog.accessLog("accessLog").subscribe(t=>{if("success"===t.status){this.spinner.hide(),this.spinner.hide()&&(this.norecordfound=!0),t.result=t.result.filter(t=>null!==t.access_url),this.mainUsersList=[...t.result],this.userLists=[...this.mainUsersList],this.pdfData=[...this.mainUsersList];const e=this.first+this.pageSize,i=this.userLists.filter((t,i)=>i<=e);this.pageWiseUsers=[...i],this.calculateNumOfPages(),this.checkCount=0,this.customizeCols.filter(t=>!1===t.necessaryCol).forEach(t=>{!0===t.isSelected&&this.checkCount++}),this.checkboxDisabled=this.checkCount>=this.maxCount}else this.mainUsersList=[],this.userLists=[],this.pageWiseUsers=[]})}calculateNumOfPages(){if(this.totalNumOfPages=this.mainUsersList.length?this.mainUsersList.length<this.pageSize?1:Math.ceil(this.mainUsersList.length/(this.pageSize+1)):0,this.numOfPages=[],this.selectedPage={},0===this.totalNumOfPages)this.numOfPages.push({pageIndex:0,page:0}),this.selectedPage={pageIndex:0,page:0};else if(1===this.totalNumOfPages)this.numOfPages.push({pageIndex:0,page:1}),this.selectedPage={pageIndex:0,page:1};else{this.selectedPage={pageIndex:0,page:1};for(let t=0;t<this.totalNumOfPages;t++)this.numOfPages.push({pageIndex:t,page:t+1})}}onPageChange(t){this.first=t.first;const e=this.getSortedData(),i=this.first+this.pageSize,n=e.filter((t,e)=>{if(e<=i&&e>=this.first)return t});this.selectedPage={pageIndex:t.page,page:t.page+1},this.pageWiseUsers=[...n]}onPageNumChange(t){this.selectedPage={page:t.value.page,pageIndex:t.value.pageIndex},this.first=1===t.value.page?0:10*(t.value.page-1);const e=this.getSortedData(),i=this.first+this.pageSize,n=e.filter((t,e)=>{if(e<=i&&e>=this.first)return t});this.pageWiseUsers=[...n]}getSortedData(){const t=[...this.userLists];return this.sortOrderEvent?1===this.sortOrderEvent.order?(t.sort((t,e)=>t[this.sortOrderEvent.field]>e[this.sortOrderEvent.field]?1:e[this.sortOrderEvent.field]>t[this.sortOrderEvent.field]?-1:0),t):(t.sort((t,e)=>t[this.sortOrderEvent.field]>e[this.sortOrderEvent.field]?-1:e[this.sortOrderEvent.field]>t[this.sortOrderEvent.field]?1:0),t):t}deleteRole(t){this.deleteModal=!0,this.deleteRoleObj=t}deleteConfirm(){this.deleteModal=!1,this.userSettingsService.deleteRole({idRole:this.deleteRoleObj.idRole}).subscribe(t=>{"success"===t.status&&(this.getRoleList(),this.deleteRoleObj={})})}customSort(t){const e=parseInt((this.first/(this.pageSize+1)).toString(),10);this.selectedPage.page=e+1,this.selectedPage.pageIndex=e,this.sortOrderEvent=t;const i=[...this.userLists];i.sort(1===this.sortOrderEvent.order?(e,i)=>e[t.field]>i[t.field]?1:i[t.field]>e[t.field]?-1:0:(e,i)=>e[t.field]>i[t.field]?-1:i[t.field]>e[t.field]?1:0);const n=this.first+this.pageSize,o=i.filter((t,e)=>{if(e<=n&&e>=this.first)return t});this.pageWiseUsers=[...o]}getFilterData(t){this.columnFilter[t[0]]=t[1],this.filterData=JSON.parse(JSON.stringify(this.columnFilter));const e=Object.keys(this.columnFilter);this.displayFiltersFor[t[0]]=!1,this.first=0,this.userLists=[...this.mainUsersList],e.forEach(t=>{this.userLists=this.userLists.filter(e=>this.filterService.filters.contains(e[t],this.columnFilter[t]))}),this.setPageNumber()}resetFilter(t){this.columnFilter[t]=null,delete this.columnFilter[t],this.filterData=JSON.parse(JSON.stringify(this.columnFilter));const e=Object.keys(this.columnFilter);this.displayFiltersFor[t]=!1,this.first=0,this.userLists=[...this.mainUsersList],e.forEach(t=>{this.userLists=this.userLists.filter(e=>this.filterService.filters.contains(e[t],this.columnFilter[t]))}),this.setPageNumber()}setPageNumber(){if(this.totalNumOfPages=this.userLists.length?this.userLists.length<this.pageSize?1:Math.ceil(this.userLists.length/(this.pageSize+1)):0,this.numOfPages=[],this.selectedPage={},0===this.totalNumOfPages)this.numOfPages.push({pageIndex:0,page:0}),this.selectedPage={pageIndex:0,page:0};else if(1===this.totalNumOfPages)this.numOfPages.push({pageIndex:0,page:1}),this.selectedPage={pageIndex:0,page:1};else{this.selectedPage={pageIndex:0,page:1};for(let t=0;t<this.totalNumOfPages;t++)this.numOfPages.push({pageIndex:t,page:t+1})}const t=this.first+this.pageSize,e=this.userLists.filter((e,i)=>i<=t);this.pageWiseUsers=[...e]}getFilterState(t){if(this.filterData!=={}&&null!=this.filterData&&""!==this.filterData){if(this.filterData[t]){const e=this.filterData[t];return delete this.filterData[t],{fieldName:t,filterWith:e}}return{fieldName:"",filterWith:""}}return{fieldName:"",filterWith:""}}filterColumnNameWithHighlightName(t){return!(Object.keys(this.columnFilter).findIndex(e=>e===t)<0)}}return t.\u0275fac=function(e){return new(e||t)(x.dc(O.a),x.dc(w.c),x.dc(v.d),x.dc(n.d),x.dc(y.a),x.dc(r.i),x.dc(L.a))},t.\u0275cmp=x.Xb({type:t,selectors:[["app-access-logs"]],decls:25,vars:24,consts:[[1,"content-wrapper","top"],[1,"container-fluid","create-conn-main"],[1,"row"],[1,"col-sm-6","col-md-6"],[1,"form-title"],["pButton","","type","button","label","Clear Logs",1,"button","w-button","shadow","btn-mr-rt",3,"ngClass","click"],["src","assets/images/csv_icon.png","title","Download CSV","loading","lazy","alt","Download CSV",1,"download_btn_css","image-7",3,"click"],["src","assets/images/pdf_icon.jpg","title","Download PDF","loading","lazy","alt","Download PDF",1,"download_btn_css","image-7",3,"click"],[1,"row","p-field"],["id","view_user_list",1,"col-sm-12","mr-top-20","pd-0"],["view_user_list",""],["styleClass","p-datatable-gridlines p-datatable-striped","responsiveLayout","scroll","sortMode","single",3,"value","responsive","rowHover","sortField","sortOrder","pageLinks","filterDelay","resetPageOnSort","rows","first","customSort","firstChange","sortFunction"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["class","col-sm-12 no-records default-font-14-weight",4,"ngIf"],[1,"col-sm-12","pagination-div"],["class","pad-0",4,"ngIf"],["class","pad-0 pad-tp-10 text-right",4,"ngIf"],["exportPdfTemplate",""],[1,"table-header"],[1,"float-right"],[1,"header"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"field","pSortableColumn"],[3,"colFilterData","display","customId","fieldName","filterData","resetFilterValues"],[1,"columnFilter",3,"ngClass"],[1,"pi-filter-color",3,"ngClass","click"],[1,"row-ht"],["class","text-center word_break_word_all td-ellipsis",3,"title",4,"ngIf"],[1,"text-center","word_break_word_all","td-ellipsis",3,"title"],[1,"col-sm-12","no-records","default-font-14-weight"],[1,"pad-0"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"rows","totalRecords","showCurrentPageReport","first","onPageChange","firstChange"],["dq_paginator",""],[1,"pad-0","pad-tp-10","text-right"],["optionLabel","page","placeholder","Go to page",3,"options","filter","ngModel","ngModelChange","onChange"],["pTemplate","selectedItem"],["class","drpdwn-item",4,"ngIf"],[1,"drpdwn-item"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","pdf-modal"],[1,"row","padding-btm"],[1,"modal-footer"],[1,"row","full-width"],[1,"col-lg-4"],["class","color-code",4,"ngIf"],[1,"col-lg-4","text-center"],["pButton","","type","button","label","Download",1,"button","w-button","shadow","btn-mr-rt","submit-btn",3,"disabled","click"],[1,"col-lg-4","arrow-text-right"],[1,"cursor-pointer",3,"click"],["src","assets/images/close.png",1,"margin-img","cursor-pointer",3,"click"],[1,"col-sm-4"],[1,"validations"],["binary","true","name","groupname1","value","customizeCols[cols.displayValue]",3,"ngModel","disabled","ngModelChange","onChange"],[1,"color-code"]],template:function(t,e){if(1&t){const t=x.kc();x.jc(0,"div",0),x.ec(1,"app-main-header"),x.jc(2,"div",1),x.jc(3,"div",2),x.jc(4,"div",3),x.jc(5,"p",4),x.jc(6,"button",5),x.qc("click",function(){return e.clearLogs()}),x.ic(),x.ic(),x.ic(),x.jc(7,"div",3),x.jc(8,"a"),x.jc(9,"img",6),x.qc("click",function(){return e.downloadCSV()}),x.ic(),x.ic(),x.jc(10,"a"),x.jc(11,"img",7),x.qc("click",function(){x.Rc(t);const i=x.Oc(24);return e.openExportPdf(i)}),x.ic(),x.ic(),x.ic(),x.ic(),x.jc(12,"div",8),x.jc(13,"div",9,10),x.jc(15,"p-table",11),x.qc("firstChange",function(t){return e.first=t})("sortFunction",function(t){return e.customSort(t)}),x.Zc(16,j,2,0,"ng-template",12),x.Zc(17,z,2,1,"ng-template",13),x.Zc(18,B,2,1,"ng-template",14),x.ic(),x.ic(),x.Zc(19,E,2,0,"div",15),x.jc(20,"div",16),x.Zc(21,W,3,4,"div",17),x.Zc(22,T,3,3,"div",18),x.ic(),x.ic(),x.ic(),x.Zc(23,H,17,3,"ng-template",null,19,x.ad),x.ic()}if(2&t){let t=null;x.Nb(6),x.Bc("ngClass",null!=(t=e.roleOnModule("User Settings"))&&null!=t.accessControl&&t.accessControl.includes("D")?" cursor-pointer":"disable"),x.Nb(2),x.Rb("w-inline-block cursor-pointer float-right ",null!=e.pageWiseUsers&&e.pageWiseUsers.length?"":"disabled-opa",""),x.Nb(2),x.Rb("w-inline-block cursor-pointer float-right ",null!=e.pageWiseUsers&&e.pageWiseUsers.length?"":"disabled-opa",""),x.Nb(5),x.Vc(x.Ec(23,J)),x.Bc("value",e.pageWiseUsers)("responsive",!0)("rowHover",!0)("sortField","user_name")("sortOrder",-1)("pageLinks",5)("filterDelay",0)("resetPageOnSort",!0)("rows",10)("first",e.first)("customSort",!0),x.Nb(4),x.Bc("ngIf",!e.pageWiseUsers.length&&e.norecordfound),x.Nb(2),x.Bc("ngIf",e.pageWiseUsers.length),x.Nb(1),x.Bc("ngIf",e.pageWiseUsers.length)}},directives:[_.a,M.b,n.l,D.f,v.i,n.n,n.m,D.d,D.e,k.a,s.a,S.a,o.o,o.r,N.a],styles:["[_nghost-%COMP%]     .p-confirm-dialog-accept{border-radius:20px!important}.accept-btn-css[_ngcontent-%COMP%]{border-radius:20px!important}[_nghost-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{padding-right:10px!important}.no-records[_ngcontent-%COMP%]{padding:5px 15px;text-align:center;border-left:1px solid #e9ecef;border-right:1px solid #e9ecef;border-bottom:1px solid #e9ecef}.disabled-opa[_ngcontent-%COMP%]{opacity:.4;pointer-events:none!important}.err-msg[_ngcontent-%COMP%]{color:#e72b56}.red-btn[_ngcontent-%COMP%]{background:#e72b56!important}.more-display[_ngcontent-%COMP%]:hover{cursor:pointer}.field-dis-val[_ngcontent-%COMP%]{min-width:170px;font-weight:500;padding:3px}.padding-btm3[_ngcontent-%COMP%]{padding-bottom:12px}.padding-btm1[_ngcontent-%COMP%]{padding-bottom:20px}.pi-exclamation-circle[_ngcontent-%COMP%]{font-size:21px}.modal-title[_ngcontent-%COMP%]{font-weight:600;font-size:16px}.modal-title-delete[_ngcontent-%COMP%]{font-weight:600;font-size:21px}[_nghost-%COMP%]     .p-inputtext:enabled:focus{box-shadow:none!important}.pad-0[_ngcontent-%COMP%]{padding:0}.copy-ip[_ngcontent-%COMP%]{margin-top:10px;font-size:14px;box-shadow:none!important}.pad-tp-10[_ngcontent-%COMP%]{padding-top:10px!important}.pagination-div[_ngcontent-%COMP%]{display:flex;justify-content:end;padding:0 10px}.header-width[_ngcontent-%COMP%]{width:90px}.conn-name-td[_ngcontent-%COMP%]{width:180px}.conn-name[_ngcontent-%COMP%]{padding:5px 10px;width:93%!important}.alation-div[_ngcontent-%COMP%], .conn-name[_ngcontent-%COMP%]{border-radius:20px;color:#fff;font-weight:600;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;display:inline-block}.alation-icon-green[_ngcontent-%COMP%]{color:green}.alation-icon-white[_ngcontent-%COMP%]{color:#fff;visibility:hidden}.conn-failed[_ngcontent-%COMP%]{background-color:#e72b56;opacity:.7}.conn-pass[_ngcontent-%COMP%]{background-color:#56b608}.fa-files-o[_ngcontent-%COMP%], .fa-pencil[_ngcontent-%COMP%]{color:#337ab7}.fa-trash[_ngcontent-%COMP%]{color:#e72b56}.fa-deactivate[_ngcontent-%COMP%]{color:#c32121}.fa-activate[_ngcontent-%COMP%]{color:#181894}.row-ht[_ngcontent-%COMP%]{height:30px}.pd-top-30[_ngcontent-%COMP%]{padding-top:30px}.mr-top-20[_ngcontent-%COMP%]{margin-top:20px}.td-ellipsis[_ngcontent-%COMP%]{word-break:break-all;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.pd-0[_ngcontent-%COMP%]{padding:0}.width-225[_ngcontent-%COMP%]{width:225px}.columnFilterClass[_ngcontent-%COMP%]{z-index:1008;transform-origin:right;top:64.4236px;position:absolute;flex-direction:column;background:#fff;color:#495057;border:0;border-radius:3px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12);min-width:12.5rem}.add-icon[_ngcontent-%COMP%]{height:40px;width:40px}.filterDisplay[_ngcontent-%COMP%]{display:inline-block;z-index:9}.margin-l[_ngcontent-%COMP%]{margin-left:5px;width:30px}.width-100[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .p-datatable .p-datatable-header{padding:.2rem;height:40px;font-size:14px;border-top-right-radius:10px!important;border-top-left-radius:10px!important}.button[_ngcontent-%COMP%]{font-weight:500;background:linear-gradient(180deg,#ff7526,#fb9a64)!important;font-size:13px}.btn-label[_ngcontent-%COMP%], [_nghost-%COMP%]     .submit-btn .p-button-label{width:156px;font-size:14px!important;font-weight:600!important;font-style:normal;font-family:Open Sans;height:40px;color:#fff}[_nghost-%COMP%]     .p-calendar .p-inputtext{box-shadow:none!important}.create-conn-main[_ngcontent-%COMP%]{margin-top:27px;background-color:#fff;border-radius:20px;padding:15px;box-shadow:0 2px 8px 0 rgba(99,99,99,.2)}.form-title[_ngcontent-%COMP%]{font-family:Open_Sans_Semi_Bold;font-size:17px;margin-top:-10px;margin-bottom:5px;padding:10px 0 10px 10px}.br-top[_ngcontent-%COMP%]{border-top:1px solid #eef1f5;padding-top:10px}.form-label[_ngcontent-%COMP%]{font-size:15px;font-weight:600;font-family:Open_Sans_Semi_Bold}.p-field[_ngcontent-%COMP%]{margin:0 10px}.form-field[_ngcontent-%COMP%]{width:100%!important;border-radius:10px!important}[_nghost-%COMP%]     .p-dropdown{width:100%!important;border-radius:10px!important;height:35px!important}[_nghost-%COMP%]     .p-calendar{width:100%!important;border-radius:10px!important;height:35px!important;margin:0!important;box-shadow:none!important}"]}),t})();var Y=i("bUwk");let G=(()=>{class t{constructor(t){this.http=t}auditLog(t,e){return this.http.postWithoutToasty(e,t)}clearLogs(t,e){return this.http.post(e,t)}downloadCsvAuditLogs(t,e){return this.http.postforCSV(e,t)}}return t.\u0275fac=function(e){return new(e||t)(x.nc(Y.a))},t.\u0275prov=x.Zb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var X=i("eO1q"),K=i("7kUa");function Q(t,e){if(1&t){const t=x.kc();x.jc(0,"div",23),x.jc(1,"span",24),x.jc(2,"input",25),x.qc("ngModelChange",function(e){return x.Rc(t),x.uc().globalFilterValue=e})("keyup",function(e){return x.Rc(t),x.uc().globalFilterFun(e)}),x.ic(),x.bd(3,"\xa0 "),x.ec(4,"i",26),x.ic(),x.ic()}if(2&t){const t=x.uc();x.Nb(2),x.Bc("ngModel",t.globalFilterValue)}}function tt(t,e){if(1&t){const t=x.kc();x.jc(0,"th"),x.bd(1),x.ec(2,"br"),x.ec(3,"p-sortIcon",30),x.jc(4,"app-column-filter",31),x.qc("filterData",function(e){return x.Rc(t),x.uc(3).getFilterData(e)})("resetFilterValues",function(e){return x.Rc(t),x.uc(3).resetFilter(e)}),x.ic(),x.jc(5,"span",32),x.jc(6,"i",33),x.qc("click",function(){x.Rc(t);const e=x.uc().$implicit;return x.uc(2).onFilterClick(e.originalValue)}),x.ic(),x.ic(),x.ic()}if(2&t){const t=x.uc().$implicit,e=x.uc(2);x.Nb(1),x.dd(" ",t.displayValue,""),x.Nb(2),x.Cc("field",t.originalValue),x.Cc("pSortableColumn",t.originalValue),x.Nb(1),x.Bc("colFilterData",e.getFilterState(t.originalValue))("display",e.displayFiltersFor[t.originalValue])("customId",t.originalValue+"_latest")("fieldName",t.originalValue),x.Nb(1),x.Bc("ngClass",e.filterColumnNameWithHighlightName(t.originalValue)?"selected-filter-column":""),x.Nb(1),x.Bc("ngClass",e.filterColumnNameWithHighlightName(t.originalValue)?"pi pi-filter-fill":"pi pi-filter")}}function et(t,e){if(1&t&&(x.hc(0),x.Zc(1,tt,7,9,"th",29),x.gc()),2&t){const t=e.$implicit;x.Nb(1),x.Bc("ngIf",t.isSelected)}}function it(t,e){if(1&t&&(x.jc(0,"tr",27),x.Zc(1,et,2,1,"ng-container",28),x.ic()),2&t){const t=x.uc();x.Nb(1),x.Bc("ngForOf",t.customizeCols)}}function nt(t,e){if(1&t&&(x.jc(0,"td",36),x.jc(1,"span"),x.bd(2),x.ic(),x.ic()),2&t){const t=x.uc().$implicit,e=x.uc().$implicit;x.Bc("title",e[t.originalValue]),x.Nb(2),x.cd(e[t.originalValue])}}function ot(t,e){if(1&t&&(x.hc(0),x.Zc(1,nt,3,2,"td",35),x.gc()),2&t){const t=e.$implicit;x.Nb(1),x.Bc("ngIf",t.isSelected)}}function st(t,e){if(1&t&&(x.jc(0,"tr",34),x.Zc(1,ot,2,1,"ng-container",28),x.ic()),2&t){const t=x.uc();x.Nb(1),x.Bc("ngForOf",t.customizeCols)}}function at(t,e){1&t&&(x.jc(0,"div",37),x.bd(1," No records found "),x.ic())}function ct(t,e){if(1&t){const t=x.kc();x.jc(0,"div",38),x.jc(1,"p-paginator",39,40),x.qc("onPageChange",function(e){return x.Rc(t),x.uc().onPageChange(e)})("firstChange",function(e){return x.Rc(t),x.uc().first=e}),x.ic(),x.ic()}if(2&t){const t=x.uc();x.Nb(1),x.Bc("rows",10)("totalRecords",t.auditLogList.length)("showCurrentPageReport",!0)("first",t.first)}}function lt(t,e){if(1&t&&(x.jc(0,"div",45),x.jc(1,"div"),x.bd(2),x.ic(),x.ic()),2&t){const t=x.uc(3);x.Nb(2),x.ed("Page ",t.selectedPage.page," of ",t.totalNumOfPages,"")}}function rt(t,e){if(1&t&&x.Zc(0,lt,3,2,"div",44),2&t){const t=x.uc(2);x.Bc("ngIf",t.selectedPage)}}function dt(t,e){if(1&t){const t=x.kc();x.jc(0,"div",41),x.jc(1,"p-dropdown",42),x.qc("ngModelChange",function(e){return x.Rc(t),x.uc().selectedPage=e})("onChange",function(e){return x.Rc(t),x.uc().onPageNumChange(e)}),x.Zc(2,rt,1,1,"ng-template",43),x.ic(),x.ic()}if(2&t){const t=x.uc();x.Nb(1),x.Bc("options",t.numOfPages)("filter",!0)("ngModel",t.selectedPage)}}function gt(t,e){if(1&t){const t=x.kc();x.hc(0),x.jc(1,"div",59),x.jc(2,"table"),x.jc(3,"tr",60),x.jc(4,"td"),x.jc(5,"p-checkbox",61),x.qc("ngModelChange",function(t){return e.$implicit.pdfCols=t})("onChange",function(){return x.Rc(t),x.uc(2).pdfColsValue()}),x.ic(),x.ic(),x.jc(6,"td"),x.jc(7,"label"),x.bd(8),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.gc()}if(2&t){const t=e.$implicit,i=x.uc(2);x.Nb(5),x.Bc("ngModel",t.pdfCols)("disabled",i.pdfCheckboxDisabled&&!t.pdfCols),x.Nb(3),x.cd(t.displayValue)}}function pt(t,e){1&t&&(x.jc(0,"div",62),x.bd(1,"You can select up to 9 columns."),x.ic())}function ht(t,e){if(1&t){const t=x.kc();x.jc(0,"div",46),x.jc(1,"span",47),x.bd(2,"Please select columns that need to be downloaded in PDF"),x.ic(),x.ic(),x.jc(3,"div",48),x.jc(4,"div",49),x.Zc(5,gt,9,3,"ng-container",28),x.ic(),x.ic(),x.jc(6,"div",50),x.jc(7,"div",51),x.jc(8,"div",52),x.Zc(9,pt,2,0,"div",53),x.ic(),x.jc(10,"div",54),x.jc(11,"button",55),x.qc("click",function(){x.Rc(t);const e=x.uc();return e.exportPdf(),e.modalRef.hide()}),x.ic(),x.ic(),x.jc(12,"div",56),x.jc(13,"div"),x.jc(14,"label",57),x.qc("click",function(){return x.Rc(t),x.uc().closeExportPdf()}),x.bd(15,"Close"),x.ic(),x.jc(16,"img",58),x.qc("click",function(){return x.Rc(t),x.uc().closeExportPdf()}),x.ic(),x.ic(),x.ic(),x.ic(),x.ic()}if(2&t){const t=x.uc();x.Nb(5),x.Bc("ngForOf",t.customizeCols),x.Nb(4),x.Bc("ngIf",t.pdfCheckboxDisabled),x.Nb(2),x.Bc("disabled",t.disableDownloadBtn)}}const ut=function(){return{width:"100%"}};let ft=(()=>{class t{constructor(t,e,i,n,o,s){this.spinner=t,this.filterService=e,this.modalService=i,this.auditLogsService=n,this.datePipe=o,this.cdr=s,this.numOfPages=[{page:0,pageIndex:0}],this.selectedPage={page:0,pageIndex:0},this.auditLogList=[],this.mainLatestLogList=[],this.pageWiseLatestLogs=[],this.first=0,this.pageSize=9,this.totalNumOfPages=0,this.checkboxDisabled=!1,this.maxCount=4,this.pdfData=[],this.pdfCheckCount=0,this.pdfCheckboxDisabled=!1,this.disableDownloadBtn=!0,this.columnFilter={},this.scrollHt="500px",this.filterData={},this.selectedRowData={},this.isNoRecordFound=!1,this.displayFiltersFor={activityName:!1,entityId:!1,entityName:!1,databuckFeature:!1,activityLogTime:!1,userName:!1,sessionId:!1},this.customizeCols=[{displayValue:"Activity Name",originalValue:"databuckFeature",isSelected:!0,necessaryCol:!0,alwaysSelected:!0},{displayValue:"Session Id",originalValue:"sessionId",isSelected:!0,necessaryCol:!0,alwaysSelected:!0},{displayValue:"Activity Log Time",originalValue:"activityLogTime",isSelected:!0,necessaryCol:!0,alwaysSelected:!0},{displayValue:"User Name",originalValue:"userName",isSelected:!0,necessaryCol:!0,alwaysSelected:!0}]}ngOnInit(){var t;this.fromDate=new Date,this.fromDate.setDate((new Date).getDate()-1),this.toDate=new Date,this.toDate.setDate((new Date).getDate()+1),this.maxDate=new Date,this.maxDate.setDate((new Date).getDate()+3),this.getAuditLogsList(),sessionStorage.getItem("modulePerRole")&&(this.roleModule=JSON.parse(sessionStorage.getItem("modulePerRole"))),this.roleModule.length>0&&(null===(t=this.roleModule)||void 0===t||t.map(t=>{t.accessControl=t.accessControl.split("-")}))}roleOnModule(t){return this.roleModule.find(e=>e.moduleName===t)}openExportPdf(t){this.modalRef=this.modalService.show(t,{class:"gray modal-lg",backdrop:"static",keyboard:!1})}closeExportPdf(){this.modalRef.hide(),setTimeout(()=>{this.pdfCheckCount=0,this.pdfCheckboxDisabled=!1,this.disableDownloadBtn=!0,this.customizeCols.forEach(t=>t.pdfCols=!1)},1e3)}exportPdf(){this.pdfData.length&&(this.spinner.show(),setTimeout(()=>{const t=new P.default("l","pt"),e=this.customizeCols.filter(t=>t.pdfCols),i=[];e.forEach(t=>i.push(t.displayValue));const n=[];e.forEach(t=>n.push(t.originalValue));let o=[];o=this.pdfData.map(t=>Object.assign(n.map(e=>t[e])));const s=t.internal.pageSize,a=s.height?s.height:s.getHeight();C()(t,{columns:i,body:o,didDrawPage:e=>{1==e.pageNumber&&(t.text("Databuck Login Activity",t.internal.pageSize.width/2,25,null,"center"),t.setFontSize(10)),t.setFontSize(9),t.text("Created by FirstEigen",t.internal.pageSize.width-40,a-30,null,"right")},startY:80,styles:{fontSize:8,cellWidth:"auto",lineColor:[0,0,0],lineWidth:.2,minCellWidth:80,cellPadding:{top:2,right:4,bottom:2,left:4}},columnStyles:{}}),t.save("Databuck Login Activity.pdf"),this.disableDownloadBtn=!0,this.pdfCheckboxDisabled=!1,e.forEach(t=>t.pdfCols=!1),this.spinner.hide()},2e3))}pdfColsValue(){this.pdfCheckCount=0,this.customizeCols.filter(t=>!0===t.pdfCols).forEach(t=>{!0===t.pdfCols&&this.pdfCheckCount++}),this.disableDownloadBtn=0==this.pdfCheckCount,this.pdfCheckboxDisabled=9==this.pdfCheckCount}onFilterClick(t){Object.keys(this.displayFiltersFor).map(e=>{this.displayFiltersFor[e]=e===t})}getAuditLogsList(){this.spinner.show();const t=new Date(this.fromDate),e=new Date(this.toDate),i={fromDate:this.datePipe.transform(t,"yyyy-MM-dd"),toDate:this.datePipe.transform(e,"yyyy-MM-dd")};this.auditLogsService.auditLog(i,"getLatestLoginActivityDetails").subscribe(t=>{if("success"===t.status){this.spinner.hide(),this.spinner.hide()&&(this.isNoRecordFound=!0),this.mainLatestLogList=[...t.result.getLatestLoginActivityDetails],this.auditLogList=[...this.mainLatestLogList],this.pdfData=[...this.mainLatestLogList];const e=this.first+this.pageSize,i=this.auditLogList.filter((t,i)=>i<=e);this.pageWiseLatestLogs=[...i],this.calculateNumOfPages(),this.checkCount=0,this.customizeCols.filter(t=>!1===t.necessaryCol).forEach(t=>{!0===t.isSelected&&this.checkCount++}),this.checkboxDisabled=this.checkCount>=this.maxCount}else this.mainLatestLogList=[],this.auditLogList=[],this.pageWiseLatestLogs=[],this.isNoRecordFound=!0})}calculateNumOfPages(){if(this.totalNumOfPages=this.mainLatestLogList.length?this.mainLatestLogList.length<this.pageSize?1:Math.ceil(this.mainLatestLogList.length/(this.pageSize+1)):0,this.numOfPages=[],this.selectedPage={},0===this.totalNumOfPages)this.numOfPages.push({pageIndex:0,page:0}),this.selectedPage={pageIndex:0,page:0};else if(1===this.totalNumOfPages)this.numOfPages.push({pageIndex:0,page:1}),this.selectedPage={pageIndex:0,page:1};else{this.selectedPage={pageIndex:0,page:1};for(let t=0;t<this.totalNumOfPages;t++)this.numOfPages.push({pageIndex:t,page:t+1})}}onPageChange(t){this.first=t.first;const e=this.getSortedData(),i=this.first+this.pageSize,n=e.filter((t,e)=>{if(e<=i&&e>=this.first)return t});this.selectedPage={pageIndex:t.page,page:t.page+1},this.pageWiseLatestLogs=[...n]}onPageNumChange(t){this.selectedPage={page:t.value.page,pageIndex:t.value.pageIndex},this.first=1===t.value.page?0:10*(t.value.page-1);const e=this.getSortedData(),i=this.first+this.pageSize,n=e.filter((t,e)=>{if(e<=i&&e>=this.first)return t});this.pageWiseLatestLogs=[...n]}getSortedData(){const t=[...this.auditLogList];return this.sortOrderEvent?1===this.sortOrderEvent.order?(t.sort((t,e)=>t[this.sortOrderEvent.field]>e[this.sortOrderEvent.field]?1:e[this.sortOrderEvent.field]>t[this.sortOrderEvent.field]?-1:0),t):(t.sort((t,e)=>t[this.sortOrderEvent.field]>e[this.sortOrderEvent.field]?-1:e[this.sortOrderEvent.field]>t[this.sortOrderEvent.field]?1:0),t):t}customSort(t){const e=parseInt((this.first/(this.pageSize+1)).toString(),10);this.selectedPage.page=e+1,this.selectedPage.pageIndex=e,this.sortOrderEvent=t;const i=[...this.auditLogList];i.sort(1===this.sortOrderEvent.order?(e,i)=>e[t.field]>i[t.field]?1:i[t.field]>e[t.field]?-1:0:(e,i)=>e[t.field]>i[t.field]?-1:i[t.field]>e[t.field]?1:0);const n=this.first+this.pageSize,o=i.filter((t,e)=>{if(e<=n&&e>=this.first)return t});this.pageWiseLatestLogs=[...o]}globalFilterFun(t){const e=[...this.globalFilterLogic()],i=this.first+this.pageSize,n=e.filter((t,e)=>e<=i);this.cdr.detectChanges(),this.pageWiseLatestLogs=[...n],this.setPageNumber()}globalFilterLogic(){if(this.mainLatestLogList.length){const t=Object.keys(this.mainLatestLogList[0]);if(this.globalFilterValue){if(this.filterValue=[],this.mainLatestLogList.forEach(e=>{let i=!1;t.forEach(t=>{e[t]&&e[t].toString().toLowerCase().includes(this.globalFilterValue.toLowerCase())&&!i&&(this.filterValue.push(e),i=!0)})}),this.columnFilter!={}){this.filterData=JSON.parse(JSON.stringify(this.columnFilter));const t=Object.keys(this.columnFilter);this.first=0,t.forEach(t=>{this.filterValue=this.filterValue.filter(e=>this.filterService.filters.contains(e[t],this.columnFilter[t]))})}return this.auditLogList=[...this.filterValue],this.calculateNumOfPages(),this.filterValue}if(this.calculateNumOfPages(),this.filterValue=[...this.mainLatestLogList],this.columnFilter!={}){this.filterData=JSON.parse(JSON.stringify(this.columnFilter));const t=Object.keys(this.columnFilter);this.first=0,t.forEach(t=>{this.filterValue=this.filterValue.filter(e=>this.filterService.filters.contains(e[t],this.columnFilter[t]))})}return this.auditLogList=[...this.filterValue],this.calculateNumOfPages(),this.auditLogList}return[]}getFilterData(t){this.columnFilter[t[0]]=t[1],this.filterData=JSON.parse(JSON.stringify(this.columnFilter));const e=Object.keys(this.columnFilter);this.displayFiltersFor[t[0]]=!1,this.first=0,this.auditLogList=[...this.mainLatestLogList],e.forEach(t=>{this.auditLogList=this.auditLogList.filter(e=>this.filterService.filters.contains(e[t],this.columnFilter[t]))}),this.setPageNumber()}resetFilter(t){this.columnFilter[t]=null,delete this.columnFilter[t],this.filterData=JSON.parse(JSON.stringify(this.columnFilter));const e=Object.keys(this.columnFilter);this.displayFiltersFor[t]=!1,this.first=0,this.auditLogList=[...this.mainLatestLogList],e.forEach(t=>{this.auditLogList=this.auditLogList.filter(e=>this.filterService.filters.contains(e[t],this.columnFilter[t]))}),this.setPageNumber()}setPageNumber(){if(this.totalNumOfPages=this.auditLogList.length?this.auditLogList.length<this.pageSize?1:Math.ceil(this.auditLogList.length/(this.pageSize+1)):0,this.numOfPages=[],this.selectedPage={},0===this.totalNumOfPages)this.numOfPages.push({pageIndex:0,page:0}),this.selectedPage={pageIndex:0,page:0};else if(1===this.totalNumOfPages)this.numOfPages.push({pageIndex:0,page:1}),this.selectedPage={pageIndex:0,page:1};else{this.selectedPage={pageIndex:0,page:1};for(let t=0;t<this.totalNumOfPages;t++)this.numOfPages.push({pageIndex:t,page:t+1})}const t=this.first+this.pageSize,e=this.auditLogList.filter((e,i)=>i<=t);this.pageWiseLatestLogs=[...e]}getFilterState(t){if(this.filterData&&null!=this.filterData&&""!==this.filterData){if(this.filterData[t]){const e=this.filterData[t];return delete this.filterData[t],{fieldName:t,filterWith:e}}return{fieldName:"",filterWith:""}}return{fieldName:"",filterWith:""}}filterColumnNameWithHighlightName(t){return!(Object.keys(this.columnFilter).findIndex(e=>e===t)<0)}clearLog(){const t=new Date(this.fromDate),e=new Date(this.toDate),i={fromDate:this.datePipe.transform(t,"yyyy-MM-dd"),toDate:this.datePipe.transform(e,"yyyy-MM-dd")};this.auditLogsService.clearLogs(i,"clearLogs").subscribe(t=>{"success"==t.status&&this.getAuditLogsList()})}downloadCSV(){const t=new Date(this.fromDate),e=new Date(this.toDate),i={fromDate:this.datePipe.transform(t,"yyyy-MM-dd"),toDate:this.datePipe.transform(e,"yyyy-MM-dd")};this.auditLogsService.downloadCsvAuditLogs(i,"downloadCsvforLoginActivity").subscribe(t=>{Object(d.saveAs)(t,"Databuck_Login_Activity.csv")})}}return t.\u0275fac=function(e){return new(e||t)(x.dc(w.c),x.dc(v.d),x.dc(y.a),x.dc(G),x.dc(n.d),x.dc(x.h))},t.\u0275cmp=x.Xb({type:t,selectors:[["app-latest-login-activity"]],decls:33,vars:38,consts:[[1,"content-wrapper","top"],[1,"container-fluid","create-conn-main"],[1,"row","padding-left-10"],[1,"col-sm-3","col-md-3"],["for","from_date",1,"form-label"],["yearRange","2000:2030","inputId","dateformat","dateFormat","yy-mm-dd","appendTo","body",3,"styleClass","maxDate","ngModel","showIcon","monthNavigator","yearNavigator","readonlyInput","ngModelChange"],["yearRange","2000:2030","inputId","dateformat","dateFormat","yy-mm-dd","appendTo","body",3,"styleClass","minDate","maxDate","ngModel","showIcon","monthNavigator","yearNavigator","readonlyInput","ngModelChange"],[1,"col-sm-3","col-md-3","padding-top-30"],["pButton","","type","button","label","Show",1,"button","w-button","logoutButton","submit-btn",3,"click"],["src","assets/images/csv_icon.png","title","Download CSV","loading","lazy","alt","Download CSV",1,"download_btn_css","image-7",3,"click"],["src","assets/images/pdf_icon.jpg","title","Download PDF","loading","lazy","alt","Download PDF",1,"download_btn_css","image-7",3,"click"],[1,"row","p-field"],["id","view_audit_log_list",1,"col-sm-12","mr-top-20","pd-0"],["view_audit_log_list",""],["styleClass","p-datatable-gridlines p-datatable-striped","responsiveLayout","scroll","sortMode","single",3,"value","responsive","rowHover","sortField","sortOrder","pageLinks","filterDelay","resetPageOnSort","rows","first","customSort","firstChange","sortFunction"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["class","col-sm-12 no-records default-font-14-weight",4,"ngIf"],[1,"col-sm-12","pagination-div"],["class","pad-0",4,"ngIf"],["class","pad-0 pad-tp-10 text-right",4,"ngIf"],["exportPdfTemplate",""],[1,"table-header"],[1,"gsearch"],["type","text","pInputText","","size","50","placeholder","Search",1,"gfilter",3,"ngModel","ngModelChange","keyup"],[1,"pi","pi-search","margin-gfilter"],[1,"header"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"field","pSortableColumn"],[3,"colFilterData","display","customId","fieldName","filterData","resetFilterValues"],[1,"columnFilter",3,"ngClass"],[1,"pi-filter-color",3,"ngClass","click"],[1,"row-ht"],["class","text-center word_break_word_all td-ellipsis",3,"title",4,"ngIf"],[1,"text-center","word_break_word_all","td-ellipsis",3,"title"],[1,"col-sm-12","no-records","default-font-14-weight"],[1,"pad-0"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"rows","totalRecords","showCurrentPageReport","first","onPageChange","firstChange"],["dq_paginator",""],[1,"pad-0","pad-tp-10","text-right"],["optionLabel","page","placeholder","Go to page",3,"options","filter","ngModel","ngModelChange","onChange"],["pTemplate","selectedItem"],["class","drpdwn-item",4,"ngIf"],[1,"drpdwn-item"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","pdf-modal"],[1,"row","padding-btm"],[1,"modal-footer"],[1,"row","full-width"],[1,"col-lg-4"],["class","color-code",4,"ngIf"],[1,"col-lg-4","text-center"],["pButton","","type","button","label","Download",1,"button","w-button","shadow","btn-mr-rt","submit-btn",3,"disabled","click"],[1,"col-lg-4","arrow-text-right"],[1,"cursor-pointer",3,"click"],["src","assets/images/close.png",1,"margin-img","cursor-pointer",3,"click"],[1,"col-sm-4"],[1,"validations"],["binary","true","name","groupname1","value","customizeCols[cols.displayValue]",3,"ngModel","disabled","ngModelChange","onChange"],[1,"color-code"]],template:function(t,e){if(1&t){const t=x.kc();x.jc(0,"div",0),x.jc(1,"div",1),x.jc(2,"div",2),x.jc(3,"div",3),x.jc(4,"label",4),x.bd(5,"From Date"),x.ic(),x.ec(6,"br"),x.jc(7,"p-calendar",5),x.qc("ngModelChange",function(t){return e.fromDate=t}),x.ic(),x.ic(),x.jc(8,"div",3),x.jc(9,"label",4),x.bd(10,"To Date"),x.ic(),x.ec(11,"br"),x.jc(12,"p-calendar",6),x.qc("ngModelChange",function(t){return e.toDate=t}),x.ic(),x.ic(),x.jc(13,"div",7),x.jc(14,"button",8),x.qc("click",function(){return e.getAuditLogsList()}),x.ic(),x.ic(),x.jc(15,"div",7),x.jc(16,"a"),x.jc(17,"img",9),x.qc("click",function(){return e.downloadCSV()}),x.ic(),x.ic(),x.jc(18,"a"),x.jc(19,"img",10),x.qc("click",function(){x.Rc(t);const i=x.Oc(32);return e.openExportPdf(i)}),x.ic(),x.ic(),x.ic(),x.ic(),x.jc(20,"div",11),x.jc(21,"div",12,13),x.jc(23,"p-table",14),x.qc("firstChange",function(t){return e.first=t})("sortFunction",function(t){return e.customSort(t)}),x.Zc(24,Q,5,1,"ng-template",15),x.Zc(25,it,2,1,"ng-template",16),x.Zc(26,st,2,1,"ng-template",17),x.ic(),x.ic(),x.Zc(27,at,2,0,"div",18),x.jc(28,"div",19),x.Zc(29,ct,3,4,"div",20),x.Zc(30,dt,3,3,"div",21),x.ic(),x.ic(),x.ic(),x.Zc(31,ht,17,3,"ng-template",null,22,x.ad),x.ic()}2&t&&(x.Nb(7),x.Bc("styleClass","form-field")("maxDate",e.toDate)("ngModel",e.fromDate)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("readonlyInput",!0),x.Nb(5),x.Bc("styleClass","form-field")("minDate",e.fromDate)("maxDate",e.maxDate)("ngModel",e.toDate)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("readonlyInput",!0),x.Nb(4),x.Rb("w-inline-block cursor-pointer float-right ",null!=e.pageWiseLatestLogs&&e.pageWiseLatestLogs.length?"":"disabled-opa",""),x.Nb(2),x.Rb("w-inline-block cursor-pointer float-right ",null!=e.pageWiseLatestLogs&&e.pageWiseLatestLogs.length?"":"disabled-opa",""),x.Nb(5),x.Vc(x.Ec(37,ut)),x.Bc("value",e.pageWiseLatestLogs)("responsive",!0)("rowHover",!0)("sortField","user_name")("sortOrder",-1)("pageLinks",5)("filterDelay",0)("resetPageOnSort",!0)("rows",10)("first",e.first)("customSort",!0),x.Nb(4),x.Bc("ngIf",!e.pageWiseLatestLogs.length&&e.isNoRecordFound),x.Nb(2),x.Bc("ngIf",e.pageWiseLatestLogs.length),x.Nb(1),x.Bc("ngIf",e.pageWiseLatestLogs.length))},directives:[X.a,o.o,o.r,M.b,D.f,v.i,n.n,o.d,K.a,n.m,D.d,D.e,k.a,n.l,s.a,S.a,N.a],styles:['[_nghost-%COMP%]     .p-confirm-dialog-accept{border-radius:20px!important}.accept-btn-css[_ngcontent-%COMP%]{border-radius:20px!important}[_nghost-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{padding-right:10px!important}.no-records[_ngcontent-%COMP%]{padding:5px 15px;text-align:center;border-left:1px solid #e9ecef;border-right:1px solid #e9ecef;border-bottom:1px solid #e9ecef}.disabled-opa[_ngcontent-%COMP%]{opacity:.4;pointer-events:none!important}.err-msg[_ngcontent-%COMP%]{color:#e72b56}.red-btn[_ngcontent-%COMP%]{background:#e72b56!important}.more-display[_ngcontent-%COMP%]:hover{cursor:pointer}.field-dis-val[_ngcontent-%COMP%]{min-width:170px;font-weight:500;padding:3px}.padding-btm3[_ngcontent-%COMP%]{padding-bottom:12px}.padding-btm1[_ngcontent-%COMP%]{padding-bottom:20px}.pi-exclamation-circle[_ngcontent-%COMP%]{font-size:21px}.modal-title[_ngcontent-%COMP%]{font-weight:600;font-size:16px}.modal-title-delete[_ngcontent-%COMP%]{font-weight:600;font-size:21px}[_nghost-%COMP%]     .p-inputtext:enabled:focus{box-shadow:none!important}.pad-0[_ngcontent-%COMP%]{padding:0}.copy-ip[_ngcontent-%COMP%]{margin-top:10px;font-size:14px;box-shadow:none!important}.pad-tp-10[_ngcontent-%COMP%]{padding-top:10px!important}.pagination-div[_ngcontent-%COMP%]{display:flex;justify-content:end;padding:0 10px}.header-width[_ngcontent-%COMP%]{width:90px}.conn-name-td[_ngcontent-%COMP%]{width:180px}.conn-name[_ngcontent-%COMP%]{padding:5px 10px;width:93%!important}.alation-div[_ngcontent-%COMP%], .conn-name[_ngcontent-%COMP%]{border-radius:20px;color:#fff;font-weight:600;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;display:inline-block}.alation-icon-green[_ngcontent-%COMP%]{color:green}.alation-icon-white[_ngcontent-%COMP%]{color:#fff;visibility:hidden}.conn-failed[_ngcontent-%COMP%]{background-color:#e72b56;opacity:.7}.conn-pass[_ngcontent-%COMP%]{background-color:#56b608}.fa-files-o[_ngcontent-%COMP%], .fa-pencil[_ngcontent-%COMP%]{color:#337ab7}.fa-trash[_ngcontent-%COMP%]{color:#e72b56}.fa-deactivate[_ngcontent-%COMP%]{color:#c32121}.fa-activate[_ngcontent-%COMP%]{color:#181894}.row-ht[_ngcontent-%COMP%]{height:30px}.pd-top-30[_ngcontent-%COMP%]{padding-top:30px}.mr-top-20[_ngcontent-%COMP%]{margin-top:20px}.td-ellipsis[_ngcontent-%COMP%]{word-break:break-all;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.pd-0[_ngcontent-%COMP%]{padding:0}.width-225[_ngcontent-%COMP%]{width:225px}.columnFilterClass[_ngcontent-%COMP%]{z-index:1008;transform-origin:right;top:64.4236px;position:absolute;flex-direction:column;background:#fff;color:#495057;border:0;border-radius:3px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12);min-width:12.5rem}.add-icon[_ngcontent-%COMP%]{height:40px;width:40px}.filterDisplay[_ngcontent-%COMP%]{display:inline-block;z-index:9}.margin-l[_ngcontent-%COMP%]{margin-left:5px;width:30px}.width-100[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .p-datatable .p-datatable-header{padding:.2rem;height:40px;font-size:14px;border-top-right-radius:10px!important;border-top-left-radius:10px!important}.button[_ngcontent-%COMP%]{font-weight:500;background:linear-gradient(180deg,#ff7526,#fb9a64)!important;font-size:13px}.btn-label[_ngcontent-%COMP%], [_nghost-%COMP%]     .submit-btn .p-button-label{width:156px;font-size:14px!important;font-weight:600!important;font-style:normal;font-family:Open Sans;height:40px;color:#fff}[_nghost-%COMP%]     .p-calendar .p-inputtext{box-shadow:none!important}.create-conn-main[_ngcontent-%COMP%]{margin-top:27px;background-color:#fff;border-radius:20px;padding:15px;box-shadow:0 2px 8px 0 rgba(99,99,99,.2)}.form-title[_ngcontent-%COMP%]{font-family:Open_Sans_Semi_Bold;font-size:17px;margin-top:-10px;margin-bottom:5px;padding:10px 0 10px 10px}.br-top[_ngcontent-%COMP%]{border-top:1px solid #eef1f5;padding-top:10px}.form-label[_ngcontent-%COMP%]{font-size:15px;font-weight:600;font-family:Open_Sans_Semi_Bold}.p-field[_ngcontent-%COMP%]{margin:0 10px}.form-field[_ngcontent-%COMP%]{width:100%!important;border-radius:10px!important}[_nghost-%COMP%]     .p-calendar{width:100%!important;border-radius:10px!important;height:35px!important;margin:0!important;box-shadow:none!important}[_nghost-%COMP%]     p-calendar .p-button.p-button-icon-only{width:2.357rem;padding:1.15rem 0!important;display:inline-flex!important}.adjust[_ngcontent-%COMP%]{top:10px}.nav-pills[_ngcontent-%COMP%]{background:#fff;border-bottom:1px solid #dedede;border-radius:8px 8px 0 0}.nav-pills[_ngcontent-%COMP%], .nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{height:50px;position:relative}.nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-right:-1%;margin-top:.1%;top:10px}.nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{position:relative;padding:15px 20px;line-height:19px;color:#717171;font-size:14px;font-weight:700;z-index:1}.nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:transparent;border-color:transparent}.nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{content:"";width:100%;height:50px;position:absolute;bottom:1%;left:-1px;font-size:12px;background:transparent;border:1px solid transparent;z-index:-1}.nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]:before{background:linear-gradient(180deg,transparent,transparent);bottom-border-color:#dedede;font-size:16px;font-family:Open Sans!important;text-align:center;border-radius:8px 8px 0 0}.nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%], .nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]:focus, .nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]:hover{border:1px solid transparent;background:transparent;color:#951447;font-weight:700;z-index:2;-webkit-text-decoration:underline 3px;text-decoration:underline 3px;text-underline-offset:8px}a[_ngcontent-%COMP%]:hover{text-decoration:none}.tab-content[_ngcontent-%COMP%]   .tab-pane[_ngcontent-%COMP%]{box-shadow:0 0 15px #e6e5e5;border-radius:7px 20px 20px 20px;padding:5px 20px 20px;background:#fff;line-height:22px}.tab-content[_ngcontent-%COMP%]   .tab-pane[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0}.fromstyle[_ngcontent-%COMP%]{padding-left:0;padding-right:30px}.margin-top-10[_ngcontent-%COMP%]{margin-top:10px}.notify-font[_ngcontent-%COMP%]{font-size:15px;color:inherit}#container1[_ngcontent-%COMP%]{width:90%;overflow-x:scroll}']}),t})();function mt(t,e){if(1&t){const t=x.kc();x.jc(0,"div",39),x.jc(1,"span",40),x.jc(2,"input",41),x.qc("ngModelChange",function(e){return x.Rc(t),x.uc().globalFilterValue=e})("keyup",function(e){return x.Rc(t),x.uc().globalFilterFun(e)}),x.ic(),x.bd(3,"\xa0 "),x.ec(4,"i",42),x.ic(),x.ic()}if(2&t){const t=x.uc();x.Nb(2),x.Bc("ngModel",t.globalFilterValue)}}function bt(t,e){if(1&t){const t=x.kc();x.jc(0,"th"),x.bd(1),x.ec(2,"br"),x.ec(3,"p-sortIcon",46),x.jc(4,"app-column-filter",47),x.qc("filterData",function(e){return x.Rc(t),x.uc(3).getFilterData(e)})("resetFilterValues",function(e){return x.Rc(t),x.uc(3).resetFilter(e)}),x.ic(),x.jc(5,"span",48),x.jc(6,"i",49),x.qc("click",function(){x.Rc(t);const e=x.uc().$implicit;return x.uc(2).onFilterClick(e.originalValue)}),x.ic(),x.ic(),x.ic()}if(2&t){const t=x.uc().$implicit,e=x.uc(2);x.Nb(1),x.dd(" ",t.displayValue,""),x.Nb(2),x.Cc("field",t.originalValue),x.Cc("pSortableColumn",t.originalValue),x.Nb(1),x.Bc("colFilterData",e.getFilterState(t.originalValue))("display",e.displayFiltersFor[t.originalValue])("customId",t.originalValue)("fieldName",t.originalValue),x.Nb(1),x.Bc("ngClass",e.filterColumnNameWithHighlightName(t.originalValue)?"selected-filter-column":""),x.Nb(1),x.Bc("ngClass",e.filterColumnNameWithHighlightName(t.originalValue)?"pi pi-filter-fill":"pi pi-filter")}}function Ct(t,e){if(1&t&&(x.hc(0),x.Zc(1,bt,7,9,"th",45),x.gc()),2&t){const t=e.$implicit;x.Nb(1),x.Bc("ngIf",t.isSelected)}}function Pt(t,e){if(1&t&&(x.jc(0,"tr",43),x.Zc(1,Ct,2,1,"ng-container",44),x.ic()),2&t){const t=x.uc();x.Nb(1),x.Bc("ngForOf",t.customizeCols)}}function xt(t,e){if(1&t&&(x.jc(0,"td",52),x.jc(1,"span"),x.bd(2),x.ic(),x.ic()),2&t){const t=x.uc().$implicit,e=x.uc().$implicit;x.Bc("title",e[t.originalValue]),x.Nb(2),x.cd(e[t.originalValue])}}function Ot(t,e){if(1&t&&(x.hc(0),x.Zc(1,xt,3,2,"td",51),x.gc()),2&t){const t=e.$implicit;x.Nb(1),x.Bc("ngIf",t.isSelected)}}function wt(t,e){if(1&t&&(x.jc(0,"tr",50),x.Zc(1,Ot,2,1,"ng-container",44),x.ic()),2&t){const t=x.uc();x.Nb(1),x.Bc("ngForOf",t.customizeCols)}}function vt(t,e){1&t&&(x.jc(0,"div",53),x.bd(1," No records found "),x.ic())}function yt(t,e){if(1&t){const t=x.kc();x.jc(0,"div",54),x.jc(1,"p-paginator",55,56),x.qc("onPageChange",function(e){return x.Rc(t),x.uc().onPageChange(e)})("firstChange",function(e){return x.Rc(t),x.uc().first=e}),x.ic(),x.ic()}if(2&t){const t=x.uc();x.Nb(1),x.Bc("rows",10)("totalRecords",t.auditLogList.length)("showCurrentPageReport",!0)("first",t.first)}}function Lt(t,e){if(1&t&&(x.jc(0,"div",61),x.jc(1,"div"),x.bd(2),x.ic(),x.ic()),2&t){const t=x.uc(3);x.Nb(2),x.ed("Page ",t.selectedPage.page," of ",t.totalNumOfPages,"")}}function _t(t,e){if(1&t&&x.Zc(0,Lt,3,2,"div",60),2&t){const t=x.uc(2);x.Bc("ngIf",t.selectedPage)}}function Mt(t,e){if(1&t){const t=x.kc();x.jc(0,"div",57),x.jc(1,"p-dropdown",58),x.qc("ngModelChange",function(e){return x.Rc(t),x.uc().selectedPage=e})("onChange",function(e){return x.Rc(t),x.uc().onPageNumChange(e)}),x.Zc(2,_t,1,1,"ng-template",59),x.ic(),x.ic()}if(2&t){const t=x.uc();x.Nb(1),x.Bc("options",t.numOfPages)("filter",!0)("ngModel",t.selectedPage)}}function Dt(t,e){if(1&t){const t=x.kc();x.hc(0),x.jc(1,"div",75),x.jc(2,"table"),x.jc(3,"tr",76),x.jc(4,"td"),x.jc(5,"p-checkbox",77),x.qc("ngModelChange",function(t){return e.$implicit.pdfCols=t})("onChange",function(){return x.Rc(t),x.uc(2).pdfColsValue()}),x.ic(),x.ic(),x.jc(6,"td"),x.jc(7,"label"),x.bd(8),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.gc()}if(2&t){const t=e.$implicit,i=x.uc(2);x.Nb(5),x.Bc("ngModel",t.pdfCols)("disabled",i.pdfCheckboxDisabled&&!t.pdfCols),x.Nb(3),x.cd(t.displayValue)}}function kt(t,e){1&t&&(x.jc(0,"div",78),x.bd(1,"You can select up to 9 columns."),x.ic())}function St(t,e){if(1&t){const t=x.kc();x.jc(0,"div",62),x.jc(1,"span",63),x.bd(2,"Please select columns that need to be downloaded in PDF"),x.ic(),x.ic(),x.jc(3,"div",64),x.jc(4,"div",65),x.Zc(5,Dt,9,3,"ng-container",44),x.ic(),x.ic(),x.jc(6,"div",66),x.jc(7,"div",67),x.jc(8,"div",68),x.Zc(9,kt,2,0,"div",69),x.ic(),x.jc(10,"div",70),x.jc(11,"button",71),x.qc("click",function(){x.Rc(t);const e=x.uc();return e.exportPdf(),e.modalRef.hide()}),x.ic(),x.ic(),x.jc(12,"div",72),x.jc(13,"div"),x.jc(14,"label",73),x.qc("click",function(){return x.Rc(t),x.uc().closeExportPdf()}),x.bd(15,"Close"),x.ic(),x.jc(16,"img",74),x.qc("click",function(){return x.Rc(t),x.uc().closeExportPdf()}),x.ic(),x.ic(),x.ic(),x.ic(),x.ic()}if(2&t){const t=x.uc();x.Nb(5),x.Bc("ngForOf",t.customizeCols),x.Nb(4),x.Bc("ngIf",t.pdfCheckboxDisabled),x.Nb(2),x.Bc("disabled",t.disableDownloadBtn)}}const Nt=function(){return{width:"100%"}};let jt=(()=>{class t{constructor(t,e,i,n,o,s){this.spinner=t,this.filterService=e,this.modalService=i,this.auditLogsService=n,this.datePipe=o,this.cdr=s,this.numOfPages=[{page:0,pageIndex:0}],this.selectedPage={page:0,pageIndex:0},this.auditLogList=[],this.mainAuditLogList=[],this.pageWiseAuditLogs=[],this.first=0,this.pageSize=9,this.totalNumOfPages=0,this.checkboxDisabled=!1,this.maxCount=4,this.pdfData=[],this.pdfCheckCount=0,this.pdfCheckboxDisabled=!1,this.disableDownloadBtn=!0,this.columnFilter={},this.scrollHt="500px",this.filterData={},this.selectedRowData={},this.isNoRecordFound=!1,this.displayFiltersFor={activityName:!1,entityId:!1,entityName:!1,databuckFeature:!1,activityLogTime:!1,userName:!1},this.customizeCols=[{displayValue:"Activity Name",originalValue:"activityName",isSelected:!0,necessaryCol:!0,alwaysSelected:!0},{displayValue:"Databuck Feature",originalValue:"databuckFeature",isSelected:!0,necessaryCol:!0,alwaysSelected:!0},{displayValue:"Entity Id",originalValue:"entityId",isSelected:!0,necessaryCol:!0,alwaysSelected:!0},{displayValue:"Entity Name",originalValue:"entityName",isSelected:!0,necessaryCol:!0,alwaysSelected:!0},{displayValue:"Activity Log Time",originalValue:"activityLogTime",isSelected:!0,necessaryCol:!0,alwaysSelected:!0},{displayValue:"User Name",originalValue:"userName",isSelected:!0,necessaryCol:!0,alwaysSelected:!0}]}ngOnInit(){var t;this.fromDate=new Date,this.fromDate.setDate((new Date).getDate()-1),this.toDate=new Date,this.toDate.setDate((new Date).getDate()+1),this.maxDate=new Date,this.maxDate.setDate((new Date).getDate()+3),this.getAuditLogsList(),sessionStorage.getItem("modulePerRole")&&(this.roleModule=JSON.parse(sessionStorage.getItem("modulePerRole"))),this.roleModule.length>0&&(null===(t=this.roleModule)||void 0===t||t.map(t=>{t.accessControl=t.accessControl.split("-")}))}roleOnModule(t){return this.roleModule.find(e=>e.moduleName===t)}openExportPdf(t){this.modalRef=this.modalService.show(t,{class:"gray modal-lg",backdrop:"static",keyboard:!1})}closeExportPdf(){this.modalRef.hide(),setTimeout(()=>{this.pdfCheckCount=0,this.pdfCheckboxDisabled=!1,this.disableDownloadBtn=!0,this.customizeCols.forEach(t=>t.pdfCols=!1)},1e3)}exportPdf(){this.pdfData.length&&(this.spinner.show(),setTimeout(()=>{const t=new P.default("l","pt"),e=this.customizeCols.filter(t=>t.pdfCols),i=[];e.forEach(t=>i.push(t.displayValue));const n=[];e.forEach(t=>n.push(t.originalValue));let o=[];o=this.pdfData.map(t=>Object.assign(n.map(e=>t[e])));const s=t.internal.pageSize,a=s.height?s.height:s.getHeight();C()(t,{columns:i,body:o,didDrawPage:e=>{1==e.pageNumber&&(t.text("Databuck Audit Logs",t.internal.pageSize.width/2,25,null,"center"),t.setFontSize(10)),t.setFontSize(9),t.text("Created by FirstEigen",t.internal.pageSize.width-40,a-30,null,"right")},startY:80,styles:{fontSize:8,cellWidth:"auto",lineColor:[0,0,0],lineWidth:.2,minCellWidth:80,cellPadding:{top:2,right:4,bottom:2,left:4}},columnStyles:{}}),t.save("Databuck Audit Logs.pdf"),this.disableDownloadBtn=!0,this.pdfCheckboxDisabled=!1,e.forEach(t=>t.pdfCols=!1),this.spinner.hide()},2e3))}pdfColsValue(){this.pdfCheckCount=0,this.customizeCols.filter(t=>!0===t.pdfCols).forEach(t=>{!0===t.pdfCols&&this.pdfCheckCount++}),this.disableDownloadBtn=0==this.pdfCheckCount,this.pdfCheckboxDisabled=9==this.pdfCheckCount}onFilterClick(t){Object.keys(this.displayFiltersFor).map(e=>{this.displayFiltersFor[e]=e===t})}getAuditLogsList(){this.spinner.show();const t=new Date(this.fromDate),e=new Date(this.toDate),i={fromDate:this.datePipe.transform(t,"yyyy-MM-dd"),toDate:this.datePipe.transform(e,"yyyy-MM-dd")};this.auditLogsService.auditLog(i,"getLatestAuditTrailDetails").subscribe(t=>{if("success"===t.status){this.spinner.hide(),this.spinner.hide()&&(this.isNoRecordFound=!0),t.result.latestAuditTrailDetails=t.result.latestAuditTrailDetails.filter(t=>"N"!==t.activityName),this.mainAuditLogList=[...t.result.latestAuditTrailDetails],this.auditLogList=[...this.mainAuditLogList],this.pdfData=[...this.mainAuditLogList];const e=this.first+this.pageSize,i=this.auditLogList.filter((t,i)=>i<=e);this.pageWiseAuditLogs=[...i],this.calculateNumOfPages(),this.checkCount=0,this.customizeCols.filter(t=>!1===t.necessaryCol).forEach(t=>{!0===t.isSelected&&this.checkCount++}),this.checkboxDisabled=this.checkCount>=this.maxCount}else this.mainAuditLogList=[],this.auditLogList=[],this.pageWiseAuditLogs=[],this.isNoRecordFound=!0})}calculateNumOfPages(){if(this.totalNumOfPages=this.mainAuditLogList.length?this.mainAuditLogList.length<this.pageSize?1:Math.ceil(this.mainAuditLogList.length/(this.pageSize+1)):0,this.numOfPages=[],this.selectedPage={},0===this.totalNumOfPages)this.numOfPages.push({pageIndex:0,page:0}),this.selectedPage={pageIndex:0,page:0};else if(1===this.totalNumOfPages)this.numOfPages.push({pageIndex:0,page:1}),this.selectedPage={pageIndex:0,page:1};else{this.selectedPage={pageIndex:0,page:1};for(let t=0;t<this.totalNumOfPages;t++)this.numOfPages.push({pageIndex:t,page:t+1})}}onPageChange(t){this.first=t.first;const e=this.getSortedData(),i=this.first+this.pageSize,n=e.filter((t,e)=>{if(e<=i&&e>=this.first)return t});this.selectedPage={pageIndex:t.page,page:t.page+1},this.pageWiseAuditLogs=[...n]}onPageNumChange(t){this.selectedPage={page:t.value.page,pageIndex:t.value.pageIndex},this.first=1===t.value.page?0:10*(t.value.page-1);const e=this.getSortedData(),i=this.first+this.pageSize,n=e.filter((t,e)=>{if(e<=i&&e>=this.first)return t});this.pageWiseAuditLogs=[...n]}getSortedData(){const t=[...this.auditLogList];return this.sortOrderEvent?1===this.sortOrderEvent.order?(t.sort((t,e)=>t[this.sortOrderEvent.field]>e[this.sortOrderEvent.field]?1:e[this.sortOrderEvent.field]>t[this.sortOrderEvent.field]?-1:0),t):(t.sort((t,e)=>t[this.sortOrderEvent.field]>e[this.sortOrderEvent.field]?-1:e[this.sortOrderEvent.field]>t[this.sortOrderEvent.field]?1:0),t):t}customSort(t){const e=parseInt((this.first/(this.pageSize+1)).toString(),10);this.selectedPage.page=e+1,this.selectedPage.pageIndex=e,this.sortOrderEvent=t;const i=[...this.auditLogList];i.sort(1===this.sortOrderEvent.order?(e,i)=>e[t.field]>i[t.field]?1:i[t.field]>e[t.field]?-1:0:(e,i)=>e[t.field]>i[t.field]?-1:i[t.field]>e[t.field]?1:0);const n=this.first+this.pageSize,o=i.filter((t,e)=>{if(e<=n&&e>=this.first)return t});this.pageWiseAuditLogs=[...o]}globalFilterFun(t){const e=[...this.globalFilterLogic()],i=this.first+this.pageSize,n=e.filter((t,e)=>e<=i);this.cdr.detectChanges(),this.pageWiseAuditLogs=[...n],this.setPageNumber()}globalFilterLogic(){if(this.mainAuditLogList.length){const t=Object.keys(this.mainAuditLogList[0]);if(this.globalFilterValue){if(this.filterValue=[],this.mainAuditLogList.forEach(e=>{let i=!1;t.forEach(t=>{e[t]&&e[t].toString().toLowerCase().includes(this.globalFilterValue.toLowerCase())&&!i&&(this.filterValue.push(e),i=!0)})}),this.columnFilter!={}){this.filterData=JSON.parse(JSON.stringify(this.columnFilter));const t=Object.keys(this.columnFilter);this.first=0,t.forEach(t=>{this.filterValue=this.filterValue.filter(e=>this.filterService.filters.contains(e[t],this.columnFilter[t]))})}return this.auditLogList=[...this.filterValue],this.calculateNumOfPages(),this.filterValue}if(this.calculateNumOfPages(),this.filterValue=[...this.mainAuditLogList],this.columnFilter!={}){this.filterData=JSON.parse(JSON.stringify(this.columnFilter));const t=Object.keys(this.columnFilter);this.first=0,t.forEach(t=>{this.filterValue=this.filterValue.filter(e=>this.filterService.filters.contains(e[t],this.columnFilter[t]))})}return this.auditLogList=[...this.filterValue],this.calculateNumOfPages(),this.auditLogList}return[]}getFilterData(t){this.columnFilter[t[0]]=t[1],this.filterData=JSON.parse(JSON.stringify(this.columnFilter));const e=Object.keys(this.columnFilter);this.displayFiltersFor[t[0]]=!1,this.first=0,this.auditLogList=[...this.mainAuditLogList],e.forEach(t=>{this.auditLogList=this.auditLogList.filter(e=>this.filterService.filters.contains(e[t],this.columnFilter[t]))}),this.setPageNumber()}resetFilter(t){this.columnFilter[t]=null,delete this.columnFilter[t],this.filterData=JSON.parse(JSON.stringify(this.columnFilter));const e=Object.keys(this.columnFilter);this.displayFiltersFor[t]=!1,this.first=0,this.auditLogList=[...this.mainAuditLogList],e.forEach(t=>{this.auditLogList=this.auditLogList.filter(e=>this.filterService.filters.contains(e[t],this.columnFilter[t]))}),this.setPageNumber()}setPageNumber(){if(this.totalNumOfPages=this.auditLogList.length?this.auditLogList.length<this.pageSize?1:Math.ceil(this.auditLogList.length/(this.pageSize+1)):0,this.numOfPages=[],this.selectedPage={},0===this.totalNumOfPages)this.numOfPages.push({pageIndex:0,page:0}),this.selectedPage={pageIndex:0,page:0};else if(1===this.totalNumOfPages)this.numOfPages.push({pageIndex:0,page:1}),this.selectedPage={pageIndex:0,page:1};else{this.selectedPage={pageIndex:0,page:1};for(let t=0;t<this.totalNumOfPages;t++)this.numOfPages.push({pageIndex:t,page:t+1})}const t=this.first+this.pageSize,e=this.auditLogList.filter((e,i)=>i<=t);this.pageWiseAuditLogs=[...e]}getFilterState(t){if(this.filterData&&null!=this.filterData&&""!==this.filterData){if(this.filterData[t]){const e=this.filterData[t];return delete this.filterData[t],{fieldName:t,filterWith:e}}return{fieldName:"",filterWith:""}}return{fieldName:"",filterWith:""}}filterColumnNameWithHighlightName(t){return!(Object.keys(this.columnFilter).findIndex(e=>e===t)<0)}clearLog(){const t=new Date(this.fromDate),e=new Date(this.toDate),i={fromDate:this.datePipe.transform(t,"yyyy-MM-dd"),toDate:this.datePipe.transform(e,"yyyy-MM-dd")};this.auditLogsService.clearLogs(i,"clearLogs").subscribe(t=>{"success"==t.status&&this.getAuditLogsList()})}downloadCSV(){const t=new Date(this.fromDate),e=new Date(this.toDate),i={fromDate:this.datePipe.transform(t,"yyyy-MM-dd"),toDate:this.datePipe.transform(e,"yyyy-MM-dd")};this.auditLogsService.downloadCsvAuditLogs(i,"downloadCsvforAuditLog").subscribe(t=>{Object(d.saveAs)(t,"Databuck_Audit_Logs.csv")})}}return t.\u0275fac=function(e){return new(e||t)(x.dc(w.c),x.dc(v.d),x.dc(y.a),x.dc(G),x.dc(n.d),x.dc(x.h))},t.\u0275cmp=x.Xb({type:t,selectors:[["app-audit-logs"]],decls:55,vars:41,consts:[[1,"content-wrapper","top"],[1,"form-row"],[1,"col"],[1,"form-group","p-field"],["id","essentialScreenNull",1,""],[1,"row"],[1,"col-sm-12","adjust"],[1,"nav","nav-pills","justify-content-left"],["id","category_01-tab","data-toggle","tab","href","#category_01",3,"ngClass"],["id","category_02-tab","data-toggle","tab","href","#category_02"],["id","countreason",1,"tab-content","clearfix"],["id","category_01",1,"tab-pane",3,"ngClass"],[1,"container-fluid","create-conn-main"],[1,"col-sm-12"],[1,"form-title"],["pButton","","type","button","label","Clear Log",1,"button","w-button","shadow","btn-mr-rt","submit-btn",3,"ngClass","click"],[1,"row","padding-left-10"],[1,"col-sm-3","col-md-3"],["for","from_date",1,"form-label"],["yearRange","2000:2030","inputId","dateformat","dateFormat","yy-mm-dd","appendTo","body",3,"styleClass","maxDate","ngModel","showIcon","monthNavigator","yearNavigator","readonlyInput","ngModelChange"],["yearRange","2000:2030","inputId","dateformat","dateFormat","yy-mm-dd","appendTo","body",3,"styleClass","minDate","maxDate","ngModel","showIcon","monthNavigator","yearNavigator","readonlyInput","ngModelChange"],[1,"col-sm-3","col-md-3","padding-top-30"],["pButton","","type","button","label","Show",1,"button","w-button","logoutButton","submit-btn",3,"click"],[1,"col-sm-3","col-md-3","padding-top-30","pr-28"],["src","assets/images/csv_icon.png","title","Download CSV","loading","lazy","alt","Download CSV",1,"download_btn_css","image-7",3,"click"],["src","assets/images/pdf_icon.jpg","title","Download PDF","loading","lazy","alt","Download PDF",1,"download_btn_css","image-7",3,"click"],[1,"row","p-field"],["id","view_audit_log_list",1,"col-sm-12","mr-top-20","pd-0"],["view_audit_log_list",""],["styleClass","p-datatable-gridlines p-datatable-striped","responsiveLayout","scroll","sortMode","single",3,"value","responsive","rowHover","sortField","sortOrder","pageLinks","filterDelay","resetPageOnSort","rows","first","customSort","firstChange","sortFunction"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["class","col-sm-12 no-records default-font-14-weight",4,"ngIf"],[1,"col-sm-12","pagination-div"],["class","pad-0",4,"ngIf"],["class","pad-0 pad-tp-10 text-right",4,"ngIf"],["exportPdfTemplate",""],["id","category_02",1,"tab-pane"],[1,"table-header"],[1,"gsearch"],["type","text","pInputText","","size","50","placeholder","Search",1,"gfilter",3,"ngModel","ngModelChange","keyup"],[1,"pi","pi-search","margin-gfilter"],[1,"header"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"field","pSortableColumn"],[3,"colFilterData","display","customId","fieldName","filterData","resetFilterValues"],[1,"columnFilter",3,"ngClass"],[1,"pi-filter-color",3,"ngClass","click"],[1,"row-ht"],["class","text-center word_break_word_all td-ellipsis",3,"title",4,"ngIf"],[1,"text-center","word_break_word_all","td-ellipsis",3,"title"],[1,"col-sm-12","no-records","default-font-14-weight"],[1,"pad-0"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"rows","totalRecords","showCurrentPageReport","first","onPageChange","firstChange"],["dq_paginator",""],[1,"pad-0","pad-tp-10","text-right"],["optionLabel","page","placeholder","Go to page",3,"options","filter","ngModel","ngModelChange","onChange"],["pTemplate","selectedItem"],["class","drpdwn-item",4,"ngIf"],[1,"drpdwn-item"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body","pdf-modal"],[1,"row","padding-btm"],[1,"modal-footer"],[1,"row","full-width"],[1,"col-lg-4"],["class","color-code",4,"ngIf"],[1,"col-lg-4","text-center"],["pButton","","type","button","label","Download",1,"button","w-button","shadow","btn-mr-rt","submit-btn",3,"disabled","click"],[1,"col-lg-4","arrow-text-right"],[1,"cursor-pointer",3,"click"],["src","assets/images/close.png",1,"margin-img","cursor-pointer",3,"click"],[1,"col-sm-4"],[1,"validations"],["binary","true","name","groupname1","value","customizeCols[cols.displayValue]",3,"ngModel","disabled","ngModelChange","onChange"],[1,"color-code"]],template:function(t,e){if(1&t){const t=x.kc();x.jc(0,"div",0),x.ec(1,"app-main-header"),x.jc(2,"div",1),x.jc(3,"div",2),x.jc(4,"div",3),x.jc(5,"div",4),x.jc(6,"div",5),x.jc(7,"div",6),x.jc(8,"ul",7),x.jc(9,"li"),x.jc(10,"a",8),x.bd(11,"Activity"),x.ic(),x.ic(),x.jc(12,"li"),x.jc(13,"a",9),x.bd(14,"Login"),x.ic(),x.ic(),x.ic(),x.jc(15,"div",10),x.jc(16,"div",11),x.jc(17,"div",12),x.jc(18,"div",5),x.jc(19,"div",13),x.jc(20,"p",14),x.jc(21,"button",15),x.qc("click",function(){return e.clearLog()}),x.ic(),x.ic(),x.ic(),x.ic(),x.jc(22,"div",16),x.jc(23,"div",17),x.jc(24,"label",18),x.bd(25,"From Date"),x.ic(),x.ec(26,"br"),x.jc(27,"p-calendar",19),x.qc("ngModelChange",function(t){return e.fromDate=t}),x.ic(),x.ic(),x.jc(28,"div",17),x.jc(29,"label",18),x.bd(30,"To Date"),x.ic(),x.ec(31,"br"),x.jc(32,"p-calendar",20),x.qc("ngModelChange",function(t){return e.toDate=t}),x.ic(),x.ic(),x.jc(33,"div",21),x.jc(34,"button",22),x.qc("click",function(){return e.getAuditLogsList()}),x.ic(),x.ic(),x.jc(35,"div",23),x.jc(36,"a"),x.jc(37,"img",24),x.qc("click",function(){return e.downloadCSV()}),x.ic(),x.ic(),x.jc(38,"a"),x.jc(39,"img",25),x.qc("click",function(){x.Rc(t);const i=x.Oc(52);return e.openExportPdf(i)}),x.ic(),x.ic(),x.ic(),x.ic(),x.jc(40,"div",26),x.jc(41,"div",27,28),x.jc(43,"p-table",29),x.qc("firstChange",function(t){return e.first=t})("sortFunction",function(t){return e.customSort(t)}),x.Zc(44,mt,5,1,"ng-template",30),x.Zc(45,Pt,2,1,"ng-template",31),x.Zc(46,wt,2,1,"ng-template",32),x.ic(),x.ic(),x.Zc(47,vt,2,0,"div",33),x.jc(48,"div",34),x.Zc(49,yt,3,4,"div",35),x.Zc(50,Mt,3,3,"div",36),x.ic(),x.ic(),x.ic(),x.Zc(51,St,17,3,"ng-template",null,37,x.ad),x.ic(),x.jc(53,"div",38),x.ec(54,"app-latest-login-activity"),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.ic(),x.ic()}if(2&t){let t=null;x.Nb(10),x.Bc("ngClass","active"),x.Nb(6),x.Bc("ngClass","active"),x.Nb(5),x.Bc("ngClass",null!=(t=e.roleOnModule("User Settings"))&&null!=t.accessControl&&t.accessControl.includes("D")?" cursor-pointer":"disable"),x.Nb(6),x.Bc("styleClass","form-field")("maxDate",e.toDate)("ngModel",e.fromDate)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("readonlyInput",!0),x.Nb(5),x.Bc("styleClass","form-field")("minDate",e.fromDate)("maxDate",e.maxDate)("ngModel",e.toDate)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("readonlyInput",!0),x.Nb(4),x.Rb("w-inline-block cursor-pointer float-right ",null!=e.pageWiseAuditLogs&&e.pageWiseAuditLogs.length?"":"disabled-opa",""),x.Nb(2),x.Rb("w-inline-block cursor-pointer float-right ",null!=e.pageWiseAuditLogs&&e.pageWiseAuditLogs.length?"":"disabled-opa",""),x.Nb(5),x.Vc(x.Ec(40,Nt)),x.Bc("value",e.pageWiseAuditLogs)("responsive",!0)("rowHover",!0)("sortField","user_name")("sortOrder",-1)("pageLinks",5)("filterDelay",0)("resetPageOnSort",!0)("rows",10)("first",e.first)("customSort",!0),x.Nb(4),x.Bc("ngIf",!e.pageWiseAuditLogs.length&&e.isNoRecordFound),x.Nb(2),x.Bc("ngIf",e.pageWiseAuditLogs.length),x.Nb(1),x.Bc("ngIf",e.pageWiseAuditLogs.length)}},directives:[_.a,n.l,M.b,X.a,o.o,o.r,D.f,v.i,n.n,ft,o.d,K.a,n.m,D.d,D.e,k.a,s.a,S.a,N.a],styles:['[_nghost-%COMP%]     .p-confirm-dialog-accept{border-radius:20px!important}.accept-btn-css[_ngcontent-%COMP%]{border-radius:20px!important}[_nghost-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{padding-right:10px!important}.no-records[_ngcontent-%COMP%]{padding:5px 15px;text-align:center;border-left:1px solid #e9ecef;border-right:1px solid #e9ecef;border-bottom:1px solid #e9ecef}.disabled-opa[_ngcontent-%COMP%]{opacity:.4;pointer-events:none!important}.err-msg[_ngcontent-%COMP%]{color:#e72b56}.red-btn[_ngcontent-%COMP%]{background:#e72b56!important}.more-display[_ngcontent-%COMP%]:hover{cursor:pointer}.field-dis-val[_ngcontent-%COMP%]{min-width:170px;font-weight:500;padding:3px}.padding-btm3[_ngcontent-%COMP%]{padding-bottom:12px}.padding-btm1[_ngcontent-%COMP%]{padding-bottom:20px}.pi-exclamation-circle[_ngcontent-%COMP%]{font-size:21px}.modal-title[_ngcontent-%COMP%]{font-weight:600;font-size:16px}.modal-title-delete[_ngcontent-%COMP%]{font-weight:600;font-size:21px}[_nghost-%COMP%]     .p-inputtext:enabled:focus{box-shadow:none!important}.pad-0[_ngcontent-%COMP%]{padding:0}.copy-ip[_ngcontent-%COMP%]{margin-top:10px;font-size:14px;box-shadow:none!important}.pad-tp-10[_ngcontent-%COMP%]{padding-top:10px!important}.pagination-div[_ngcontent-%COMP%]{display:flex;justify-content:end;padding:0 10px}.header-width[_ngcontent-%COMP%]{width:90px}.conn-name-td[_ngcontent-%COMP%]{width:180px}.conn-name[_ngcontent-%COMP%]{padding:5px 10px;width:93%!important}.alation-div[_ngcontent-%COMP%], .conn-name[_ngcontent-%COMP%]{border-radius:20px;color:#fff;font-weight:600;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;display:inline-block}.alation-icon-green[_ngcontent-%COMP%]{color:green}.alation-icon-white[_ngcontent-%COMP%]{color:#fff;visibility:hidden}.conn-failed[_ngcontent-%COMP%]{background-color:#e72b56;opacity:.7}.conn-pass[_ngcontent-%COMP%]{background-color:#56b608}.fa-files-o[_ngcontent-%COMP%], .fa-pencil[_ngcontent-%COMP%]{color:#337ab7}.fa-trash[_ngcontent-%COMP%]{color:#e72b56}.fa-deactivate[_ngcontent-%COMP%]{color:#c32121}.fa-activate[_ngcontent-%COMP%]{color:#181894}.row-ht[_ngcontent-%COMP%]{height:30px}.pd-top-30[_ngcontent-%COMP%]{padding-top:30px}.mr-top-20[_ngcontent-%COMP%]{margin-top:20px}.td-ellipsis[_ngcontent-%COMP%]{word-break:break-all;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.pd-0[_ngcontent-%COMP%]{padding:0}.width-225[_ngcontent-%COMP%]{width:225px}.columnFilterClass[_ngcontent-%COMP%]{z-index:1008;transform-origin:right;top:64.4236px;position:absolute;flex-direction:column;background:#fff;color:#495057;border:0;border-radius:3px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12);min-width:12.5rem}.add-icon[_ngcontent-%COMP%]{height:40px;width:40px}.filterDisplay[_ngcontent-%COMP%]{display:inline-block;z-index:9}.margin-l[_ngcontent-%COMP%]{margin-left:5px;width:30px}.width-100[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .p-datatable .p-datatable-header{padding:.2rem;height:40px;font-size:14px;border-top-right-radius:10px!important;border-top-left-radius:10px!important}.button[_ngcontent-%COMP%]{font-weight:500;background:linear-gradient(180deg,#ff7526,#fb9a64)!important;font-size:13px}.btn-label[_ngcontent-%COMP%], [_nghost-%COMP%]     .submit-btn .p-button-label{width:156px;font-size:14px!important;font-weight:600!important;font-style:normal;font-family:Open Sans;height:40px;color:#fff}[_nghost-%COMP%]     .p-calendar .p-inputtext{box-shadow:none!important}.create-conn-main[_ngcontent-%COMP%]{margin-top:27px;background-color:#fff;border-radius:20px;padding:15px;box-shadow:0 2px 8px 0 rgba(99,99,99,.2)}.form-title[_ngcontent-%COMP%]{font-family:Open_Sans_Semi_Bold;font-size:17px;margin-top:-10px;margin-bottom:5px;padding:10px 0 10px 10px}.br-top[_ngcontent-%COMP%]{border-top:1px solid #eef1f5;padding-top:10px}.form-label[_ngcontent-%COMP%]{font-size:15px;font-weight:600;font-family:Open_Sans_Semi_Bold}.p-field[_ngcontent-%COMP%]{margin:0 10px}.form-field[_ngcontent-%COMP%]{width:100%!important;border-radius:10px!important}[_nghost-%COMP%]     .p-calendar{width:100%!important;border-radius:10px!important;height:35px!important;margin:0!important;box-shadow:none!important}[_nghost-%COMP%]     p-calendar .p-button.p-button-icon-only{width:2.357rem;padding:1.15rem 0!important;display:inline-flex!important}.adjust[_ngcontent-%COMP%]{top:10px}.nav-pills[_ngcontent-%COMP%]{background:#fff;border-bottom:1px solid #dedede;border-radius:8px 8px 0 0}.nav-pills[_ngcontent-%COMP%], .nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{height:50px;position:relative}.nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-right:-1%;margin-top:.1%;top:10px}.nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{position:relative;padding:15px 20px;line-height:19px;color:#717171;font-size:14px;font-weight:700;z-index:1}.nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:transparent;border-color:transparent}.nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{content:"";width:100%;height:50px;position:absolute;bottom:1%;left:-1px;font-size:12px;background:transparent;border:1px solid transparent;z-index:-1}.nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]:before{background:linear-gradient(180deg,transparent,transparent);bottom-border-color:#dedede;font-size:16px;font-family:Open Sans!important;text-align:center;border-radius:8px 8px 0 0}.nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%], .nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]:focus, .nav-pills[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]:hover{border:1px solid transparent;background:transparent;color:#951447;font-weight:700;z-index:2;-webkit-text-decoration:underline 3px;text-decoration:underline 3px;text-underline-offset:8px}a[_ngcontent-%COMP%]:hover{text-decoration:none}.tab-content[_ngcontent-%COMP%]   .tab-pane[_ngcontent-%COMP%]{box-shadow:0 0 15px #e6e5e5;padding:5px 20px 20px;background:#fff;line-height:22px}.tab-content[_ngcontent-%COMP%]   .tab-pane[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0}.fromstyle[_ngcontent-%COMP%]{padding-left:0;padding-right:30px}.margin-top-10[_ngcontent-%COMP%]{margin-top:10px}.notify-font[_ngcontent-%COMP%]{font-size:15px;color:inherit}#container1[_ngcontent-%COMP%]{width:90%;overflow-x:scroll}.pr-28[_ngcontent-%COMP%]{padding-right:24px}']}),t})();var Ft=i("ey9i"),It=i("J4N/");function zt(t,e){if(1&t){const t=x.kc();x.jc(0,"div",11),x.jc(1,"label",4),x.bd(2),x.ic(),x.ec(3,"br"),x.jc(4,"p-dropdown",12),x.qc("onChange",function(e){return x.Rc(t),x.uc().changeLogListChild(e.value)}),x.ic(),x.ic()}if(2&t){const t=x.uc();x.Nb(2),x.dd(" ",t.otherLogsForm.controls.filePath.value," Logs "),x.Nb(2),x.Bc("styleClass","form-field")("filter",!0)("options",t.newList)("placeholder",t.logPlaceholder)("virtualScroll",!0)("itemSize",30)}}function Vt(t,e){if(1&t){const t=x.kc();x.jc(0,"a",13),x.qc("click",function(){return x.Rc(t),x.uc().refresh()}),x.jc(1,"span",14),x.ec(2,"i",15),x.ic(),x.ic()}}function Rt(t,e){if(1&t){const t=x.kc();x.jc(0,"a",16),x.qc("click",function(){x.Rc(t);const e=x.uc();return e.copyMessage(e.log)}),x.jc(1,"span",17),x.ec(2,"i",18),x.jc(3,"span",19),x.bd(4,"Successfully Copied"),x.ic(),x.ic(),x.ic()}}const Bt=[{path:"",component:jt,data:{breadcrumb:"Audit Trail"}},{path:"access-logs",component:$,data:{breadcrumb:"Access Logs"}},{path:"other-logs",component:(()=>{class t{constructor(t,e,i,n){this.accesslog=t,this.fb=e,this.messages=i,this.domainProjService=n,this.log="",this.filePathList=[],this.newList=[],this.newListEnable=!1,this.databuckHome="",this.tomcatHome="",this.logPlaceholder="",this.listOfNumbers=[{number:500},{number:1e3},{number:2e3}]}ngOnInit(){this.domainProjService.passDomainProjVal(!0),this.otherLogsForm=this.fb.group({filePath:["",o.w.compose([o.w.required])],newfilePath:[""],noOfLines:[500],newChildfilePath:[""]}),this.accesslog.getEnvironmentVariables().subscribe(t=>{"success"==t.status&&(this.databuckHome=t.result.databuckHome,this.tomcatHome=t.result.tomcatHome,this.accesslog.getLogsList({logFolderPath:this.databuckHome+"/logs"}).subscribe(t=>{this.filePathList=t.result,this.filePathList.push({name:"databucklogs.log",isDirectory:!1}),this.filePathList.push({name:"databuckerror.log",isDirectory:!1})}))})}changeLogList(t){if(this.event1=t,""==t)this.messages.displayToaster("Please select Databuck Logs","warn","Warning!");else if(this.log="","databucklogs.log"==t||"databuckerror.log"==t)this.accesslog.readLogFileDataByPath({logFilePath:this.tomcatHome+"/logs/"+t,noOfLines:this.otherLogsForm.value.noOfLines}).subscribe(t=>{this.newListEnable=!1,this.log=t.result});else{this.otherLogsForm.controls.newfilePath.setValue("");const e=this.filePathList.filter(e=>e.name==t);this.logFolderPath=this.databuckHome+"/logs/"+e[0].name,e[0].isDirectory?this.accesslog.getLogsList({logFolderPath:this.logFolderPath}).subscribe(t=>{this.newList=t.result,this.newListEnable=!0,this.logPlaceholder="Select "+this.otherLogsForm.controls.filePath.value+" Logs"}):(this.otherLogsForm.controls.newfilePath.setValue(""),this.accesslog.readLogFileDataByPath({logFilePath:this.logFolderPath,noOfLines:this.otherLogsForm.value.noOfLines}).subscribe(t=>{this.newListEnable=!1,this.log=t.result}))}}changeLogListChild(t){this.event2=t;const e=this.newList.filter(e=>e.name==t),i=this.logFolderPath+"/"+e[0].name;e[0].isDirectory?this.accesslog.getLogsList({logFolderPath:i}).subscribe(t=>{this.newChildList=t.result,this.newChildListEnable=!0}):this.accesslog.readLogFileDataByPath({logFilePath:i,noOfLines:this.otherLogsForm.value.noOfLines}).subscribe(t=>{this.newChildListEnable=!1,this.log=t.result})}changeLineNumber(){this.newListEnable?this.changeLogListChild(this.otherLogsForm.value.newfilePath):this.changeLogList(this.otherLogsForm.value.filePath)}copyMessage(t){navigator.clipboard.writeText(t).then().catch(t=>console.log(t))}refresh(){"databucklogs.log"==this.event1||"databuckerror.log"==this.event1?this.changeLogList(this.event1):(this.changeLogList(this.event1),this.changeLogListChild(this.event2),this.otherLogsForm.controls.newfilePath.setValue(this.event2))}}return t.\u0275fac=function(e){return new(e||t)(x.dc(L.a),x.dc(o.e),x.dc(Ft.b),x.dc(It.a))},t.\u0275cmp=x.Xb({type:t,selectors:[["app-other-logs"]],decls:20,vars:15,consts:[[1,"content-wrapper","top"],[1,"container-fluid","create-conn-main","margin-top-27",3,"formGroup"],[1,"row","p-field"],[1,"col-sm-12","col-md-6"],["for","rule_category",1,"form-label"],["formControlName","noOfLines","placeholder","Select Number of Lines","optionValue","number","optionLabel","number",1,"newheight",3,"styleClass","filter","options","virtualScroll","itemSize","onChange"],["formControlName","filePath","placeholder","Select DataBuck Logs","optionValue","name","optionLabel","name",3,"styleClass","filter","options","virtualScroll","itemSize","onChange"],["class","col-sm-12 col-md-6 mr-top",4,"ngIf"],[1,"div_css"],["class","advance_tab cursor-pointer form-label position","value","Refresh","title","Refresh",3,"click",4,"ngIf"],["class","advance_tab cursor-pointer form-label position","value","Copy","title","Copy",3,"click",4,"ngIf"],[1,"col-sm-12","col-md-6","mr-top"],["formControlName","newfilePath","optionValue","name","optionLabel","name",3,"styleClass","filter","options","placeholder","virtualScroll","itemSize","onChange"],["value","Refresh","title","Refresh",1,"advance_tab","cursor-pointer","form-label","position",3,"click"],[1,"back_btn_refresh"],[1,"fa","fa-refresh"],["value","Copy","title","Copy",1,"advance_tab","cursor-pointer","form-label","position",3,"click"],[1,"back_btn"],[1,"fa","fa-files-o"],["id","snackbar"]],template:function(t,e){1&t&&(x.jc(0,"div",0),x.ec(1,"app-main-header"),x.jc(2,"div",1),x.jc(3,"div",2),x.jc(4,"div",3),x.jc(5,"label",4),x.bd(6,"No of Lines"),x.ic(),x.ec(7,"br"),x.jc(8,"p-dropdown",5),x.qc("onChange",function(){return e.changeLineNumber()}),x.ic(),x.ic(),x.jc(9,"div",3),x.jc(10,"label",4),x.bd(11,"DataBuck Logs"),x.ic(),x.ec(12,"br"),x.jc(13,"p-dropdown",6),x.qc("onChange",function(t){return e.changeLogList(t.value)}),x.ic(),x.ic(),x.Zc(14,zt,5,7,"div",7),x.ic(),x.jc(15,"div",8),x.Zc(16,Vt,3,0,"a",9),x.Zc(17,Rt,5,0,"a",10),x.ec(18,"br"),x.bd(19),x.ic(),x.ic(),x.ic()),2&t&&(x.Nb(2),x.Bc("formGroup",e.otherLogsForm),x.Nb(6),x.Bc("styleClass","form-field")("filter",!0)("options",e.listOfNumbers)("virtualScroll",!0)("itemSize",30),x.Nb(5),x.Bc("styleClass","form-field")("filter",!0)("options",e.filePathList)("virtualScroll",!0)("itemSize",30),x.Nb(1),x.Bc("ngIf",e.newListEnable),x.Nb(2),x.Bc("ngIf",e.log.length>0),x.Nb(1),x.Bc("ngIf",e.log.length>0),x.Nb(2),x.dd(" ",e.log," "))},directives:[_.a,o.p,o.i,S.a,o.o,o.g,n.n],styles:[".create-conn-main[_ngcontent-%COMP%]{margin-top:27px;background-color:#fff;border-radius:20px;padding:15px;box-shadow:0 2px 8px 0 rgba(99,99,99,.2);font-family:Open Sans!important}.div_css[_ngcontent-%COMP%]{height:500px;width:100%;background:#faebd7;border:5px solid wheat;margin-top:15px;min-height:100px;overflow-y:scroll;padding:10px;white-space:pre-line}.back_btn[_ngcontent-%COMP%]{padding:3px}.back_btn[_ngcontent-%COMP%], .back_btn_refresh[_ngcontent-%COMP%]{background:none!important;border-radius:5px}.back_btn_refresh[_ngcontent-%COMP%]{padding:30px;color:#630061!important}.fa-files-o[_ngcontent-%COMP%]{color:#630061}.position[_ngcontent-%COMP%]{position:absolute;right:70px}.mr-top[_ngcontent-%COMP%]{padding-top:15px}#snackbar[_ngcontent-%COMP%]{visibility:hidden;color:#fff;background-color:#333;min-width:250px;margin-left:-125px;border-radius:2px;padding:16px;text-align:center;left:50%;bottom:30px;z-index:1;position:fixed}#snackbar.show[_ngcontent-%COMP%]{visibility:visible;animation:fadein .5s,fadeout .5s 2.5s}@keyframes fadein{0%{bottom:0;opacity:0}to{bottom:30px;opacity:1}}@keyframes fadeout{0%{bottom:30px;opacity:1}to{bottom:0;opacity:0}}"]}),t})(),data:{breadcrumb:"Logs"}}];let Et=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=x.bc({type:t}),t.\u0275inj=x.ac({imports:[[r.l.forChild(Bt)],r.l]}),t})(),Wt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=x.bc({type:t}),t.\u0275inj=x.ac({imports:[[n.b,Et,a.a,o.j,l.a,c.a,s.b]]}),t})()}}]);