(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{tRzR:function(t,e,i){"use strict";i.d(e,"a",function(){return O});var n=i("fXoL"),a=i("0DOw"),o=i("yLa2"),s=i("tPnb"),l=i("Nmef"),c=i("tyNb"),d=i("ofXK"),r=i("lVkt"),p=i("3Pt+"),m=i("7zfz"),u=i("arFO"),h=i("jIHw"),g=i("h9v1");function f(t,e){if(1&t&&(n.jc(0,"div",19),n.jc(1,"div"),n.bd(2),n.ic(),n.ic()),2&t){const t=n.uc(3);n.Nb(2),n.cd(t.selectedValidation.length<=2?t.getselectedValidationString():"{"+t.selectedValidation.length+"} selected")}}function v(t,e){if(1&t&&(n.jc(0,"div",20),n.bd(1),n.ic()),2&t){const t=n.uc(3);n.Nb(1),n.dd(" Select ",t.appConstant.baseName," Name ")}}function b(t,e){if(1&t&&(n.Zc(0,f,3,1,"div",17),n.Zc(1,v,2,1,"div",18)),2&t){const t=n.uc(2);n.Bc("ngIf",t.selectedValidation.length),n.Nb(1),n.Bc("ngIf",!t.selectedValidation||0===t.selectedValidation.length)}}function N(t,e){if(1&t&&(n.jc(0,"div",21),n.jc(1,"div"),n.bd(2),n.ic(),n.ic()),2&t){const t=e.$implicit;n.Nb(2),n.cd(t.validationName)}}function C(t,e){if(1&t){const t=n.kc();n.jc(0,"div",2),n.jc(1,"div",3),n.jc(2,"div",4),n.jc(3,"div",5),n.jc(4,"label",6),n.bd(5),n.jc(6,"sup",7),n.bd(7,"*"),n.ic(),n.ic(),n.ec(8,"br"),n.jc(9,"p-multiSelect",8),n.qc("ngModelChange",function(e){return n.Rc(t),n.uc().selectedValidation=e}),n.Zc(10,b,2,2,"ng-template",9),n.Zc(11,N,3,1,"ng-template",10),n.ic(),n.ic(),n.ic(),n.jc(12,"div",4),n.jc(13,"div",5),n.jc(14,"label",6),n.bd(15,"Load type"),n.ic(),n.ec(16,"br"),n.jc(17,"p-dropdown",11),n.qc("ngModelChange",function(e){return n.Rc(t),n.uc().selectedRunType=e})("ngModelChange",function(e){return n.Rc(t),n.uc().onChangeRunType(e)}),n.ic(),n.ic(),n.ic(),n.jc(18,"div",12),n.jc(19,"div",13),n.jc(20,"p"),n.bd(21,"Note: Fields marked with "),n.jc(22,"b"),n.bd(23,'"*"'),n.ic(),n.bd(24," are required. "),n.ic(),n.ic(),n.ic(),n.jc(25,"div",14),n.jc(26,"div",15),n.jc(27,"button",16),n.qc("click",function(){return n.Rc(t),n.uc().submit()}),n.ic(),n.ic(),n.ic(),n.ic(),n.ic()}if(2&t){const t=n.uc();n.Nb(5),n.dd("",t.appConstant.baseName," Name"),n.Nb(4),n.Bc("options",t.chooseValidation)("ngModel",t.selectedValidation)("filter",t.chooseValidation.length>0)("maxSelectedLabels",5)("selectedItemsLabel","{0} items selected"),n.Nb(8),n.Bc("options",t.valiRunType)("ngModel",t.selectedRunType)("virtualScroll",!0)("itemSize",30),n.Nb(10),n.Bc("disabled",!t.selectedValidation.length)}}function w(t,e){if(1&t&&(n.jc(0,"div",23),n.jc(1,"div",4),n.jc(2,"div",24),n.jc(3,"p",25),n.bd(4),n.ic(),n.ic(),n.ic(),n.jc(5,"div",4),n.ec(6,"app-progress-bar",26),n.ic(),n.ic()),2&t){const t=e.$implicit,i=n.uc(2);n.Nb(4),n.ed(" ",i.appConstant.baseName," Name: ",t.validationName," "),n.Nb(2),n.Bc("value",null==t?null:t.value)("appName",null==t?null:t.appName)("success",null==t?null:t.success)("progressBarShow",null==t?null:t.progressBarShow)}}function I(t,e){if(1&t&&(n.jc(0,"div"),n.Zc(1,w,7,6,"div",22),n.ic()),2&t){const t=n.uc();n.Nb(1),n.Bc("ngForOf",t.result)}}let O=(()=>{class t{constructor(t,e,i){this.runService=t,this.homeServiceService=e,this.router=i,this.selectedValidation=[],this.chooseValidation=[],this.taskName=[],this.idApp=[],this.unitTestDetails={},this.fullLoadDetails={},this.projectDomains=[],this.valiRunType=[{name:"Full Load",code:"full_load"},{name:"Unit Testing",code:"unit_testing"}],this.count=0,this.show=!0,this.selectedRunType="full_load",this.showRunTypeDropdown=new n.p,this.arr=[],this.appConstant=new o.a}ngOnInit(){if(this.domainId=sessionStorage.getItem("activeDomainId")+"_"+sessionStorage.getItem("activeProjectId"),this.unitTestDetails=JSON.parse(sessionStorage.getItem("unitTestRun")),this.fullLoadDetails=JSON.parse(sessionStorage.getItem("fullLoadRun")),null!=this.unitTestDetails){this.selectedRunType="unit_testing",this.valName=this.unitTestDetails.ValidationCheckName;const t=Number(this.unitTestDetails.ValidationId);this.idApp.push(t),this.show=!1,this.progressCheck()}else if(null!=this.fullLoadDetails){this.selectedRunType="full_load",this.valName=this.fullLoadDetails.ValidationCheckName;const t=Number(this.fullLoadDetails.ValidationId);this.idApp.push(t),this.show=!1,this.progressCheck()}else{this.projectDomains=this.homeServiceService.getProjectList(),this.projectDomains.map(t=>{t.domainProject=t.domainName+"-"+t.projectName,t.domainAndProjectId=t.domainId+"_"+t.idProject,t.domainAndProjectName=t.domainName+"-"+t.projectName});const t={domainId:sessionStorage.getItem("activeDomainId"),projectId:sessionStorage.getItem("activeProjectId")};this.runService.getValCheckNameList("validationCheckName",t).subscribe(t=>{var e;this.chooseValidation=t.result,null===(e=this.chooseValidation)||void 0===e||e.map(t=>{t.validationName=t.validationName})})}this.onChangeDomProj()}ngOnDestroy(){this.arr.map(t=>{clearInterval(t),this.arr=[]}),sessionStorage.removeItem("unitTestRun"),sessionStorage.removeItem("fullLoadRun"),sessionStorage.removeItem("run")}onChangeDomProj(){this.selectedValidation=[];const t={domainId:sessionStorage.getItem("activeDomainId"),projectId:sessionStorage.getItem("activeProjectId")};this.runService.getValCheckNameList("validationCheckName",t).subscribe(t=>{var e;this.chooseValidation=t.result,null===(e=this.chooseValidation)||void 0===e||e.map(t=>{t.validationName=t.validationName})})}onChangeRunType(t){}submit(){this.count=0,this.selectedValidation.forEach(t=>{this.validationNameList=this.selectedValidation.find(t=>t.validationName===this.selectedValidation[this.count].validationName),this.taskName.push(this.selectedValidation[this.count].validationName),this.idApp.push(this.selectedValidation[this.count].appId),this.count++}),this.validationCheckName=this.taskName.toString(),this.show=!1,this.showRunTypeDropdown.emit(!1),this.progressCheck()}getselectedValidationString(){let t="";return this.selectedValidation.forEach((e,i)=>{t=t+(0!=i?",":"")+e.validationName}),t}progressCheck(){this.unitTestDetails=JSON.parse(sessionStorage.getItem("unitTestRun")),this.fullLoadDetails=JSON.parse(sessionStorage.getItem("fullLoadRun"));let t=0;const e=new a.a;e.validationRunType=this.selectedRunType,e.appIds=JSON.stringify(this.idApp),this.runService.getRunAndTask("runTaskResult",e).subscribe(e=>{var i;this.result=e.result,null===(i=this.result)||void 0===i||i.map(e=>{const i=this.result.find(e=>e.uniqueId===this.result[t].uniqueId);e.intervalId=setInterval(()=>{null===this.unitTestDetails&&null===this.fullLoadDetails?this.selectedValidation.forEach(t=>{t.appId==i.appId&&(e.validationName=t.validationName,this.valName=t.validationName)}):(e.validationName=null!=this.unitTestDetails?this.unitTestDetails.ValidationCheckName:this.fullLoadDetails.ValidationCheckName,this.valName=e.validationName);const t=new a.b;t.idApp=i.appId,t.task_name=this.valName,t.uniqueId=i.uniqueId,this.runService.getStatusPoll("statusPoll",t).subscribe(t=>{var i;e.success=null===(i=null==t?void 0:t.result)||void 0===i?void 0:i.status,"Task queued"===e.success||"Task started"===e.success?e.progressBarShow=!1:"Task in progress"===e.success?(e.value=t.result.percentage,e.progressBarShow=!0,e.value>=100&&(e.value=100)):("Task killed"===e.success||"Task completed"===e.success||"Task failed"===e.success)&&(e.progressBarShow=!1,clearInterval(e.intervalId))})},2500),this.arr.push(e.intervalId),t++})})}}return t.\u0275fac=function(e){return new(e||t)(n.dc(s.a),n.dc(l.a),n.dc(c.i))},t.\u0275cmp=n.Xb({type:t,selectors:[["app-run"]],outputs:{showRunTypeDropdown:"showRunTypeDropdown"},decls:2,vars:2,consts:[["class","create-conn-main",4,"ngIf"],[4,"ngIf"],[1,"create-conn-main"],[1,"main-container"],[1,"row"],[1,"col-sm-12","col-md-6","mr-top"],["for","validationCheckType",1,"form-label"],[1,"req-field"],["defaultLabel","Select Validation","optionLabel","validationName","name","selectedValidation",1,"multiselect-custom",3,"options","ngModel","filter","maxSelectedLabels","selectedItemsLabel","ngModelChange"],["pTemplate","selectedItems"],["pTemplate","item"],["optionLabel","name","optionValue","code",3,"options","ngModel","virtualScroll","itemSize","ngModelChange"],[1,"note","row"],[1,"col-sm-12","col-md-6","mr-top","text-left"],[1,"row","mr-top"],[1,"col-sm-12","col-md-12"],["pButton","","type","button","label","Submit",1,"button","w-button","shadow","btn-mr-rt",3,"disabled","click"],["class","validationType-item validationType-item-value",4,"ngIf"],["class","validationType-placeholder",4,"ngIf"],[1,"validationType-item","validationType-item-value"],[1,"validationType-placeholder"],[1,"validationType-item"],["class","container-fluid create-conn-main1",4,"ngFor","ngForOf"],[1,"container-fluid","create-conn-main1"],[1,"col-sm-12"],[1,"form-title","wordBreak1"],[1,"padding-left-0",3,"value","appName","success","progressBarShow"]],template:function(t,e){1&t&&(n.Zc(0,C,28,11,"div",0),n.Zc(1,I,2,1,"div",1)),2&t&&(n.Bc("ngIf",e.show),n.Nb(1),n.Bc("ngIf",!e.show))},directives:[d.n,r.a,p.o,p.r,m.i,u.a,h.b,d.m,g.a],styles:["[_ngcontent-%COMP%]::-moz-placeholder{color:gray;opacity:.8}[_ngcontent-%COMP%]::placeholder{color:gray;opacity:.8}button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.req-field[_ngcontent-%COMP%]{color:#eb5454;font-weight:700!important}.add-icon[_ngcontent-%COMP%]{height:25px;width:25px}.note[_ngcontent-%COMP%]{text-align:left;font-size:13px;color:#eb5454;margin-top:30px!important}.err-msg[_ngcontent-%COMP%]{font-size:12px;color:#f66e63;margin-bottom:0;padding-top:8px;padding-left:5px}[_nghost-%COMP%]     .p-inputtext:enabled:focus{box-shadow:none!important}.create-conn-main[_ngcontent-%COMP%], .create-conn-main1[_ngcontent-%COMP%]{margin-top:15px;background-color:#fff;font-family:Open Sans!important}.create-conn-main1[_ngcontent-%COMP%]{border-radius:20px;padding:15px;box-shadow:0 2px 8px 0 rgba(99,99,99,.2)}.mr-top[_ngcontent-%COMP%]{padding-top:10px}.p-field-checkbox-form[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.form-title[_ngcontent-%COMP%]{padding:10px 0;font-family:Open_Sans_Semi_Bold!important;font-size:18px;border-bottom:1px solid #eef1f5;margin-top:-10px}.form-label[_ngcontent-%COMP%]{font-size:16px}[_nghost-%COMP%]     .p-inputtext{font-size:14px!important}.p-field[_ngcontent-%COMP%]{margin:0 10px}.p-field-form[_ngcontent-%COMP%]{padding-right:0}.diabled-ip[_ngcontent-%COMP%]{opacity:.7;box-shadow:none!important;cursor:inherit}.diabled-ip[_ngcontent-%COMP%]:hover{border:1px solid #ced4da;cursor:not-allowed!important}.form-field[_ngcontent-%COMP%]{width:100%!important;border-radius:10px!important}.btn-cancel[_ngcontent-%COMP%]{margin-right:10px;background-color:#eb5454!important}[_nghost-%COMP%]     .p-dropdown{width:100%!important;border-radius:10px!important;height:37px!important}[_nghost-%COMP%]     .p-multiselect{width:100%!important;border-radius:10px!important;height:37px!important}[_nghost-%COMP%]     .multiselect-custom .p-multiselect-label{padding-top:.5rem!important;padding-bottom:.5rem!important}[_nghost-%COMP%]     .multiselect-custom .validationType-item-value{padding:.1rem .25rem!important;border-radius:3px!important;display:inline-flex!important;margin-right:.5rem!important}[_nghost-%COMP%]     .multiselect-custom .validationType-item div{white-space:normal;word-break:break-word}[_nghost-%COMP%]     .multiselect-custom .validationType-placeholder{font-family:Open Sans!important;font-size:14px!important;font-weight:400;padding:.25rem}@media screen and (max-width:640px){[_nghost-%COMP%]     .p-multiselect{width:100%!important}}[_nghost-%COMP%]     .p-disabled:hover{cursor:not-allowed!important}.optional-fields[_ngcontent-%COMP%]{color:#789}.form-checkbox[_ngcontent-%COMP%]{padding-left:10px;font-size:16px;padding-top:8px}.btn-mr-rt[_ngcontent-%COMP%]{margin-right:10px;background:linear-gradient(180deg,#ff7526,#fb9a64)!important}[_nghost-%COMP%]     .p-button-label{width:156px;font-size:14px;font-weight:600;font-style:normal;height:40px;color:#fff}.cursor-not[_ngcontent-%COMP%]:hover{cursor:not-allowed!important}.p-progressbar[_ngcontent-%COMP%]   .p-progressbar-value[_ngcontent-%COMP%]{margin:0;background:#051fa8!important;background-color:#051fa8!important}.p-progressbar[_ngcontent-%COMP%]{border:0;height:20px!important;background:#dee2e6;border-radius:3px}.padding-left-0[_ngcontent-%COMP%]{padding-left:0!important}"]}),t})()}}]);