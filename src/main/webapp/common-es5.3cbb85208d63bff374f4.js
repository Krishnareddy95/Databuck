!function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"))?o:String(o)),n)}var a,o}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{tRzR:function(t,i,n){"use strict";n.d(i,"a",function(){return I});var a=n("fXoL"),o=n("0DOw"),s=n("yLa2"),l=n("tPnb"),r=n("Nmef"),c=n("tyNb"),d=n("ofXK"),p=n("lVkt"),u=n("3Pt+"),m=n("7zfz"),g=n("arFO"),h=n("jIHw"),f=n("h9v1");function v(e,t){if(1&e&&(a.jc(0,"div",19),a.jc(1,"div"),a.bd(2),a.ic(),a.ic()),2&e){var i=a.uc(3);a.Nb(2),a.cd(i.selectedValidation.length<=2?i.getselectedValidationString():"{"+i.selectedValidation.length+"} selected")}}function b(e,t){if(1&e&&(a.jc(0,"div",20),a.bd(1),a.ic()),2&e){var i=a.uc(3);a.Nb(1),a.dd(" Select ",i.appConstant.baseName," Name ")}}function N(e,t){if(1&e&&(a.Zc(0,v,3,1,"div",17),a.Zc(1,b,2,1,"div",18)),2&e){var i=a.uc(2);a.Bc("ngIf",i.selectedValidation.length),a.Nb(1),a.Bc("ngIf",!i.selectedValidation||0===i.selectedValidation.length)}}function w(e,t){if(1&e&&(a.jc(0,"div",21),a.jc(1,"div"),a.bd(2),a.ic(),a.ic()),2&e){var i=t.$implicit;a.Nb(2),a.cd(i.validationName)}}function C(e,t){if(1&e){var i=a.kc();a.jc(0,"div",2),a.jc(1,"div",3),a.jc(2,"div",4),a.jc(3,"div",5),a.jc(4,"label",6),a.bd(5),a.jc(6,"sup",7),a.bd(7,"*"),a.ic(),a.ic(),a.ec(8,"br"),a.jc(9,"p-multiSelect",8),a.qc("ngModelChange",function(e){return a.Rc(i),a.uc().selectedValidation=e}),a.Zc(10,N,2,2,"ng-template",9),a.Zc(11,w,3,1,"ng-template",10),a.ic(),a.ic(),a.ic(),a.jc(12,"div",4),a.jc(13,"div",5),a.jc(14,"label",6),a.bd(15,"Load type"),a.ic(),a.ec(16,"br"),a.jc(17,"p-dropdown",11),a.qc("ngModelChange",function(e){return a.Rc(i),a.uc().selectedRunType=e})("ngModelChange",function(e){return a.Rc(i),a.uc().onChangeRunType(e)}),a.ic(),a.ic(),a.ic(),a.jc(18,"div",12),a.jc(19,"div",13),a.jc(20,"p"),a.bd(21,"Note: Fields marked with "),a.jc(22,"b"),a.bd(23,'"*"'),a.ic(),a.bd(24," are required. "),a.ic(),a.ic(),a.ic(),a.jc(25,"div",14),a.jc(26,"div",15),a.jc(27,"button",16),a.qc("click",function(){return a.Rc(i),a.uc().submit()}),a.ic(),a.ic(),a.ic(),a.ic(),a.ic()}if(2&e){var n=a.uc();a.Nb(5),a.dd("",n.appConstant.baseName," Name"),a.Nb(4),a.Bc("options",n.chooseValidation)("ngModel",n.selectedValidation)("filter",n.chooseValidation.length>0)("maxSelectedLabels",5)("selectedItemsLabel","{0} items selected"),a.Nb(8),a.Bc("options",n.valiRunType)("ngModel",n.selectedRunType)("virtualScroll",!0)("itemSize",30),a.Nb(10),a.Bc("disabled",!n.selectedValidation.length)}}function y(e,t){if(1&e&&(a.jc(0,"div",23),a.jc(1,"div",4),a.jc(2,"div",24),a.jc(3,"p",25),a.bd(4),a.ic(),a.ic(),a.ic(),a.jc(5,"div",4),a.ec(6,"app-progress-bar",26),a.ic(),a.ic()),2&e){var i=t.$implicit,n=a.uc(2);a.Nb(4),a.ed(" ",n.appConstant.baseName," Name: ",i.validationName," "),a.Nb(2),a.Bc("value",null==i?null:i.value)("appName",null==i?null:i.appName)("success",null==i?null:i.success)("progressBarShow",null==i?null:i.progressBarShow)}}function P(e,t){if(1&e&&(a.jc(0,"div"),a.Zc(1,y,7,6,"div",22),a.ic()),2&e){var i=a.uc();a.Nb(1),a.Bc("ngForOf",i.result)}}var I=function(){var t=function(){function t(e,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.runService=e,this.homeServiceService=i,this.router=n,this.selectedValidation=[],this.chooseValidation=[],this.taskName=[],this.idApp=[],this.unitTestDetails={},this.fullLoadDetails={},this.projectDomains=[],this.valiRunType=[{name:"Full Load",code:"full_load"},{name:"Unit Testing",code:"unit_testing"}],this.count=0,this.show=!0,this.selectedRunType="full_load",this.showRunTypeDropdown=new a.p,this.arr=[],this.appConstant=new s.a}var i,n,l;return i=t,(n=[{key:"ngOnInit",value:function(){var e=this;if(this.domainId=sessionStorage.getItem("activeDomainId")+"_"+sessionStorage.getItem("activeProjectId"),this.unitTestDetails=JSON.parse(sessionStorage.getItem("unitTestRun")),this.fullLoadDetails=JSON.parse(sessionStorage.getItem("fullLoadRun")),null!=this.unitTestDetails){this.selectedRunType="unit_testing",this.valName=this.unitTestDetails.ValidationCheckName;var t=Number(this.unitTestDetails.ValidationId);this.idApp.push(t),this.show=!1,this.progressCheck()}else if(null!=this.fullLoadDetails){this.selectedRunType="full_load",this.valName=this.fullLoadDetails.ValidationCheckName;var i=Number(this.fullLoadDetails.ValidationId);this.idApp.push(i),this.show=!1,this.progressCheck()}else{this.projectDomains=this.homeServiceService.getProjectList(),this.projectDomains.map(function(e){e.domainProject=e.domainName+"-"+e.projectName,e.domainAndProjectId=e.domainId+"_"+e.idProject,e.domainAndProjectName=e.domainName+"-"+e.projectName});var n={domainId:sessionStorage.getItem("activeDomainId"),projectId:sessionStorage.getItem("activeProjectId")};this.runService.getValCheckNameList("validationCheckName",n).subscribe(function(t){var i;e.chooseValidation=t.result,null===(i=e.chooseValidation)||void 0===i||i.map(function(e){e.validationName=e.validationName})})}this.onChangeDomProj()}},{key:"ngOnDestroy",value:function(){var e=this;this.arr.map(function(t){clearInterval(t),e.arr=[]}),sessionStorage.removeItem("unitTestRun"),sessionStorage.removeItem("fullLoadRun"),sessionStorage.removeItem("run")}},{key:"onChangeDomProj",value:function(){var e=this;this.selectedValidation=[];var t={domainId:sessionStorage.getItem("activeDomainId"),projectId:sessionStorage.getItem("activeProjectId")};this.runService.getValCheckNameList("validationCheckName",t).subscribe(function(t){var i;e.chooseValidation=t.result,null===(i=e.chooseValidation)||void 0===i||i.map(function(e){e.validationName=e.validationName})})}},{key:"onChangeRunType",value:function(e){}},{key:"submit",value:function(){var e=this;this.count=0,this.selectedValidation.forEach(function(t){e.validationNameList=e.selectedValidation.find(function(t){return t.validationName===e.selectedValidation[e.count].validationName}),e.taskName.push(e.selectedValidation[e.count].validationName),e.idApp.push(e.selectedValidation[e.count].appId),e.count++}),this.validationCheckName=this.taskName.toString(),this.show=!1,this.showRunTypeDropdown.emit(!1),this.progressCheck()}},{key:"getselectedValidationString",value:function(){var e="";return this.selectedValidation.forEach(function(t,i){e=e+(0!=i?",":"")+t.validationName}),e}},{key:"progressCheck",value:function(){var e=this;this.unitTestDetails=JSON.parse(sessionStorage.getItem("unitTestRun")),this.fullLoadDetails=JSON.parse(sessionStorage.getItem("fullLoadRun"));var t=0,i=new o.a;i.validationRunType=this.selectedRunType,i.appIds=JSON.stringify(this.idApp),this.runService.getRunAndTask("runTaskResult",i).subscribe(function(i){var n;e.result=i.result,null===(n=e.result)||void 0===n||n.map(function(i){var n=e.result.find(function(i){return i.uniqueId===e.result[t].uniqueId});i.intervalId=setInterval(function(){null===e.unitTestDetails&&null===e.fullLoadDetails?e.selectedValidation.forEach(function(t){t.appId==n.appId&&(i.validationName=t.validationName,e.valName=t.validationName)}):(i.validationName=null!=e.unitTestDetails?e.unitTestDetails.ValidationCheckName:e.fullLoadDetails.ValidationCheckName,e.valName=i.validationName);var t=new o.b;t.idApp=n.appId,t.task_name=e.valName,t.uniqueId=n.uniqueId,e.runService.getStatusPoll("statusPoll",t).subscribe(function(e){var t;i.success=null===(t=null==e?void 0:e.result)||void 0===t?void 0:t.status,"Task queued"===i.success||"Task started"===i.success?i.progressBarShow=!1:"Task in progress"===i.success?(i.value=e.result.percentage,i.progressBarShow=!0,i.value>=100&&(i.value=100)):("Task killed"===i.success||"Task completed"===i.success||"Task failed"===i.success)&&(i.progressBarShow=!1,clearInterval(i.intervalId))})},2500),e.arr.push(i.intervalId),t++})})}}])&&e(i.prototype,n),l&&e(i,l),Object.defineProperty(i,"prototype",{writable:!1}),t}();return t.\u0275fac=function(e){return new(e||t)(a.dc(l.a),a.dc(r.a),a.dc(c.i))},t.\u0275cmp=a.Xb({type:t,selectors:[["app-run"]],outputs:{showRunTypeDropdown:"showRunTypeDropdown"},decls:2,vars:2,consts:[["class","create-conn-main",4,"ngIf"],[4,"ngIf"],[1,"create-conn-main"],[1,"main-container"],[1,"row"],[1,"col-sm-12","col-md-6","mr-top"],["for","validationCheckType",1,"form-label"],[1,"req-field"],["defaultLabel","Select Validation","optionLabel","validationName","name","selectedValidation",1,"multiselect-custom",3,"options","ngModel","filter","maxSelectedLabels","selectedItemsLabel","ngModelChange"],["pTemplate","selectedItems"],["pTemplate","item"],["optionLabel","name","optionValue","code",3,"options","ngModel","virtualScroll","itemSize","ngModelChange"],[1,"note","row"],[1,"col-sm-12","col-md-6","mr-top","text-left"],[1,"row","mr-top"],[1,"col-sm-12","col-md-12"],["pButton","","type","button","label","Submit",1,"button","w-button","shadow","btn-mr-rt",3,"disabled","click"],["class","validationType-item validationType-item-value",4,"ngIf"],["class","validationType-placeholder",4,"ngIf"],[1,"validationType-item","validationType-item-value"],[1,"validationType-placeholder"],[1,"validationType-item"],["class","container-fluid create-conn-main1",4,"ngFor","ngForOf"],[1,"container-fluid","create-conn-main1"],[1,"col-sm-12"],[1,"form-title","wordBreak1"],[1,"padding-left-0",3,"value","appName","success","progressBarShow"]],template:function(e,t){1&e&&(a.Zc(0,C,28,11,"div",0),a.Zc(1,P,2,1,"div",1)),2&e&&(a.Bc("ngIf",t.show),a.Nb(1),a.Bc("ngIf",!t.show))},directives:[d.n,p.a,u.o,u.r,m.i,g.a,h.b,d.m,f.a],styles:["[_ngcontent-%COMP%]::-moz-placeholder{color:gray;opacity:.8}[_ngcontent-%COMP%]::placeholder{color:gray;opacity:.8}button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.req-field[_ngcontent-%COMP%]{color:#eb5454;font-weight:700!important}.add-icon[_ngcontent-%COMP%]{height:25px;width:25px}.note[_ngcontent-%COMP%]{text-align:left;font-size:13px;color:#eb5454;margin-top:30px!important}.err-msg[_ngcontent-%COMP%]{font-size:12px;color:#f66e63;margin-bottom:0;padding-top:8px;padding-left:5px}[_nghost-%COMP%]     .p-inputtext:enabled:focus{box-shadow:none!important}.create-conn-main[_ngcontent-%COMP%], .create-conn-main1[_ngcontent-%COMP%]{margin-top:15px;background-color:#fff;font-family:Open Sans!important}.create-conn-main1[_ngcontent-%COMP%]{border-radius:20px;padding:15px;box-shadow:0 2px 8px 0 rgba(99,99,99,.2)}.mr-top[_ngcontent-%COMP%]{padding-top:10px}.p-field-checkbox-form[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.form-title[_ngcontent-%COMP%]{padding:10px 0;font-family:Open_Sans_Semi_Bold!important;font-size:18px;border-bottom:1px solid #eef1f5;margin-top:-10px}.form-label[_ngcontent-%COMP%]{font-size:16px}[_nghost-%COMP%]     .p-inputtext{font-size:14px!important}.p-field[_ngcontent-%COMP%]{margin:0 10px}.p-field-form[_ngcontent-%COMP%]{padding-right:0}.diabled-ip[_ngcontent-%COMP%]{opacity:.7;box-shadow:none!important;cursor:inherit}.diabled-ip[_ngcontent-%COMP%]:hover{border:1px solid #ced4da;cursor:not-allowed!important}.form-field[_ngcontent-%COMP%]{width:100%!important;border-radius:10px!important}.btn-cancel[_ngcontent-%COMP%]{margin-right:10px;background-color:#eb5454!important}[_nghost-%COMP%]     .p-dropdown{width:100%!important;border-radius:10px!important;height:37px!important}[_nghost-%COMP%]     .p-multiselect{width:100%!important;border-radius:10px!important;height:37px!important}[_nghost-%COMP%]     .multiselect-custom .p-multiselect-label{padding-top:.5rem!important;padding-bottom:.5rem!important}[_nghost-%COMP%]     .multiselect-custom .validationType-item-value{padding:.1rem .25rem!important;border-radius:3px!important;display:inline-flex!important;margin-right:.5rem!important}[_nghost-%COMP%]     .multiselect-custom .validationType-item div{white-space:normal;word-break:break-word}[_nghost-%COMP%]     .multiselect-custom .validationType-placeholder{font-family:Open Sans!important;font-size:14px!important;font-weight:400;padding:.25rem}@media screen and (max-width:640px){[_nghost-%COMP%]     .p-multiselect{width:100%!important}}[_nghost-%COMP%]     .p-disabled:hover{cursor:not-allowed!important}.optional-fields[_ngcontent-%COMP%]{color:#789}.form-checkbox[_ngcontent-%COMP%]{padding-left:10px;font-size:16px;padding-top:8px}.btn-mr-rt[_ngcontent-%COMP%]{margin-right:10px;background:linear-gradient(180deg,#ff7526,#fb9a64)!important}[_nghost-%COMP%]     .p-button-label{width:156px;font-size:14px;font-weight:600;font-style:normal;height:40px;color:#fff}.cursor-not[_ngcontent-%COMP%]:hover{cursor:not-allowed!important}.p-progressbar[_ngcontent-%COMP%]   .p-progressbar-value[_ngcontent-%COMP%]{margin:0;background:#051fa8!important;background-color:#051fa8!important}.p-progressbar[_ngcontent-%COMP%]{border:0;height:20px!important;background:#dee2e6;border-radius:3px}.padding-left-0[_ngcontent-%COMP%]{padding-left:0!important}"]}),t}()}}])}();